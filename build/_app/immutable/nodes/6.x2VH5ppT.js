import{d as G,f as b,a as v,g as N,c as J}from"../chunks/C2cYCDAH.js";import"../chunks/CV4--SW5.js";import{p as K,i as M,b as ae,_ as re}from"../chunks/3Dlza38i.js";import{A as E,G as o,B as D,F as w,H as f,j as a,C as W,D as P,z as i,I as L,am as se,aA as le}from"../chunks/BZCZPUy_.js";import{k as ie}from"../chunks/DJXMaYaD.js";import{w as oe}from"../chunks/B8fJUUNV.js";import{b as O,a as ne,d as ce,m as de,c as ve,u as Q,T as ue,l as _e}from"../chunks/BHfulT-l.js";import{r as B,s as ke}from"../chunks/CC_dDezr.js";import{s as Y}from"../chunks/BTy8cjxq.js";import{s as be,e as me}from"../chunks/TFHsxczQ.js";import{M as fe}from"../chunks/D9K11hyb.js";var pe=async(l,e)=>{l.key==="Enter"&&await e()},we=async(l,e)=>{l.key==="Enter"&&await e()},ye=b('<header class="svelte-xt44rj"><h1 class="svelte-xt44rj">Tasks</h1> <p class="svelte-xt44rj">Stay organized and get things done.</p></header> <div class="add-task-wrapper svelte-xt44rj"><div class="task-inputs svelte-xt44rj"><input type="text" placeholder="e.g., Finish project report" tabindex="0" class="svelte-xt44rj"/> <input type="text" class="description-input svelte-xt44rj" placeholder="description" tabindex="0"/></div> <button aria-label="Add new task" tabindex="0" class="svelte-xt44rj"><i class="bi bi-plus-lg svelte-xt44rj"></i> <span>Add Task</span></button></div>',1);function he(l,e){E(e,!0);let t=K(e,"tasks",15),r=W(""),n=W(""),s=async()=>{a(r).length!==0&&(e.dbWorker?(t(await ne(e.dbWorker,a(r),a(n))),i(r,""),i(n,"")):console.error("Worker is not ready. Please try again."))};var T=ye(),m=o(D(T),2),_=w(m),k=w(_);B(k),k.__keydown=[pe,s];var c=o(k,2);B(c),c.__keydown=[we,s],f(_);var h=o(_,2);h.__click=s,f(m),O(k,()=>a(r),d=>i(r,d)),O(c,()=>a(n),d=>i(n,d)),v(l,T),P()}G(["keydown","click"]);var ge=(l,e)=>{var t;return(t=a(e))==null?void 0:t.showModal()},xe=b('<span class="tooltip svelte-1ffcuub">Delete all COMPLETED tasks</span>'),We=(l,e,t)=>{var r;e.yesAction(),(r=a(t))==null||r.closeModal()},Te=(l,e)=>{var t;return(t=a(e))==null?void 0:t.closeModal()},qe=b("<!> <button>Yes</button> <button>No</button>",1),je=b('<button class="delete-all-btn svelte-1ffcuub" aria-label="Delete all completed tasks"><i class="bi bi-trash"></i> <!></button> <div class="message-modal-wrapper svelte-1ffcuub"><!></div>',1);function Ae(l,e){E(e,!0);let t=W(null),r=W(!1);var n=je(),s=D(n);s.__click=[ge,t];var T=o(w(s),2);{var m=c=>{var h=xe();v(c,h)};M(T,c=>{a(r)&&c(m)})}f(s);var _=o(s,2),k=w(_);ae(fe(k,{get title(){return e.title},children:(c,h)=>{var d=qe(),g=D(d);be(g,()=>e.children);var q=o(g,2);q.__click=[We,e,t];var u=o(q,2);u.__click=[Te,t],v(c,d)},$$slots:{default:!0}}),c=>i(t,c,!0),()=>a(t)),f(_),N("mouseenter",s,()=>i(r,!0)),N("mouseleave",s,()=>i(r,!1)),v(l,n),P()}G(["click"]);var De=(l,e)=>i(e,!a(e)),Me=b("<p>Are you sure you want to delete all completed tasks?</p>"),Ee=async(l,e,t)=>e(a(t).id),Pe=async(l,e,t,r,n,s)=>{l.key==="Enter"?(e.dbWorker&&a(t).trim()&&r(await Q(e.dbWorker,a(n).id,a(t).trim())),i(s,null),i(t,"")):l.key==="Escape"&&(i(s,null),i(t,""))},Ce=b('<input type="text" class="task-edit-input svelte-1eiwilq"/>'),Ie=b('<span class="task-name svelte-1eiwilq"> </span>'),ze=(l,e,t,r)=>{i(e,a(t).id,!0),i(r,a(t).name,!0)},Fe=async(l,e,t,r)=>{e.dbWorker?t(await ve(e.dbWorker,a(r).id)):console.error("Worker not ready. Please wait.")},Le=b('<li class="task-item svelte-1eiwilq"><button aria-label="Mark task as uncompleted" class="checkbox svelte-1eiwilq"><i class="bi bi-check svelte-1eiwilq"></i></button> <!> <small> </small> <button class="delete-btn svelte-1eiwilq" aria-label="Edit task name"><i class="bi bi-pencil"></i></button> <button class="delete-btn svelte-1eiwilq" aria-label="Delete task"><i class="bi bi-trash"></i></button></li>'),Ne=b('<ul class="task-list svelte-1eiwilq"></ul>'),Oe=b('<div class="tasks-section svelte-1eiwilq"><div class="section-header svelte-1eiwilq"><button class="section-title-button svelte-1eiwilq"><h2 class="section-title svelte-1eiwilq">Done</h2> <i></i></button> <!></div> <!></div>');function Be(l,e){E(e,!0);let t=K(e,"tasks",15),r=W(!0),n=W(null),s=W(""),T=async u=>{e.dbWorker?t(await de(e.dbWorker,u)):console.error("Worker is not ready. Please try again.")};var m=Oe(),_=w(m),k=w(_);k.__click=[De,r];var c=o(w(k),2);let h;f(k);var d=o(k,2);Ae(d,{title:"Are you sure?",yesAction:async()=>t(await ce(e.dbWorker)),children:(u,j)=>{var p=Me();v(u,p)},$$slots:{default:!0}}),f(_);var g=o(_,2);{var q=u=>{var j=Ne();me(j,21,t,p=>p.id,(p,y)=>{var H=J(),U=D(H);{var X=C=>{var I=Le(),R=w(I);R.__click=[Ee,T,y];var S=o(R,2);{var Z=A=>{var x=Ce();B(x),x.__keydown=[Pe,e,s,t,y,n],N("blur",x,async()=>{e.dbWorker&&a(s).trim()&&a(s)!==a(y).name&&t(await Q(e.dbWorker,a(y).id,a(s).trim())),i(n,null),i(s,"")}),O(x,()=>a(s),F=>i(s,F)),v(A,x)},$=A=>{var x=Ie(),F=w(x,!0);f(x),L(()=>Y(F,a(y).name)),v(A,x)};M(S,A=>{a(n)===a(y).id?A(Z):A($,!1)})}var z=o(S,2),ee=w(z,!0);f(z);var V=o(z,2);V.__click=[ze,n,y,s];var te=o(V,2);te.__click=[Fe,e,t,y],f(I),L(()=>Y(ee,a(y).description)),v(C,I)};M(U,C=>{a(y).completed&&C(X)})}v(p,H)}),f(j),v(u,j)};M(g,u=>{a(r)||u(q)})}f(m),L(u=>h=ke(c,1,"bi bi-chevron-down svelte-1eiwilq",null,h,u),[()=>({rotated:a(r)})]),v(l,m),P()}G(["click","keydown"]);var Ge=b("<!> <!> <!>",1),He=b("<p>Please wait while the app loads.</p>"),Re=b('<div class="container svelte-1eux5ee"><!></div>');function Se(l,e){E(e,!0);let t=W(null),r=W(se([]));le(async()=>{const m=await re(()=>import("../chunks/BYbjoqHL.js"),[],import.meta.url);i(t,oe(new m.default),!0),await a(t).initWorker(),i(r,await _e(a(t)),!0)});var s=Re(),T=w(s);ie(T,()=>a(t),m=>{var _=J(),k=D(_);{var c=d=>{var g=Ge(),q=D(g);he(q,{get dbWorker(){return a(t)},get tasks(){return a(r)},set tasks(p){i(r,p,!0)}});var u=o(q,2);Be(u,{get dbWorker(){return a(t)},get tasks(){return a(r)},set tasks(p){i(r,p,!0)}});var j=o(u,2);ue(j,{get dbWorker(){return a(t)},get tasks(){return a(r)},set tasks(p){i(r,p,!0)}}),v(d,g)},h=d=>{var g=He();v(d,g)};M(k,d=>{a(t)?d(c):d(h,!1)})}v(m,_)}),f(s),v(l,s),P()}function at(l){Se(l,{})}export{at as component};
