import{d as Y,f as b,a as u,g as R,c as $}from"../chunks/C2cYCDAH.js";import"../chunks/CV4--SW5.js";import{p as ee,i as P,b as ne,_ as ce}from"../chunks/3Dlza38i.js";import{A as C,G as c,B as A,F as g,H as y,j as e,C as j,D as I,z as l,aA as te,I as G,am as de}from"../chunks/BZCZPUy_.js";import{k as ve}from"../chunks/DJXMaYaD.js";import{w as ue}from"../chunks/B8fJUUNV.js";import{b as S,a as _e,d as ke,m as be,c as me,u as ae,T as fe,l as pe}from"../chunks/BHfulT-l.js";import{r as V,s as H}from"../chunks/CC_dDezr.js";import{s as Z}from"../chunks/BTy8cjxq.js";import{s as ye,e as we}from"../chunks/TFHsxczQ.js";import{M as he}from"../chunks/D9K11hyb.js";var ge=async(o,t)=>{o.key==="Enter"&&await t()},je=async(o,t)=>{o.key==="Enter"&&await t()},xe=b('<header class="svelte-xt44rj"><h1 class="svelte-xt44rj">Tasks</h1> <p class="svelte-xt44rj">Stay organized and get things done.</p></header> <div class="add-task-wrapper svelte-xt44rj"><div class="task-inputs svelte-xt44rj"><input type="text" placeholder="e.g., Finish project report" tabindex="0" class="svelte-xt44rj"/> <input type="text" class="description-input svelte-xt44rj" placeholder="description" tabindex="0"/></div> <button aria-label="Add new task" tabindex="0" class="svelte-xt44rj"><i class="bi bi-plus-lg svelte-xt44rj"></i> <span>Add Task</span></button></div>',1);function We(o,t){C(t,!0);let a=ee(t,"tasks",15),r=j(""),i=j(""),s=async()=>{e(r).length!==0&&(t.dbWorker?(a(await _e(t.dbWorker,e(r),e(i))),l(r,""),l(i,"")):console.error("Worker is not ready. Please try again."))};var m=xe(),_=c(A(m),2),w=g(_),f=g(w);V(f),f.__keydown=[ge,s];var n=c(f,2);V(n),n.__keydown=[je,s],y(w);var h=c(w,2);h.__click=s,y(_),S(f,()=>e(r),d=>l(r,d)),S(n,()=>e(i),d=>l(i,d)),u(o,m),I()}Y(["keydown","click"]);var Te=(o,t)=>{var a;return(a=e(t))==null?void 0:a.showModal()},De=b('<span class="tooltip svelte-1ffcuub">Delete all COMPLETED tasks</span>'),Ae=(o,t,a)=>{var r;t.yesAction(),(r=e(a))==null||r.closeModal()},Me=(o,t)=>{var a;return(a=e(t))==null?void 0:a.closeModal()},Pe=b("<!> <button>Yes</button> <button>No</button>",1),Ee=b('<button class="delete-all-btn svelte-1ffcuub" aria-label="Delete all completed tasks"><i class="bi bi-trash"></i> <!></button> <div class="message-modal-wrapper svelte-1ffcuub"><!></div>',1);function Ce(o,t){C(t,!0);let a=j(null),r=j(!1);var i=Ee(),s=A(i);s.__click=[Te,a];var m=c(g(s),2);{var _=n=>{var h=De();u(n,h)};P(m,n=>{e(r)&&n(_)})}y(s);var w=c(s,2),f=g(w);ne(he(f,{get title(){return t.title},children:(n,h)=>{var d=Pe(),x=A(d);ye(x,()=>t.children);var T=c(x,2);T.__click=[Ae,t,a];var D=c(T,2);D.__click=[Me,a],u(n,d)},$$slots:{default:!0}}),n=>l(a,n,!0),()=>e(a)),y(w),R("mouseenter",s,()=>l(r,!0)),R("mouseleave",s,()=>l(r,!1)),u(o,i),I()}Y(["click"]);var Ie=(o,t)=>l(t,!e(t)),ze=b("<p>Are you sure you want to delete all completed tasks?</p>"),Fe=async(o,t,a)=>t(e(a).id),Le=async(o,t,a,r,i,s)=>{o.key==="Enter"?(t.dbWorker&&e(a).trim()&&r(await ae(t.dbWorker,e(i).id,e(a).trim())),l(s,null),l(a,"")):o.key==="Escape"&&(l(s,null),l(a,""))},Ne=b('<input type="text" class="task-edit-input svelte-1etjro8"/>'),Oe=(o,t,a,r)=>{e(t)&&l(a,e(a)===e(r).id?null:e(r).id,!0)},Be=b('<span class="task-name svelte-1etjro8"> </span>'),Ge=(o,t,a,r,i)=>{l(t,e(a).id,!0),l(r,e(a).name,!0),l(i,null)},He=async(o,t,a,r,i)=>{t.dbWorker?a(await me(t.dbWorker,e(r).id)):console.error("Worker not ready. Please wait."),l(i,null)},Re=b('<li class="task-item svelte-1etjro8"><button aria-label="Mark task as uncompleted" class="checkbox svelte-1etjro8"><i class="bi bi-check svelte-1etjro8"></i></button> <!> <small> </small> <button aria-label="Edit task name"><i class="bi bi-pencil"></i></button> <button aria-label="Delete task"><i class="bi bi-trash"></i></button></li>'),Se=b('<ul class="task-list svelte-1etjro8"></ul>'),Ve=b('<div class="tasks-section svelte-1etjro8"><div class="section-header svelte-1etjro8"><button class="section-title-button svelte-1etjro8"><h2 class="section-title svelte-1etjro8">Done</h2> <i></i></button> <!></div> <!></div>');function Ye(o,t){C(t,!0);let a=ee(t,"tasks",15),r=j(!0),i=j(null),s=j(""),m=j(null),_=j(!1);te(()=>{l(_,"ontouchstart"in window||navigator.maxTouchPoints>0,!0)});let w=async v=>{t.dbWorker?a(await be(t.dbWorker,v)):console.error("Worker is not ready. Please try again.")};var f=Ve(),n=g(f),h=g(n);h.__click=[Ie,r];var d=c(g(h),2);let x;y(h);var T=c(h,2);Ce(T,{title:"Are you sure?",yesAction:async()=>a(await ke(t.dbWorker)),children:(v,E)=>{var M=ze();u(v,M)},$$slots:{default:!0}}),y(n);var D=c(n,2);{var z=v=>{var E=Se();we(E,21,a,M=>M.id,(M,k)=>{var q=$(),re=A(q);{var se=F=>{var L=Re(),J=g(L);J.__click=[Fe,w,k];var K=c(J,2);{var le=W=>{var p=Ne();V(p),p.__keydown=[Le,t,s,a,k,i],R("blur",p,async()=>{t.dbWorker&&e(s).trim()&&e(s)!==e(k).name&&a(await ae(t.dbWorker,e(k).id,e(s).trim())),l(i,null),l(s,"")}),S(p,()=>e(s),B=>l(s,B)),u(W,p)},oe=W=>{var p=Be();p.__click=[Oe,_,m,k];var B=g(p,!0);y(p),G(()=>Z(B,e(k).name)),u(W,p)};P(K,W=>{e(i)===e(k).id?W(le):W(oe,!1)})}var N=c(K,2),ie=g(N,!0);y(N);var O=c(N,2);let Q;O.__click=[Ge,i,k,s,m];var U=c(O,2);let X;U.__click=[He,t,a,k,m],y(L),G((W,p)=>{Z(ie,e(k).description),Q=H(O,1,"delete-btn svelte-1etjro8",null,Q,W),X=H(U,1,"delete-btn svelte-1etjro8",null,X,p)},[()=>({"mobile-visible":e(_)&&e(m)===e(k).id}),()=>({"mobile-visible":e(_)&&e(m)===e(k).id})]),u(F,L)};P(re,F=>{e(k).completed&&F(se)})}u(M,q)}),y(E),u(v,E)};P(D,v=>{e(r)||v(z)})}y(f),G(v=>x=H(d,1,"bi bi-chevron-down svelte-1etjro8",null,x,v),[()=>({rotated:e(r)})]),u(o,f),I()}Y(["click","keydown"]);var qe=b("<!> <!> <!>",1),Je=b("<p>Please wait while the app loads.</p>"),Ke=b('<div class="container svelte-1eux5ee"><!></div>');function Qe(o,t){C(t,!0);let a=j(null),r=j(de([]));te(async()=>{const _=await ce(()=>import("../chunks/BYbjoqHL.js"),[],import.meta.url);l(a,ue(new _.default),!0),await e(a).initWorker(),l(r,await pe(e(a)),!0)});var s=Ke(),m=g(s);ve(m,()=>e(a),_=>{var w=$(),f=A(w);{var n=d=>{var x=qe(),T=A(x);We(T,{get dbWorker(){return e(a)},get tasks(){return e(r)},set tasks(v){l(r,v,!0)}});var D=c(T,2);Ye(D,{get dbWorker(){return e(a)},get tasks(){return e(r)},set tasks(v){l(r,v,!0)}});var z=c(D,2);fe(z,{get dbWorker(){return e(a)},get tasks(){return e(r)},set tasks(v){l(r,v,!0)}}),u(d,x)},h=d=>{var x=Je();u(d,x)};P(f,d=>{e(a)?d(n):d(h,!1)})}u(_,w)}),y(s),u(o,s),I()}function it(o){Qe(o,{})}export{it as component};
