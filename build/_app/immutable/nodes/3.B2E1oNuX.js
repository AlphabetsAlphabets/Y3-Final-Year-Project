import{p as Fe,i as ce,b as yt,_ as ci}from"../chunks/Blysb1Co.js";import{c as De,a as M,f as Z,g as Se,s as vr,d as et}from"../chunks/BLYeUyYq.js";import{ag as Sr,g as R,ah as di,k as ui,s as fi,h as hr,aj as vi,t as hi,aO as qe,az as We,aP as mi,y as on,ax as An,A as ge,aQ as Me,aR as gi,aS as _i,B as j,j as i,C as _e,H as re,F as ne,G as Q,w as Yt,z as le,ay as C,f as rt,aT as yi,D as ie,aw as dn,aU as Bn,v as bi,aV as st,I as Ge,M as wi,ak as xr}from"../chunks/Babm-7jm.js";import{k as $i}from"../chunks/Ck1OnL1C.js";import{M as Di,w as Ti}from"../chunks/DQCzdT6O.js";import{c as Gn}from"../chunks/rP9ABpp4.js";import{e as Ye,i as bt,a as ct,s as Mt,r as tn,b as nn}from"../chunks/rWHTdQe2.js";import{t as Ci,s as V,c as mr}from"../chunks/CLOgTPVS.js";import{s as Re,a as o,b as me,d as Le}from"../chunks/Aas0eYTe.js";import"../chunks/6bccSeWu.js";import{i as Yn}from"../chunks/CROy6RRH.js";import{f as gr,h as ki,u as Ei,e as Si,d as xi,a as Ri,l as pi,b as Pi,c as Mi,g as Ai}from"../chunks/F2MYinTD.js";function Et(e,t,n){Sr(()=>{var r=R(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var a=!1,l={};di(()=>{var s=n();ui(s),a&&fi(l,s)&&(l=s,r.update(s))}),a=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Cn(e,t={},n,r){for(var a in n){var l=n[a];t[a]!==l&&(n[a]==null?e.style.removeProperty(a):e.style.setProperty(a,l,r))}}function Vn(e,t,n,r){var a=e.__style;if(hr||a!==t){var l=Ci(t,r);(!hr||l!==e.getAttribute("style"))&&(l==null?e.removeAttribute("style"):e.style.cssText=l),e.__style=t}else r&&(Array.isArray(r)?(Cn(e,n==null?void 0:n[0],r[0]),Cn(e,n==null?void 0:n[1],r[1],"important")):Cn(e,n,r));return r}function wt(e,t,n){var r=vi(e,t);r&&r.set&&(e[t]=n,hi(()=>{e[t]=null}))}function Li(e){return function(t){return t.key==="Enter"||t.key===" "&&!t.preventDefault()?e.call(this,t):void 0}}function xe(e,t){let n={update(r){typeof r=="string"?e.innerText=r:r!=null&&r.domNodes?e.replaceChildren(...r.domNodes):r!=null&&r.html&&(e.innerHTML=r.html)}};return n.update(t),n}function kn(e,t){let n=new ResizeObserver(r=>{for(let a of r)t(a)});return n.observe(e),{destroy(){n.unobserve(e)}}}const Ln=86400;function ut(e=void 0){return e!==void 0?e instanceof Date?yr(e):Hi(e):yr(new Date)}function Pe(e){if(typeof e=="number")e={seconds:e};else if(typeof e=="string"){let n=0,r=2;for(let a of e.split(":",3))n+=parseInt(a,10)*Math.pow(60,r--);e={seconds:n}}else e instanceof Date&&(e={hours:e.getUTCHours(),minutes:e.getUTCMinutes(),seconds:e.getUTCSeconds()});let t=e.weeks||e.week||0;return{years:e.years||e.year||0,months:e.months||e.month||0,days:t*7+(e.days||e.day||0),seconds:(e.hours||e.hour||0)*60*60+(e.minutes||e.minute||0)*60+(e.seconds||e.second||0),inWeeks:!!t}}function B(e){return new Date(e.getTime())}function se(e,t,n=1){e.setUTCFullYear(e.getUTCFullYear()+n*t.years);let r=e.getUTCMonth()+n*t.months;for(e.setUTCMonth(r),r%=12,r<0&&(r+=12);e.getUTCMonth()!==r;)At(e);return e.setUTCDate(e.getUTCDate()+n*t.days),e.setUTCSeconds(e.getUTCSeconds()+n*t.seconds),e}function an(e,t,n=1){return se(e,t,-n)}function Dt(e,t=1){return e.setUTCDate(e.getUTCDate()+t),e}function At(e,t=1){return Dt(e,-t)}function Ve(e){return e.setUTCHours(0,0,0,0),e}function Ue(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())}function dt(e,t=19){return e.toISOString().substring(0,t)}function je(e,...t){return t.every(n=>e.getTime()===n.getTime())}function Ii(e,t){let n=t-e.getUTCDay();return e.setUTCDate(e.getUTCDate()+(n>=0?n:n+7)),e}function Rr(e,t){let n=t-e.getUTCDay();return e.setUTCDate(e.getUTCDate()+(n<=0?n:n-7)),e}function _r(e){return typeof e=="string"&&e.length<=10}function In(e,t){return e.setUTCHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),0),e}function Qe(e){return e.seconds}function Hn(e,t){return se(e,t),e}function zn(e,t,n){if(an(e,t),n.length&&n.length<7)for(;n.includes(e.getUTCDay());)At(e);return e}function yr(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()))}function Hi(e){const t=e.match(/\d+/g);return new Date(Date.UTC(Number(t[0]),Number(t[1])-1,Number(t[2]),Number(t[3]||0),Number(t[4]||0),Number(t[5]||0)))}function Lt(...e){return Object.assign(...e)}function _t(e){return Object.keys(e)}function zi(e){return Object.entries(e)}function Ui(e){return Math.floor(e)}function $t(...e){return Math.min(...e)}function gt(...e){return Math.max(...e)}function Fi(){return Symbol("ec")}function qn(e){return Array.isArray(e)}function de(e){return typeof e=="function"}function Ni(e){return e()}function pr(e){e.forEach(Ni)}function Oi(){}const Un=e=>e;function Pr(e,t,n){n.update(r=>r.set(t,e))}function Wi(e){pr(e),e.clear()}function Bi(e,t,n){t??(t=e),n.has(t)||n.set(t,setTimeout(()=>{n.delete(t),e()}))}let Xn=Fi();function Kn(e,t){e[Xn]=t}function Gi(e){return!!(e!=null&&e[Xn])}function qt(e){return e[Xn]}function Mr(e,t,n,r=[]){let a=document.createElement(e);a.className=t,typeof n=="string"?a.innerText=n:n.domNodes?a.replaceChildren(...n.domNodes):n.html&&(a.innerHTML=n.html);for(let l of r)a.setAttribute(...l);return a}function Yi(e){return e.scrollHeight>e.clientHeight}function It(e){return e.getBoundingClientRect()}function Fn(e,t){for(;t--;)e=e.parentElement;return e}function Vi(e){return It(e).height}function Pt(e,t,n=document,r=[]){r.push(n);for(let a of n.elementsFromPoint(e,t)){if(Gi(a))return a;if(a.shadowRoot&&!r.includes(a.shadowRoot)){let l=Pt(e,t,a.shadowRoot,r);if(l)return l}}return null}function Vt(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function qi(e,t,n,r){return{type:e,title:t,currentStart:n.start,currentEnd:n.end,activeStart:r.start,activeEnd:r.end,calendar:void 0}}function Ne(e){return e=Lt({},e),e.currentStart=Ue(e.currentStart),e.currentEnd=Ue(e.currentEnd),e.activeStart=Ue(e.activeStart),e.activeEnd=Ue(e.activeEnd),e}function Ar(e){return e.startsWith("list")}function En(e){return e.includes("Timeline")}let Xi=1;function ln(e){return e.map(t=>{let n={id:"id"in t?String(t.id):`{generated-${Xi++}}`,resourceIds:Sn(t,"resourceId").map(String),allDay:t.allDay??(_r(t.start)&&_r(t.end)),start:ut(t.start),end:ut(t.end),title:t.title??"",editable:t.editable,startEditable:t.startEditable,durationEditable:t.durationEditable,display:t.display??"auto",extendedProps:t.extendedProps??{},backgroundColor:t.backgroundColor??t.color,textColor:t.textColor,classNames:Sn(t,"className"),styles:Sn(t,"style")};if(n.allDay){Ve(n.start);let r=B(n.end);Ve(n.end),(!je(n.end,r)||je(n.end,n.start))&&Dt(n.end)}return n})}function Sn(e,t){let n=e[t+"s"]??e[t]??[];return qn(n)?n:[n]}function Ki(e){return e.map(t=>({events:t.events,url:t.url&&t.url.trimEnd("&")||"",method:t.method&&t.method.toUpperCase()||"GET",extraParams:t.extraParams||{}}))}function sn(e,t,n){let r={start:e.start>t?e.start:t,end:e.end<n?e.end:n,event:e};return r.zeroDuration=je(r.start,r.end),r}function Lr(e){e.sort((t,n)=>t.start-n.start||n.event.allDay-t.event.allDay)}function Zi(e,t,n,r,a,l){let s=a.formatRange(e.start,t&&e.event.display!=="pointer"&&!e.zeroDuration?In(B(e.start),e.end):e.start),d;if(n&&(d=de(n)?n({event:Be(e.event),timeText:s,view:Ne(l)}):n),d===void 0){let u;switch(e.event.display){case"background":u=[];break;case"pointer":u=[br(s,e,r)];break;default:u=[...e.event.allDay?[]:[br(s,e,r)],Mr("h4",r.eventTitle,e.event.title)]}d={domNodes:u}}return[s,d]}function br(e,t,n){return Mr("time",n.eventTime,e,[["datetime",dt(t.start)]])}function Ji(e,t,n){let r=t.classNames;return e&&(de(e)&&(e=e({event:Be(t),view:Ne(n)})),r=[...qn(e)?e:[e],...r]),r}function Be(e){return Ir(e,Ue)}function xn(e){return Ir(e,B)}function Ir(e,t){return e=Lt({},e),e.start=t(e.start),e.end=t(e.end),e}function Rn(e,t){let n={};if(e.length){Lr(e);let r;for(let a of e){let l=[],s=Ve(B(a.start));for(;a.end>s;){if(!t.includes(s.getUTCDay())&&(l.push(B(s)),l.length>1)){let d=s.getTime();n[d]?n[d].chunks.push(a):n[d]={sorted:!1,chunks:[a]}}Dt(s)}if(l.length){a.date=l[0],a.days=l.length,a.dates=l,a.start<l[0]&&(a.start=l[0]);let d=Dt(B(l.at(-1)));a.end>d&&(a.end=d)}else a.date=Ve(B(a.start)),a.days=1,a.dates=[a.date];r&&je(r.date,a.date)&&(a.prev=r),r=a}}return n}function Qi(e,t,n){e.top=0,e.prev&&(e.top=e.prev.bottom+1),e.bottom=e.top+n;let r=1,a=e.date.getTime();if(t[a]){t[a].sorted||(t[a].chunks.sort((l,s)=>l.top-s.top),t[a].sorted=!0);for(let l of t[a].chunks)if(e.top<l.bottom&&e.bottom>l.top){let s=l.bottom-e.top+1;r+=s,e.top+=s,e.bottom+=s}}return r}function Hr(e,t){var r;e.length=t.length;let n=[];for(let a of e)n.push((r=a==null?void 0:a.reposition)==null?void 0:r.call(a));return n}function cn(e,t,n,r){return e.start<n&&e.end>t?r?(qn(r)||(r=[r]),r.some(a=>e.resourceIds.includes(a.id))):!0:!1}function Xt(e){return ji(e)||zr(e)||ea(e)}function ft(e){return e==="background"}function ji(e){return e==="preview"}function zr(e){return e==="ghost"}function ea(e){return e==="pointer"}function ta(e){return Ur(e,"day")}function na(e){return Ur(e,"week")}function Ur(e,t){return{...e,next:"Next "+t,prev:"Previous "+t}}function wr(e){return t=>({...t,view:e})}function ra(e){let t,n;return e&&({start:t,end:n}=e,t&&(t=Ve(ut(t))),n&&(n=Ve(ut(n)))),{start:t,end:n}}function Zn(e,t){return t.start&&e<t.start||t.end&&e>t.end}function $r(e,t){return t.start&&e<t.start&&(e=t.start),t.end&&e>t.end&&(e=t.end),e}function ia(e){let t=[];return Fr(e,0,t),t}function Fr(e,t,n){let r=[];for(let a of e){let l=aa(a);r.push(l),n.push(l);let s={level:t,children:[],expanded:!0,hidden:!1};Kn(l,s),a.children&&(s.children=Fr(a.children,t+1,n))}return r}function aa(e){return{id:String(e.id),title:e.title||"",eventBackgroundColor:e.eventBackgroundColor,eventTextColor:e.eventTextColor,extendedProps:e.extendedProps??{}}}function oa(e,t){var n;return(n=Nr(e,t))==null?void 0:n.eventBackgroundColor}function la(e,t){var n;return(n=Nr(e,t))==null?void 0:n.eventTextColor}function Nr(e,t){return t.find(n=>e.resourceIds.includes(n.id))}function pn(e,t){return qe([e,t],([n,r])=>{let a=de(r)?{format:r}:new Intl.DateTimeFormat(n,r);return{format:l=>a.format(Ue(l))}})}function Dr(e,t){return qe([e,t],([n,r])=>{let a;if(de(r))a=r;else{let l=new Intl.DateTimeFormat(n,r);a=(s,d)=>{if(s<=d)return l.formatRange(s,d);{let u=l.formatRangeToParts(d,s),v="",c=["startRange","endRange"],g=[!1,!1];for(let f of u){let _=c.indexOf(f.source);_>=0?g[_]||(v+=sa(c[1-_],u),g[_]=!0):v+=f.value}return v}}}return{formatRange:(l,s)=>a(Ue(l),Ue(s))}})}function sa(e,t){let n="";for(let r of t)r.source==e&&(n+=r.value);return n}function ca(e,t,n,r,a){e=B(e);let l=[],s=B(e);se(e,r.min),se(s,r.max),n===void 0&&(n=t.seconds<3600?Pe(t.seconds*2):t);let d=B(e);for(;e<s;){for(l.push([dt(e),a.format(e),e>=d]);n.seconds&&e>=d;)se(d,n);se(e,t)}return l}function da(e,t,n,r,a){let l=Pe(e),s=Pe(t);if(n){let d=Pe($t(Qe(l),gt(0,Qe(s)-Ln))),u=Pe(gt(Qe(s),Qe(d)+Ln)),v=de(n==null?void 0:n.eventFilter)?n.eventFilter:c=>!ft(c.display);e:for(let c of r){let g=se(B(c),l),f=se(B(c),s),_=se(B(c),d),y=se(B(c),u);for(let w of a)if(!w.allDay&&v(w)&&w.start<y&&w.end>_){if(w.start<g){let h=gt((w.start-c)/1e3,Qe(d));h<Qe(l)&&(l.seconds=h)}if(w.end>f){let h=$t((w.end-c)/1e3,Qe(u));h>Qe(s)&&(s.seconds=h)}if(Qe(l)===Qe(d)&&Qe(s)===Qe(u))break e}}}return{min:l,max:s}}function ua(e){var n;let t={allDayContent:void 0,allDaySlot:!0,buttonText:{today:"today"},customButtons:{},date:new Date,datesSet:void 0,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},dayHeaderAriaLabelFormat:{dateStyle:"full"},displayEventEnd:!0,duration:{weeks:1},events:[],eventAllUpdated:void 0,eventBackgroundColor:void 0,eventClassNames:void 0,eventClick:void 0,eventColor:void 0,eventContent:void 0,eventDidMount:void 0,eventFilter:void 0,eventMouseEnter:void 0,eventMouseLeave:void 0,eventSources:[],eventTextColor:void 0,eventTimeFormat:{hour:"numeric",minute:"2-digit"},filterEventsWithResources:!1,filterResourcesWithEvents:!1,firstDay:0,flexibleSlotTimeLimits:!1,headerToolbar:{start:"title",center:"",end:"today prev,next"},height:void 0,hiddenDays:[],highlightedDates:[],lazyFetching:!0,loading:void 0,locale:void 0,nowIndicator:!1,resourceLabelContent:void 0,resourceLabelDidMount:void 0,resources:[],selectable:!1,scrollTime:"06:00:00",slotDuration:"00:30:00",slotEventOverlap:!0,slotHeight:24,slotLabelInterval:void 0,slotLabelFormat:{hour:"numeric",minute:"2-digit"},slotMaxTime:"24:00:00",slotMinTime:"00:00:00",slotWidth:72,theme:{allDay:"ec-all-day",active:"ec-active",bgEvent:"ec-bg-event",bgEvents:"ec-bg-events",body:"ec-body",button:"ec-button",buttonGroup:"ec-button-group",calendar:"ec",content:"ec-content",day:"ec-day",dayHead:"ec-day-head",days:"ec-days",disabled:"ec-disabled",event:"ec-event",eventBody:"ec-event-body",eventTime:"ec-event-time",eventTitle:"ec-event-title",events:"ec-events",extra:"ec-extra",handle:"ec-handle",header:"ec-header",hiddenScroll:"ec-hidden-scroll",highlight:"ec-highlight",icon:"ec-icon",line:"ec-line",lines:"ec-lines",minor:"ec-minor",nowIndicator:"ec-now-indicator",otherMonth:"ec-other-month",resource:"ec-resource",sidebar:"ec-sidebar",sidebarTitle:"ec-sidebar-title",today:"ec-today",time:"ec-time",title:"ec-title",toolbar:"ec-toolbar",view:"",weekdays:["ec-sun","ec-mon","ec-tue","ec-wed","ec-thu","ec-fri","ec-sat"],withScroll:"ec-with-scroll"},titleFormat:{year:"numeric",month:"short",day:"numeric"},validRange:void 0,view:void 0,viewDidMount:void 0,views:{}};for(let r of e)(n=r.createOptions)==null||n.call(r,t);return t}function fa(e){var n;let t={date:r=>Ve(ut(r)),duration:Pe,events:ln,eventSources:Ki,hiddenDays:r=>[...new Set(r)],highlightedDates:r=>r.map(a=>Ve(ut(a))),resources:ia,scrollTime:Pe,slotDuration:Pe,slotLabelInterval:r=>r!==void 0?Pe(r):void 0,slotMaxTime:Pe,slotMinTime:Pe,validRange:ra};for(let r of e)(n=r.createParsers)==null||n.call(r,t);return t}function va(e,t){let n=[];for(let r of _t(e))e[r]!==t[r]&&n.push([r,e[r]]);return n}function ha(e){return qe(e.view,t=>t==null?void 0:t.startsWith("dayGrid"))}function ma(e){return qe([e._currentRange,e.firstDay,e.slotMaxTime,e._dayGrid],([t,n,r,a])=>{let l=B(t.start),s=B(t.end);if(a)Rr(l,n),Ii(s,n);else if(r.days||r.seconds>Ln){se(At(s),r);let d=At(B(s));d<l&&(l=d)}return{start:l,end:s}})}function ga(e){return qe([e.date,e.duration,e.firstDay],([t,n,r])=>{let a=B(t),l;return n.months?a.setUTCDate(1):n.inWeeks&&Rr(a,r),l=se(B(a),n),{start:a,end:l}})}function _a(e){return qe([e._activeRange,e.hiddenDays],([t,n])=>{let r=[],a=Ve(B(t.start)),l=Ve(B(t.end));for(;a<l;)n.includes(a.getUTCDay())||r.push(B(a)),Dt(a);return!r.length&&n.length&&n.length<7&&(e.date.update(s=>{for(;n.includes(s.getUTCDay());)Dt(s);return s}),r=on(e._viewDates)),r})}function ya(e){return qe([e.date,e._activeRange,e._intlTitle,e._dayGrid],([t,n,r,a])=>a?r.formatRange(t,t):r.formatRange(n.start,At(B(n.end))))}function ba(e){return qe([e.view,e._viewTitle,e._currentRange,e._activeRange],t=>qi(...t))}function wa(e){let t=We([]),n,r=0,a={};return qe([e.events,e.eventSources,e._activeRange,e._fetchedRange,e.lazyFetching,e.loading],(l,s)=>Pr(()=>{let[d,u,v,c,g,f]=l;if(!u.length){s(d);return}if(!c.start||c.start>v.start||c.end<v.end||!g){n&&n.abort(),n=new AbortController,de(f)&&!r&&f(!0);let _=()=>{--r===0&&de(f)&&f(!1)},y=[],w=T=>_(),h=T=>{y=y.concat(ln(T)),s(y),_()},m=dt(v.start),x=dt(v.end);for(let T of u){if(de(T.events)){let E=T.events({start:Ue(v.start),end:Ue(v.end),startStr:m,endStr:x},h,w);E!==void 0&&Promise.resolve(E).then(h,w)}else{let E=de(T.extraParams)?T.extraParams():Lt({},T.extraParams);E.start=m,E.end=x,E=new URLSearchParams(E);let A=T.url,$={},S;["GET","HEAD"].includes(T.method)?A+=(A.includes("?")?"&":"?")+E:($["content-type"]="application/x-www-form-urlencoded;charset=UTF-8",S=String(E)),fetch(A,{method:T.method,headers:$,body:S,signal:n.signal,credentials:"same-origin"}).then(p=>p.json()).then(h).catch(w)}++r}c.start=v.start,c.end=v.end}},a,e._queue),[]).subscribe(t.set),t}function $a(e){let t;e._view.subscribe(r=>t=r);let n={};return qe([e._events,e.eventFilter],(r,a)=>Pr(()=>{let[l,s]=r;a(de(s)?l.filter((d,u,v)=>s({event:d,index:u,events:v,view:t})):l)},n,e._queue),[])}function Da(){return mi(ut(),e=>{let t=setInterval(()=>{e(ut())},1e3);return()=>clearInterval(t)})}function Ta(e){return qe(e._now,t=>Ve(B(t)))}class Ca{constructor(t,n){var s,d;t=t||[];let r=ua(t),a=fa(t);r=Nn(r,a),n=Nn(n,a);for(let[u,v]of Object.entries(r))this[u]=We(v);this._queue=We(new Map),this._tasks=new Map,this._auxiliary=We([]),this._dayGrid=ha(this),this._currentRange=ga(this),this._activeRange=ma(this),this._fetchedRange=We({start:void 0,end:void 0}),this._events=wa(this),this._now=Da(),this._today=Ta(this),this._intlEventTime=Dr(this.locale,this.eventTimeFormat),this._intlSlotLabel=pn(this.locale,this.slotLabelFormat),this._intlDayHeader=pn(this.locale,this.dayHeaderFormat),this._intlDayHeaderAL=pn(this.locale,this.dayHeaderAriaLabelFormat),this._intlTitle=Dr(this.locale,this.titleFormat),this._bodyEl=We(void 0),this._scrollable=We(!1),this._recheckScrollable=We(!1),this._viewTitle=ya(this),this._viewDates=_a(this),this._view=ba(this),this._viewComponent=We(void 0),this._filteredEvents=$a(this),this._interaction=We({}),this._iEvents=We([null,null]),this._iClasses=We(Un),this._iClass=We(void 0),this._set=(u,v)=>{On(u,this)&&(a[u]&&(v=a[u](v)),this[u].set(v))},this._get=u=>On(u,this)?on(this[u]):void 0;for(let u of t)(s=u.createStores)==null||s.call(u,this);n.view&&this.view.set(n.view);let l=new Set([..._t(r.views),..._t(n.views??{})]);for(let u of l){let v=Tr(r,r.views[u]??{}),c=Tr(v,n,((d=n.views)==null?void 0:d[u])??{}),g=c.component;ka(c,this);for(let f of _t(c)){let{set:_,_set:y=_,...w}=this[f];this[f]={set:["buttonText","theme"].includes(f)?h=>{if(de(h)){let m=h(v[f]);c[f]=m,_(_===y?m:h)}else c[f]=h,_(h)}:h=>{c[f]=h,_(h)},_set:y,...w}}this.view.subscribe(f=>{if(f===u){this._viewComponent.set(g),de(c.viewDidMount)&&An().then(()=>c.viewDidMount({view:Ne(on(this._view))}));for(let _ of _t(c))this[_]._set(c[_])}})}}}function Nn(e,t){let n={...e};for(let r of _t(t))r in n&&(n[r]=t[r](n[r]));if(e.views){n.views={};for(let r of _t(e.views))n.views[r]=Nn(e.views[r],t)}return n}function Tr(...e){let t={};for(let n of e){let r={};for(let a of["buttonText","theme"])de(n[a])&&(r[a]=n[a](t[a]));t={...t,...n,...r}}return t}function ka(e,t){_t(e).filter(n=>!On(n,t)||n==="view").forEach(n=>delete e[n])}function On(e,t){return t.hasOwnProperty(e)&&e[0]!=="_"}var Ea=Z("<h2></h2>"),Sa=Z("<button><i></i></button>"),xa=Z("<button><i></i></button>"),Ra=Z("<button> </button>"),pa=Z("<button></button>"),Pa=Z("<button> </button>");function Cr(e,t){ge(t,!1);const[n,r]=Re(),a=()=>o(I,"$validRange",n),l=()=>o(A,"$date",n),s=()=>o($,"$duration",n),d=()=>o(S,"$hiddenDays",n),u=()=>o(h,"$_currentRange",n),v=()=>o(x,"$_viewDates",n),c=()=>o(p,"$theme",n),g=()=>o(m,"$_viewTitle",n),f=()=>o(T,"$buttonText",n),_=()=>o(E,"$customButtons",n),y=()=>o(H,"$view",n);let w=Fe(t,"buttons",8),{_currentRange:h,_viewTitle:m,_viewDates:x,buttonText:T,customButtons:E,date:A,duration:$,hiddenDays:S,theme:p,validRange:I,view:H}=Me("state"),U=Ve(ut()),F=Yt(),q=Yt(),L=Yt(),G=Yt(!1);function be(){return i(G)}function ae(){return v().every(ue=>Zn(ue,a()))}function P(){me(A,zn(l(),s(),d()))}function X(){me(A,Hn(l(),s()))}gi(()=>(a(),l(),s(),d(),i(L),u(),An),()=>{if(!be()){if(le(G,!0),le(F,!1),le(q,!1),a().start){let ue=B(l());me(A,zn(l(),s(),d())),le(F,ae()),me(A,ue)}if(a().end){let ue=B(l());me(A,Hn(l(),s())),le(q,ae()),me(A,ue)}if(le(L,U>=u().start&&U<u().end),!i(L)&&(a().start||a().end)){let ue=B(l());me(A,B(U)),le(L,ae()),me(A,ue)}An().then(()=>le(G,!1))}}),_i(),Yn();var ee=De(),Ce=j(ee);Ye(Ce,1,w,bt,(ue,N)=>{var Ie=De(),Oe=j(Ie);{var He=we=>{var fe=Ea();Et(fe,(Ae,Xe)=>xe==null?void 0:xe(Ae,Xe),g),re(()=>V(fe,1,(c(),R(()=>c().title)))),M(we,fe)},vt=(we,fe)=>{{var Ae=pe=>{var ke=Sa(),ve=ne(ke);Q(ke),re(()=>{V(ke,1,`${c(),R(()=>c().button)??""} ec-${i(N)??""}`),ct(ke,"aria-label",(f(),R(()=>f().prev))),ct(ke,"title",(f(),R(()=>f().prev))),ke.disabled=i(F),V(ve,1,`${c(),R(()=>c().icon)??""} ec-${i(N)??""}`)}),Se("click",ke,P),M(pe,ke)},Xe=(pe,ke)=>{{var ve=K=>{var oe=xa(),k=ne(oe);Q(oe),re(()=>{V(oe,1,`${c(),R(()=>c().button)??""} ec-${i(N)??""}`),ct(oe,"aria-label",(f(),R(()=>f().next))),ct(oe,"title",(f(),R(()=>f().next))),oe.disabled=i(q),V(k,1,`${c(),R(()=>c().icon)??""} ec-${i(N)??""}`)}),Se("click",oe,X),M(K,oe)},O=(K,oe)=>{{var k=J=>{var he=Ra(),Ke=ne(he,!0);Q(he),re(()=>{V(he,1,`${c(),R(()=>c().button)??""} ec-${i(N)??""}`),he.disabled=i(L),vr(Ke,(f(),i(N),R(()=>f()[i(N)])))}),Se("click",he,()=>me(A,B(U))),M(J,he)},z=(J,he)=>{{var Ke=it=>{var $e=pa();Sr(()=>Se("click",$e,function(...ht){var at;(at=_()[i(N)].click)==null||at.apply(this,ht)})),Et($e,(ht,at)=>xe==null?void 0:xe(ht,at),()=>_()[i(N)].text),re(()=>V($e,1,`${c(),R(()=>c().button)??""} ec-${i(N)??""}${_(),i(N),c(),R(()=>_()[i(N)].active?" "+c().active:"")??""}`)),M(it,$e)},Ht=(it,$e)=>{{var ht=at=>{var Tt=Pa(),un=ne(Tt,!0);Q(Tt),re(()=>{V(Tt,1,`${c(),R(()=>c().button)??""}${y(),i(N),c(),R(()=>y()===i(N)?" "+c().active:"")??""} ec-${i(N)??""}`),vr(un,(f(),i(N),R(()=>f()[i(N)])))}),Se("click",Tt,()=>me(H,i(N))),M(at,Tt)};ce(it,at=>{i(N)!=""&&at(ht)},$e)}};ce(J,it=>{_(),i(N),R(()=>_()[i(N)])?it(Ke):it(Ht,!1)},he)}};ce(K,J=>{i(N)=="today"?J(k):J(z,!1)},oe)}};ce(pe,K=>{i(N)=="next"?K(ve):K(O,!1)},ke)}};ce(we,pe=>{i(N)=="prev"?pe(Ae):pe(Xe,!1)},fe)}};ce(Oe,we=>{i(N)=="title"?we(He):we(vt,!1)})}M(ue,Ie)}),M(e,ee),_e(),r()}var Ma=Z("<div><!></div>"),Aa=Z("<div></div>"),La=Z("<nav></nav>");function Ia(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(s,"$headerToolbar",n),l=()=>o(d,"$theme",n);let{headerToolbar:s,theme:d}=Me("state"),u=C(()=>{var g;let c={};for(let f of["start","center","end"])c[f]=((g=a()[f])==null?void 0:g.split(" ").map(_=>_.split(",")))??[];return c});var v=La();Ye(v,21,()=>_t(i(u)),bt,(c,g)=>{var f=Aa();Ye(f,21,()=>i(u)[i(g)],bt,(_,y)=>{var w=De(),h=j(w);{var m=T=>{var E=Ma(),A=ne(E);Cr(A,{get buttons(){return i(y)}}),Q(E),re(()=>V(E,1,l().buttonGroup)),M(T,E)},x=T=>{Cr(T,{get buttons(){return i(y)}})};ce(h,T=>{i(y).length>1?T(m):T(x,!1)})}M(_,w)}),Q(f),re(()=>V(f,1,`ec-${i(g)??""}`)),M(c,f)}),Q(v),re(()=>V(v,1,l().toolbar)),M(e,v),_e(),r()}function Ha(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(h,"$_activeRange",n),l=()=>o(_,"$datesSet",n),s=()=>o(S,"$_view",n),d=()=>o(m,"$_filteredEvents",n),u=()=>o(y,"$eventAllUpdated",n),v=()=>o($,"$_queue",n),c=()=>o(A,"$_recheckScrollable",n),g=()=>o(T,"$_bodyEl",n),f=()=>o(w,"$_auxiliary",n);let{datesSet:_,eventAllUpdated:y,_auxiliary:w,_activeRange:h,_filteredEvents:m,_scrollable:x,_bodyEl:T,_tasks:E,_recheckScrollable:A,_queue:$,_view:S}=Me("state");rt(()=>{a(),R(()=>{de(l())&&l()({start:Ue(a().start),end:Ue(a().end),startStr:dt(a().start),endStr:dt(a().end),view:Ne(s())})})}),rt(()=>{d(),R(()=>{de(u())&&Bi(()=>u()({view:Ne(s())}),"eau",E)})}),rt(()=>{v(),R(()=>{Wi(v())})}),rt(()=>{c(),R(()=>{g()&&me(x,Yi(g())),me(A,!1)})});var p=De(),I=j(p);Ye(I,1,f,bt,(H,U)=>{var F=De(),q=j(F);Gn(q,()=>i(U),(L,G)=>{G(L,{})}),M(H,F)}),M(e,p),_e(),r()}var za=Z("<div><!> <!></div> <!>",1);function Ua(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(A,"$_events",n),l=()=>o(T,"$_interaction",n),s=()=>o(S,"$date",n),d=()=>o(p,"$duration",n),u=()=>o(I,"$hiddenDays",n),v=()=>o(x,"$_viewComponent",n),c=()=>o(U,"$theme",n),g=()=>o($,"$_scrollable",n),f=()=>o(E,"$_iClass",n),_=()=>o(H,"$height",n),y=()=>o(F,"$view",n);let w=Fe(t,"plugins",19,()=>[]),h=Fe(t,"options",19,()=>({})),m=new Ca(w(),h());yi("state",m);let{_viewComponent:x,_interaction:T,_iClass:E,_events:A,_scrollable:$,date:S,duration:p,hiddenDays:I,height:H,theme:U,view:F}=m,q={...h()};rt(()=>{for(let[O,K]of va(h(),q))R(()=>{L(O,K)});Lt(q,h())});function L(O,K){return m._set(O,K),this}function G(O){let K=m._get(O);return K instanceof Date?Ue(K):K}function be(){return m._fetchedRange.set({start:void 0,end:void 0}),this}function ae(){return a().map(Be)}function P(O){for(let K of a())if(K.id==O)return Be(K);return null}function X(O){return O=ln([O])[0],a().push(O),me(A,a()),Be(O)}function ee(O){let K=String(O.id),oe=a().findIndex(k=>k.id===K);return oe>=0?(O=ln([O])[0],Le(A,R(a)[oe]=O,R(a)),Be(O)):null}function Ce(O){O=String(O);let K=a().findIndex(oe=>oe.id===O);return K>=0&&(a().splice(K,1),me(A,a())),this}function ue(){return Ne(on(m._view))}function N(){var O;return(O=l().action)==null||O.unselect(),this}function Ie(O,K){let oe=Pt(O,K);if(oe){let k=qt(oe)(O,K);return k.date=Ue(k.date),k}return null}function Oe(){return me(S,Hn(s(),d())),this}function He(){return me(S,zn(s(),d(),u())),this}let vt=C(v);var we=za(),fe=j(we);let Ae;var Xe=ne(fe);Ia(Xe,{});var pe=ie(Xe,2);Gn(pe,()=>i(vt),(O,K)=>{K(O,{})}),Q(fe);var ke=ie(fe,2);Ha(ke,{}),re(O=>{V(fe,1,`${c().calendar??""} ${c().view??""}${g()?" "+c().withScroll:""}${f()?" "+c()[f()]:""}`),ct(fe,"role",O),Ae=Vn(fe,"",Ae,{height:_()})},[()=>Ar(y())?"list":"table"]),M(e,we);var ve=_e({setOption:L,getOption:G,refetchEvents:be,getEvents:ae,getEventById:P,addEvent:X,updateEvent:ee,removeEventById:Ce,getView:ue,unselect:N,dateFromPoint:Ie,next:Oe,prev:He});return r(),ve}var Fa=Z("<div></div>"),Na=Z("<article><!></article>");function Oa(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(G,"$resources",n),l=()=>o($,"$eventBackgroundColor",n),s=()=>o(S,"$eventColor",n),d=()=>o(L,"$eventTextColor",n),u=()=>o(be,"$theme",n),v=()=>o(U,"$eventClassNames",n),c=()=>o(ae,"$_view",n),g=()=>o(A,"$displayEventEnd",n),f=()=>o(p,"$eventContent",n),_=()=>o(P,"$_intlEventTime",n),y=()=>o(H,"$eventDidMount",n),w=()=>o(I,"$eventClick",n),h=()=>o(F,"$eventMouseEnter",n),m=()=>o(q,"$eventMouseLeave",n);let x=Fe(t,"el",15),T=Fe(t,"classes",3,Un),E=Fe(t,"styles",3,Un),{displayEventEnd:A,eventBackgroundColor:$,eventColor:S,eventContent:p,eventClick:I,eventDidMount:H,eventClassNames:U,eventMouseEnter:F,eventMouseLeave:q,eventTextColor:L,resources:G,theme:be,_view:ae,_intlEventTime:P}=Me("state"),X=C(()=>t.chunk.event),ee=C(()=>t.chunk.event.display),Ce=C(()=>i(X).backgroundColor??oa(i(X),a())??l()??s()),ue=C(()=>i(X).textColor??la(i(X),a())??d()),N=C(()=>zi(E()({"background-color":i(Ce),color:i(ue)})).map(k=>`${k[0]}:${k[1]}`).concat(i(X).styles).join(";")),Ie=C(()=>T()([ft(i(ee))?u().bgEvent:u().event,...Ji(v(),i(X),c())]).join(" ")),Oe=C(()=>Zi(t.chunk,g(),f(),u(),_(),c())),He=C(()=>Bn(i(Oe),2)),vt=C(()=>i(He)[0]),we=C(()=>i(He)[1]);dn(()=>{de(y())&&y()({event:Be(i(X)),timeText:i(vt),el:x(),view:Ne(c())})});function fe(k,z){return!Xt(z)&&de(k)?J=>k({event:Be(i(X)),el:x(),jsEvent:J,view:Ne(c())}):void 0}let Ae=C(()=>!ft(i(ee))&&fe(w(),i(ee))||void 0),Xe=C(()=>i(Ae)&&Li(i(Ae))),pe=C(()=>fe(h(),i(ee))),ke=C(()=>fe(m(),i(ee)));var ve=Na();ve.__click=function(...k){var z;(z=i(Ae))==null||z.apply(this,k)},ve.__keydown=function(...k){var z;(z=i(Xe))==null||z.apply(this,k)},ve.__pointerdown=function(...k){var z;(z=t.onpointerdown)==null||z.apply(this,k)};{const k=z=>{var J=Fa();Et(J,(he,Ke)=>xe==null?void 0:xe(he,Ke),()=>i(we)),re(()=>V(J,1,mr(u().eventBody))),M(z,J)};var O=ne(ve);{var K=z=>{var J=De(),he=j(J);Mt(he,()=>t.body,()=>k,()=>i(Ce),()=>i(ue)),M(z,J)},oe=z=>{k(z)};ce(O,z=>{t.body?z(K):z(oe,!1)})}Q(ve),yt(ve,z=>x(z),()=>x())}re(()=>{V(ve,1,mr(i(Ie))),Vn(ve,i(N)),ct(ve,"role",i(Ae)?"button":void 0),ct(ve,"tabindex",i(Ae)?0:void 0)}),Se("mouseenter",ve,function(...k){var z;(z=i(pe))==null||z.apply(this,k)}),Se("mouseleave",ve,function(...k){var z;(z=i(ke))==null||z.apply(this,k)}),M(e,ve),_e(),r()}et(["click","keydown","pointerdown"]);function Or(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(u,"$_iClasses",n),l=()=>o(d,"$_interaction",n);let s=Fe(t,"el",15),{_interaction:d,_iClasses:u}=Me("state"),v=C(()=>t.chunk.event),c=C(()=>t.chunk.event.display),g=C(()=>w=>a()(w,i(v)));function f(w){var h,m;return(h=l().action)!=null&&h.draggable(w)?x=>{var T,E;return l().action.drag(w,x,(T=t.forceDate)==null?void 0:T.call(t),(E=t.forceMargin)==null?void 0:E.call(t))}:(m=l().action)==null?void 0:m.noAction}let _=C(()=>!ft(i(c))&&!Xt(i(c))?f(i(v)):void 0),y=C(()=>l().resizer);Oa(e,{get chunk(){return t.chunk},get classes(){return i(g)},get styles(){return t.styles},get onpointerdown(){return i(_)},get el(){return s()},set el(h){s(h)},body:(h,m=bi)=>{var x=De(),T=j(x);{var E=$=>{var S=De(),p=j(S);Gn(p,()=>i(y),(I,H)=>{H(I,{get chunk(){return t.chunk},get axis(){return t.axis},get forceDate(){return t.forceDate},get forceMargin(){return t.forceMargin},children:(U,F)=>{var q=De(),L=j(q);Mt(L,m),M(U,q)},$$slots:{default:!0}})}),M($,S)},A=$=>{var S=De(),p=j(S);Mt(p,m),M($,S)};ce(T,$=>{i(y)?$(E):$(A,!1)})}M(h,x)},$$slots:{body:!0}}),_e(),r()}et(["pointerdown","click","keydown"]);et(["pointerdown","click","keydown"]);function Wr(e,t,n){return e.startEditable??t??e.editable??n}function Wa(e,t,n){return e.durationEditable??t??e.editable??n}let Pn=!1;function Ba(e){Pn||(Pn=!0,window.requestAnimationFrame(()=>{e(),Pn=!1}))}function kr(e,t,n){return gt(t,$t(n,e))}function Ga(e,t){ge(t,!1);const[n,r]=Re(),a=()=>o(ve,"$eventStartEditable",n),l=()=>o(ke,"$editable",n),s=()=>o(Gr,"$slotDuration",n),d=()=>o($e,"$selectable",n),u=()=>o(Jr,"$view",n),v=()=>o(we,"$_bodyEl",n),c=()=>o(fe,"$datesAboveResources",n),g=()=>o(un,"$selectLongPressDelay",n),f=()=>o(z,"$eventLongPressDelay",n),_=()=>o(Ht,"$longPressDelay",n),y=()=>o(Br,"$selectMinDistance",n),w=()=>o(O,"$eventDragMinDistance",n),h=()=>o(N,"$_iEvents",n),m=()=>o(J,"$eventResizeStart",n),x=()=>o(K,"$eventDragStart",n),T=()=>o(it,"$resizeConstraint",n),E=()=>o(Tt,"$selectConstraint",n),A=()=>o(Xe,"$dragConstraint",n),$=()=>o(pe,"$dragScroll",n),S=()=>o(Yr,"$slotHeight",n),p=()=>o(Vr,"$slotWidth",n),I=()=>o(Xr,"$unselectAuto",n),H=()=>o(Kr,"$unselectCancel",n),U=()=>o(ht,"$selectFn",n),F=()=>o(he,"$eventResizeStop",n),q=()=>o(oe,"$eventDragStop",n),L=()=>o(He,"$_view",n),G=()=>o(Ke,"$eventResize",n),be=()=>o(k,"$eventDrop",n),ae=()=>o(Ae,"$dateClick",n),P=()=>o(Zr,"$validRange",n),X=()=>o(vt,"$_dayGrid",n),ee=()=>o(Oe,"$_events",n),Ce=()=>o(at,"$selectBackgroundColor",n),ue=()=>o(qr,"$unselectFn",n);let{_iEvents:N,_iClass:Ie,_events:Oe,_view:He,_dayGrid:vt,_bodyEl:we,datesAboveResources:fe,dateClick:Ae,dragConstraint:Xe,dragScroll:pe,editable:ke,eventStartEditable:ve,eventDragMinDistance:O,eventDragStart:K,eventDragStop:oe,eventDrop:k,eventLongPressDelay:z,eventResizeStart:J,eventResizeStop:he,eventResize:Ke,longPressDelay:Ht,resizeConstraint:it,selectable:$e,select:ht,selectBackgroundColor:at,selectConstraint:Tt,selectLongPressDelay:un,selectMinDistance:Br,slotDuration:Gr,slotHeight:Yr,slotWidth:Vr,unselect:qr,unselectAuto:Xr,unselectCancel:Kr,validRange:Zr,view:Jr}=Me("state");const Jn=1,Qn=2,jn=3,er=4,fn=5,Kt=6;let Ee,St,W,vn,tt,hn,Ze,xt,mn,gn,ze,Te,ot,Je,zt,Zt,lt,mt,Jt,ye,Qt,jt,_n,Ut=Yt(),Ft,Nt,Rt;function tr(b){return Wr(b,a(),l())}function nr(b,D,te,Y){Ee||(Ee=$n(D)?Jn:Kt,kt()&&(W=b,yn(D),te&&(tt=te),Y&&(Nt=Y),Jt="dragging",pt(D)))}function rr(b,D,te,Y,nt,Gt,Tn){Ee||(Ee=$n(D)?te?jn:Qn:Kt,kt()&&(W=b,yn(D),nt&&(tt=nt),Gt&&(Nt=Gt),Jt=Y==="x"?"resizingX":"resizingY",en()?(ye=B(W.end),mt?(In(ye,W.start),ye>=W.end&&At(ye)):(an(ye,s()),ye<W.start&&(ye=W.start),tt=W.start)):(ye=B(W.start),mt?(In(ye,W.end),ye<=W.start&&!Tn&&Dt(ye)):(se(ye,s()),ye>W.end&&(ye=W.end),tt=W.end,Tn||(tt=an(B(tt),s()))),Tn&&!mt&&(Rt=s())),pt(D)))}function ir(b){Ee||(Ee=$n(b)?d()&&!Ar(u())?er:fn:Kt,kt()&&(yn(b),Jt="selecting",Qt=mt?Pe({day:1}):s(),W={allDay:mt,start:tt,end:se(B(tt),Qt),resourceIds:Ze?[Ze.id]:[]},pt(b)))}function ar(){Ee||(Ee=Kt)}function yn(b){window.getSelection().removeAllRanges(),mn=ze=b.clientX,gn=Te=b.clientY;let D=Pt(ze,Te);({allDay:mt,date:tt,resource:Ze}=qt(D)(ze,Te)),En(u())?ot=zt=v():(ot=Fn(D,Ze?4:3),zt=Fn(D,Ze&&(ri()||c())?2:1)),lr(),b.pointerType!=="mouse"&&le(Ut,setTimeout(()=>{Ee&&(St=!0,pt(b))},(Ct()?g():f())??_()))}function pt(b){if(St||b&&b.pointerType==="mouse"&&ni()>=(Ct()?y():w())){St=!0,Bt(b),me(Ie,Jt),h()[0]||(Ct()?ti():ei(b,Wt()?m():x()));let D=wn(jr());if(D){let te;if({allDay:te,date:hn,resource:xt}=D,te===mt){let Y=Ot({},h()[0]),nt=T();lt=Pe((hn-tt)/1e3),en()?(Y.start=se(B(W.start),lt),Y.start>ye&&(Y.start=ye,lt=Pe((ye-W.start)/1e3))):(Y.end=se(B(W.end),lt),Rt&&se(Y.end,Rt),Wt()?Y.end<ye&&(Y.end=ye,lt=Pe((ye-W.end)/1e3)):Ct()?(Y.end<W.end?(Y.start=an(Y.end,Qt),Y.end=W.end):Y.start=W.start,nt=E()):(Y.start=se(B(W.start),lt),Ze&&(Y.resourceIds=W.resourceIds.filter(Gt=>Gt!==Ze.id),Y.resourceIds.push(xt.id)),nt=A()));do{if(nt!==void 0&&(Y=Ot(xn(W),Y),nt(Ct()?dr(Y,b):ur(Y,W,b))===!1)){Le(N,R(h)[0]=Ot(h()[0],W),R(h));break}Le(N,R(h)[0]=Ot(h()[0],Y),R(h))}while(!1)}}}if($()){let D=S()*2,te=p();Ba(()=>{ot&&(Te<D&&window.scrollBy(0,gt(-10,(Te-D)/3)),Te<Je.top+D&&(ot.scrollTop+=gt(-10,(Te-Je.top-D)/3)),Te>window.innerHeight-D&&window.scrollBy(0,$t(10,(Te-window.innerHeight+D)/3)),Te>Je.bottom-D&&(ot.scrollTop+=$t(10,(Te-Je.bottom+D)/3)),En(u())&&(ze<Je.left+te&&(ot.scrollLeft+=gt(-10,(ze-Je.left-te)/3)),ze>Je.right-te&&(ot.scrollLeft+=$t(10,(ze-Je.right+te)/3))))})}}function bn(){kt()&&(lr(),pt())}function Qr(b){kt()&&b.isPrimary&&(ze=b.clientX,Te=b.clientY,pt(b))}function or(b){if(jt&&I()&&!(H()&&b.target.closest(H()))&&Bt(b),Ee&&b.isPrimary){if(St)if(Ct()){if(jt=!0,de(U())){let D=dr(h()[0],b);U()(D)}}else{W.display=vn;let D=Wt()?F():q();de(D)&&D({event:Be(W),jsEvent:b,view:Ne(L())});let te=xn(W);if(cr(W,h()[0]),sr(),D=Wt()?G():be(),de(D)){let Y=W,nt=ur(W,te,b);D(Lt(nt,{revert(){cr(Y,te)}}))}}else if((ii()||Ct())&&de(ae())&&!_n){ze=b.clientX,Te=b.clientY;let D=Pt(ze,Te);if(D){let{allDay:te,date:Y,resource:nt}=qt(D)(ze,Te);ae()({allDay:te,date:Ue(Y),dateStr:dt(Y),dayEl:D,jsEvent:b,view:Ne(L()),resource:nt})}}St=!1,Ee=mn=gn=ze=Te=W=vn=tt=hn=Ze=xt=lt=Rt=mt=me(Ie,ye=Qt=Nt=void 0),ot=zt=Je=Zt=void 0,i(Ut)&&(clearTimeout(i(Ut)),le(Ut,void 0))}_n=!1}function jr(){return Pt(kr(ze,Ft[0],Ft[1]),kr(Te,Ft[2],Ft[3]))}function wn(b){if(b){let D=qt(b)(ze,Te);if(D.disabled){if(!P().end||D.date<P().end)return wn(b.nextElementSibling);if(!P().start||D.date>P().start)return wn(b.previousElementSibling)}else return D}return null}function lr(){Je=It(ot),Zt=It(zt),Ft=[gt(0,Zt.left+(En(u())?1:X()?0:8)),$t(document.documentElement.clientWidth,Zt.left+zt.clientWidth)-2,gt(0,Je.top),$t(document.documentElement.clientHeight,Je.top+ot.clientHeight)-2]}function ei(b,D){de(D)&&D({event:Be(W),jsEvent:b,view:Ne(L())}),vn=W.display,W.display="preview",Le(N,R(h)[0]=xn(W),R(h)),Nt!==void 0&&Le(N,R(h)[0]._margin=Nt,R(h)),Rt&&se(h()[0].end,Rt),W.display="ghost",me(Oe,ee())}function ti(){Le(N,R(h)[0]={id:"{select}",allDay:W.allDay,start:W.start,title:"",display:"preview",extendedProps:{},backgroundColor:Ce(),resourceIds:W.resourceIds,classNames:[],styles:[]},R(h))}function sr(){Le(N,R(h)[0]=null,R(h))}function Ot(b,D){return b.start=D.start,b.end=D.end,b.resourceIds=D.resourceIds,b}function cr(b,D){Ot(b,D),me(Oe,ee())}function dr(b,D){let{start:te,end:Y}=Be(b);return{start:te,end:Y,startStr:dt(b.start),endStr:dt(b.end),allDay:mt,view:Ne(L()),resource:Ze,jsEvent:D}}function ur(b,D,te){let Y;return Wt()?Y=en()?{startDelta:lt,endDelta:Pe(0)}:{startDelta:Pe(0),endDelta:lt}:Y={delta:lt,oldResource:Ze!==xt?Ze:void 0,newResource:Ze!==xt?xt:void 0},Lt(Y,{event:Be(b),oldEvent:Be(D),view:Ne(L()),jsEvent:te}),Y}function ni(){return Math.sqrt(Math.pow(ze-mn,2)+Math.pow(Te-gn,2))}function ri(){return Ee===Jn}function Wt(){return Ee===Qn||en()}function en(){return Ee===jn}function ii(){return Ee===fn}function Ct(){return Ee===er}function kt(){return Ee&&Ee<fn}function $n(b){return b.isPrimary&&(b.pointerType!=="mouse"||b.buttons&1)}function Bt(b){jt&&(jt=!1,sr(),de(ue())&&ue()({jsEvent:b,view:Ne(L())}))}function fr(){_n=!0}He.subscribe(Bt);function ai(b){if(kt()){let D=b.target,te=[],Y=()=>pr(te);te.push(Vt(window,"touchmove",Oi,{passive:!1})),te.push(Vt(D,"touchmove",Dn(()=>St))),te.push(Vt(D,"touchend",Y)),te.push(Vt(D,"touchcancel",Y))}}function Dn(b){return D=>{b()&&D.preventDefault()}}Yn(),Se("pointermove",st,Qr),Se("pointerup",st,or),Se("pointercancel",st,or),Se("scroll",st,bn);var oi=C(()=>Dn(kt));Se("selectstart",st,function(...b){var D;(D=i(oi))==null||D.apply(this,b)});var li=C(()=>Dn(()=>i(Ut)));Se("contextmenu",st,function(...b){var D;(D=i(li))==null||D.apply(this,b)}),Se("touchstart",st,ai,void 0,!0),wt(t,"draggable",tr),wt(t,"drag",nr),wt(t,"resize",rr),wt(t,"select",ir),wt(t,"noAction",ar),wt(t,"handleScroll",bn),wt(t,"unselect",Bt),wt(t,"noClick",fr);var si=_e({draggable:tr,drag:nr,resize:rr,select:ir,noAction:ar,handleScroll:bn,unselect:Bt,noClick:fr});return r(),si}function Ya(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(s,"$_iEvents",n),l=()=>o(d,"$slotDuration",n);let{_iEvents:s,slotDuration:d}=Me("state"),u=0,v=0;rt(()=>{a()[0]&&y()});function c(){let m=Pt(u,v);if(m){let{allDay:x,date:T,resource:E,disabled:A}=qt(m)(u,v);if(!A){let $=x?2:1;a()[$]||_($),Le(s,R(a)[$].start=T,R(a)),Le(s,R(a)[$].end=se(B(T),l()),R(a)),Le(s,R(a)[$].resourceIds=E?[E.id]:[],R(a));return}}y()}function g(){c()}function f(m){w(m)&&(u=m.clientX,v=m.clientY,c())}function _(m){Le(s,R(a)[m]={id:"{pointer}",title:"",display:"pointer",extendedProps:{},backgroundColor:"transparent",classNames:[],styles:[]},R(a))}function y(){a()[1]&&Le(s,R(a)[1]=null,R(a)),a()[2]&&Le(s,R(a)[2]=null,R(a))}function w(m){return m.isPrimary&&m.pointerType==="mouse"}Se("pointermove",st,f),Se("scroll",st,g);var h=_e({handleScroll:g});return r(),h}var Va=Z("<div></div>"),qa=Z("<div></div>"),Xa=Z("<!> <!> <!>",1);function Ka(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(f,"$eventDurationEditable",n),l=()=>o(y,"$editable",n),s=()=>o(w,"$_interaction",n),d=()=>o(_,"$eventResizableFromStart",n),u=()=>o(g,"$theme",n);let v=Fe(t,"forceDate",3,void 0),c=Fe(t,"forceMargin",3,void 0),{theme:g,eventDurationEditable:f,eventResizableFromStart:_,editable:y,_interaction:w}=Me("state"),h=C(()=>t.chunk.event),m=C(()=>t.chunk.event.display),x=C(()=>!ft(i(m))&&!Xt(i(m))&&Wa(i(h),a(),l()));function T(H){return U=>{var F,q;return s().action.resize(i(h),U,H,t.axis,(F=v())==null?void 0:F(),(q=c())==null?void 0:q(),t.chunk.zeroDuration)}}var E=Xa(),A=j(E);{var $=H=>{var U=Va(),F=C(()=>T(!0));U.__pointerdown=function(...q){var L;(L=i(F))==null||L.apply(this,q)},re(()=>V(U,1,`${u().resizer??""} ${u().start??""}`)),M(H,U)};ce(A,H=>{i(x)&&d()&&H($)})}var S=ie(A,2);Mt(S,()=>t.children);var p=ie(S,2);{var I=H=>{var U=qa(),F=C(()=>T(!1));U.__pointerdown=function(...q){var L;(L=i(F))==null||L.apply(this,q)},re(()=>V(U,1,u().resizer)),M(H,U)};ce(p,H=>{i(x)&&H(I)})}M(e,E),_e(),r()}et(["pointerdown"]);var Za=Z("<!> <!>",1);function Ja(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(w,"$_interaction",n),l=()=>o(c,"$theme",n),s=()=>o(f,"$eventStartEditable",n),d=()=>o(g,"$editable",n),u=()=>o(y,"$_bodyEl",n),v=()=>o(_,"$pointer",n);let{theme:c,editable:g,eventStartEditable:f,pointer:_,_bodyEl:y,_interaction:w,_iClasses:h}=Me("state");Le(w,R(a).resizer=Ka,R(a)),rt(()=>{l(),s(),d(),me(h,($,S)=>{let{display:p}=S;return[...$,Xt(p)?[l()[p]]:!ft(p)&&Wr(S,s(),d())?[l().draggable]:[]]})}),rt(()=>{if(u())return Vt(u(),"scroll",m)});function m(){var $;for(let S of Object.values(a()))($=S==null?void 0:S.handleScroll)==null||$.call(S)}var x=Za(),T=j(x);yt(Ga(T,{}),$=>Le(w,R(a).action=$,R(a)),()=>{var $;return($=a())==null?void 0:$.action});var E=ie(T,2);{var A=$=>{yt(Ya($,{}),S=>Le(w,R(a).pointer=S,R(a)),()=>{var S;return(S=a())==null?void 0:S.pointer})};ce(E,$=>{v()&&$(A)})}M(e,x),_e(),r()}const Qa={createOptions(e){e.dateClick=void 0,e.dragConstraint=void 0,e.dragScroll=!0,e.editable=!1,e.eventDragMinDistance=5,e.eventDragStart=void 0,e.eventDragStop=void 0,e.eventDrop=void 0,e.eventDurationEditable=!0,e.eventLongPressDelay=void 0,e.eventResizableFromStart=!1,e.eventResizeStart=void 0,e.eventResizeStop=void 0,e.eventResize=void 0,e.eventStartEditable=!0,e.longPressDelay=1e3,e.pointer=!1,e.resizeConstraint=void 0,e.select=void 0,e.selectBackgroundColor=void 0,e.selectConstraint=void 0,e.selectLongPressDelay=void 0,e.selectMinDistance=5,e.unselect=void 0,e.unselectAuto=!0,e.unselectCancel="",e.theme.draggable="ec-draggable",e.theme.ghost="ec-ghost",e.theme.preview="ec-preview",e.theme.pointer="ec-pointer",e.theme.resizer="ec-resizer",e.theme.start="ec-start",e.theme.dragging="ec-dragging",e.theme.resizingY="ec-resizing-y",e.theme.resizingX="ec-resizing-x",e.theme.selecting="ec-selecting"},createStores(e){e._auxiliary.update(t=>[...t,Ja])}};et(["pointerdown"]);et(["click"]);function ja(e){return qe([e.slotDuration,e.slotLabelInterval,e._slotTimeLimits,e._intlSlotLabel],t=>ca(Ve(ut()),...t))}function eo(e){return qe([e.slotMinTime,e.slotMaxTime,e.flexibleSlotTimeLimits,e._viewDates,e._filteredEvents],t=>da(...t))}function to(e){if(!e.length)return;Lr(e);let t={columns:[],end:e[0].end};for(let n of e){let r=0;if(n.start<t.end){for(;r<t.columns.length&&!(t.columns[r].at(-1).end<=n.start);++r);n.end>t.end&&(t.end=n.end)}else t={columns:[],end:n.end};t.columns.length<r+1&&t.columns.push([]),t.columns[r].push(n),n.group=t,n.column=r}}function no(e){let t="all-day",n;return e?(n=de(e)?e({text:t}):e,typeof n=="string"&&(n={html:n})):n={html:t},n}var ro=Z("<time></time>"),io=Z('<div><div></div> <!></div> <div role="row"><div><!></div> <!></div>',1);function Wn(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(u,"$allDayContent",n),l=()=>o(v,"$slotLabelInterval",n),s=()=>o(c,"$theme",n),d=()=>o(g,"$_times",n);let{allDayContent:u,slotLabelInterval:v,theme:c,_times:g}=Me("state"),f=C(()=>no(a())),_=C(()=>l()&&l().seconds<=0);var y=io(),w=j(y),h=ne(w);Et(h,(p,I)=>xe==null?void 0:xe(p,I),()=>i(f));var m=ie(h,2);Ye(m,1,d,bt,(p,I,H)=>{var U=ro();Et(U,(F,q)=>xe==null?void 0:xe(F,q),()=>i(I)[1]),re(()=>{V(U,1,`${s().time??""}${(H||i(_))&&i(I)[2]?"":" "+s().minor}`),ct(U,"datetime",i(I)[0])}),M(p,U)}),Q(w);var x=ie(w,2),T=ne(x),E=ne(T);{var A=p=>{var I=De(),H=j(I);Mt(H,()=>t.lines),M(p,I)};ce(E,p=>{t.lines&&p(A)})}Q(T);var $=ie(T,2);{var S=p=>{var I=De(),H=j(I);Mt(H,()=>t.children),M(p,I)};ce($,p=>{t.children&&p(S)})}Q(x),re(()=>{V(w,1,s().sidebar),V(h,1,s().sidebarTitle),V(x,1,s().days),V(T,1,s().lines)}),M(e,y),_e(),r()}var ao=Z("<div></div>"),oo=Z("<div><div><!></div></div>");function lo(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(f,"$_viewDates",n),l=()=>o(h,"$scrollTime",n),s=()=>o(_,"$_slotTimeLimits",n),d=()=>o(m,"$slotDuration",n),u=()=>o(x,"$slotHeight",n),v=()=>o(T,"$theme",n),c=()=>o(y,"$_times",n);let{_bodyEl:g,_viewDates:f,_slotTimeLimits:_,_times:y,_recheckScrollable:w,scrollTime:h,slotDuration:m,slotHeight:x,theme:T}=Me("state"),E=Ge(void 0);rt(()=>{me(g,i(E))}),rt(()=>{a(),l(),R(A)});function A(){i(E).scrollTop=((l().seconds-s().min.seconds)/d().seconds-.5)*u()}var $=oo(),S=ne($),p=ne(S);Wn(p,{get children(){return t.children},lines:H=>{var U=De(),F=j(U);Ye(F,1,c,bt,(q,L)=>{var G=ao();re(()=>V(G,1,`${v().line??""}${i(L)[2]?"":" "+v().minor}`)),M(q,G)}),M(H,U)},$$slots:{lines:!0}}),Q(S),Q($),yt($,I=>le(E,I),()=>i(E)),Et($,(I,H)=>kn==null?void 0:kn(I,H),()=>()=>me(w,!0)),re(()=>{V($,1,v().body),V(S,1,v().content)}),M(e,$),_e(),r()}function rn(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(v,"$slotDuration",n),l=()=>o(g,"$_slotTimeLimits",n),s=()=>o(c,"$slotHeight",n),d=()=>o(u,"$slotEventOverlap",n);let{slotEventOverlap:u,slotDuration:v,slotHeight:c,_slotTimeLimits:g}=Me("state"),f=C(()=>t.chunk.event.display),_=C(()=>y=>{let w=a().seconds,h=l().min.seconds,m=(t.chunk.start-t.date)/1e3,x=(t.chunk.end-t.date)/1e3,T=(m-h)/w*s(),E=(x-m)/w*s()||s(),A=(l().max.seconds-m)/w*s();return y.top=`${T}px`,y["min-height"]=`${E}px`,y.height=`${E}px`,y["max-height"]=`${A}px`,(!ft(i(f))&&!Xt(i(f))||zr(i(f)))&&(y["z-index"]=`${t.chunk.column+1}`,y.left=`${100/t.chunk.group.columns.length*t.chunk.column}%`,y.width=`${100/t.chunk.group.columns.length*(d()?.5*(1+t.chunk.group.columns.length-t.chunk.column):1)}%`),y});Or(e,{get chunk(){return t.chunk},get styles(){return i(_)},axis:"y"}),_e(),r()}var so=Z("<div></div>");function co(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(_,"$_now",n),l=()=>o(y,"$_today",n),s=()=>o(c,"$slotDuration",n),d=()=>o(w,"$_slotTimeLimits",n),u=()=>o(g,"$slotHeight",n),v=()=>o(f,"$theme",n);let{slotDuration:c,slotHeight:g,theme:f,_now:_,_today:y,_slotTimeLimits:w}=Me("state"),h=C(()=>(a()-l())/1e3),m=C(()=>{let T=s().seconds,E=d().min.seconds;return(i(h)-E)/T*u()});var x=so();re(()=>{V(x,1,v().nowIndicator),Vn(x,`top:${i(m)??""}px`)}),M(e,x),_e(),r()}var uo=Z("<!> <!> <!>",1),fo=Z('<div role="cell"><div><!></div> <div><!></div> <div><!></div></div>');function vo(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(q,"$_today",n),l=()=>o(E,"$highlightedDates",n),s=()=>o(U,"$validRange",n),d=()=>o(L,"$_slotTimeLimits",n),u=()=>o(p,"$filterEventsWithResources",n),v=()=>o(H,"$resources",n),c=()=>o(x,"$_filteredEvents",n),g=()=>o(T,"$_iEvents",n),f=()=>o($,"$slotDuration",n),_=()=>o(S,"$slotHeight",n),y=()=>o(I,"$theme",n),w=()=>o(F,"$_interaction",n),h=()=>o(A,"$nowIndicator",n);let m=Fe(t,"resource",3,void 0),{_filteredEvents:x,_iEvents:T,highlightedDates:E,nowIndicator:A,slotDuration:$,slotHeight:S,filterEventsWithResources:p,theme:I,resources:H,validRange:U,_interaction:F,_today:q,_slotTimeLimits:L}=Me("state"),G=Ge(void 0),be=C(()=>je(t.date,a())),ae=C(()=>l().some(k=>je(k,t.date))),P=C(()=>Zn(t.date,s())),X=C(()=>se(B(t.date),d().min)),ee=C(()=>se(B(t.date),d().max)),Ce=C(()=>m()??(u()?v():void 0)),ue=C(()=>{if(i(P))return[[],[]];let k=[],z=[];for(let J of c())if((!J.allDay||ft(J.display))&&cn(J,i(X),i(ee),i(Ce))){let he=sn(J,i(X),i(ee));switch(J.display){case"background":z.push(he);break;default:k.push(he)}}return to(k),[k,z]}),N=C(()=>Bn(i(ue),2)),Ie=C(()=>i(N)[0]),Oe=C(()=>i(N)[1]),He=C(()=>i(P)?[]:g().map(k=>k&&cn(k,i(X),i(ee),m())?sn(k,i(X),i(ee)):null));function vt(k,z){return z-=It(i(G)).top,{allDay:!1,date:se(se(B(t.date),d().min),f(),Ui(z/_())),resource:m(),dayEl:i(G),disabled:i(P)}}dn(()=>{Kn(i(G),vt)});var we=fo();we.__pointerdown=function(...k){var z,J;(J=i(P)||(z=w().action)==null?void 0:z.select)==null||J.apply(this,k)};var fe=ne(we),Ae=ne(fe);{var Xe=k=>{var z=De(),J=j(z);Ye(J,17,()=>i(Oe),he=>he.event,(he,Ke)=>{rn(he,{get date(){return t.date},get chunk(){return i(Ke)}})}),M(k,z)};ce(Ae,k=>{i(P)||k(Xe)})}Q(fe);var pe=ie(fe,2),ke=ne(pe);{var ve=k=>{var z=uo(),J=j(z);{var he=$e=>{rn($e,{get date(){return t.date},get chunk(){return i(He)[1]}})};ce(J,$e=>{i(He)[1]&&$e(he)})}var Ke=ie(J,2);Ye(Ke,17,()=>i(Ie),$e=>$e.event,($e,ht)=>{rn($e,{get date(){return t.date},get chunk(){return i(ht)}})});var Ht=ie(Ke,2);{var it=$e=>{rn($e,{get date(){return t.date},get chunk(){return i(He)[0]}})};ce(Ht,$e=>{i(He)[0]&&!i(He)[0].event.allDay&&$e(it)})}M(k,z)};ce(ke,k=>{i(P)||k(ve)})}Q(pe);var O=ie(pe,2),K=ne(O);{var oe=k=>{co(k,{})};ce(K,k=>{h()&&i(be)&&!i(P)&&k(oe)})}Q(O),Q(we),yt(we,k=>le(G,k),()=>i(G)),re(k=>{V(we,1,`${y().day??""} ${k??""}${i(be)?" "+y().today:""}${i(ae)?" "+y().highlight:""}${i(P)?" "+y().disabled:""}`),V(fe,1,y().bgEvents),V(pe,1,y().events),V(O,1,y().extra)},[()=>{var k;return(k=y().weekdays)==null?void 0:k[t.date.getUTCDay()]}]),M(e,we),_e(),r()}et(["pointerdown"]);function Mn(e,t){ge(t,!0);let n=Fe(t,"longChunks",19,()=>({})),r=Ge(void 0),a=Ge(1),l=C(()=>t.chunk.event),s=C(()=>t.chunk.event.display),d=C(()=>v=>(ft(i(s))?v.width=`calc(${t.chunk.days*100}% + ${t.chunk.days-1}px)`:(v.width=`calc(${t.chunk.days*100}% + ${(t.chunk.days-1)*7}px)`,v["margin-top"]=`${i(l)._margin??i(a)}px`),v));function u(){i(r)&&le(a,Qi(t.chunk,n(),Vi(i(r))),!0)}return Or(e,{get chunk(){return t.chunk},get styles(){return i(d)},axis:"x",forceMargin:()=>It(i(r)).top-It(Fn(i(r),1)).top,get el(){return i(r)},set el(v){le(r,v,!0)}}),_e({reposition:u})}var ho=Z("<div><!></div>"),mo=Z('<div role="cell"><div><!></div> <!> <div><!></div></div>');function go(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(w,"$_today",n),l=()=>o(g,"$highlightedDates",n),s=()=>o(_,"$validRange",n),d=()=>o(f,"$theme",n),u=()=>o(y,"$_interaction",n);let v=Fe(t,"iChunks",19,()=>[]),c=Fe(t,"resource",3,void 0),{highlightedDates:g,theme:f,validRange:_,_interaction:y,_today:w}=Me("state"),h=Ge(void 0),m=[],x=C(()=>t.chunks.filter(P=>je(P.date,t.date))),T=C(()=>t.bgChunks.filter(P=>je(P.date,t.date))),E=C(()=>je(t.date,a())),A=C(()=>l().some(P=>je(P,t.date))),$=C(()=>Zn(t.date,s()));dn(()=>{Kn(i(h),()=>({allDay:!0,date:t.date,resource:c(),dayEl:i(h),disabled:i($)}))});function S(){i($)||Hr(m,i(x))}var p=mo();p.__pointerdown=function(...P){var X,ee;(ee=i($)||(X=u().action)==null?void 0:X.select)==null||ee.apply(this,P)};var I=ne(p),H=ne(I);{var U=P=>{var X=De(),ee=j(X);Ye(ee,17,()=>i(T),Ce=>Ce.event,(Ce,ue)=>{Mn(Ce,{get chunk(){return i(ue)}})}),M(P,X)};ce(H,P=>{i($)||P(U)})}Q(I);var F=ie(I,2);{var q=P=>{var X=ho(),ee=ne(X);Mn(ee,{get chunk(){return v()[0]}}),Q(X),re(()=>V(X,1,`${d().events??""} ${d().preview??""}`)),M(P,X)};ce(F,P=>{v()[0]&&je(v()[0].date,t.date)&&!i($)&&P(q)})}var L=ie(F,2),G=ne(L);{var be=P=>{var X=De(),ee=j(X);Ye(ee,19,()=>i(x),Ce=>Ce.event,(Ce,ue,N)=>{yt(Mn(Ce,{get chunk(){return i(ue)},get longChunks(){return t.longChunks}}),(Ie,Oe)=>m[Oe]=Ie,Ie=>m==null?void 0:m[Ie],()=>[i(N)])}),M(P,X)};ce(G,P=>{i($)||P(be)})}Q(L),Q(p),yt(p,P=>le(h,P),()=>i(h)),re(P=>{V(p,1,`${d().day??""} ${P??""}${i(E)?" "+d().today:""}${i(A)?" "+d().highlight:""}${i($)?" "+d().disabled:""}`),V(I,1,d().bgEvents),V(L,1,d().events)},[()=>{var P;return(P=d().weekdays)==null?void 0:P[t.date.getUTCDay()]}]),M(e,p);var ae=_e({reposition:S});return r(),ae}et(["pointerdown"]);function _o(e,t){ge(t,!0);const[n,r]=Re(),a=()=>o(h,"$validRange",n),l=()=>o(w,"$filterEventsWithResources",n),s=()=>o(y,"$resources",n),d=()=>o(g,"$_filteredEvents",n),u=()=>o(_,"$hiddenDays",n),v=()=>o(f,"$_iEvents",n);let c=Fe(t,"resource",3,void 0),{_filteredEvents:g,_iEvents:f,hiddenDays:_,resources:y,filterEventsWithResources:w,validRange:h}=Me("state"),m=[],x=C(()=>$r(t.dates[0],a())),T=C(()=>Dt(B($r(t.dates.at(-1),a())))),E=C(()=>c()??(l()?s():void 0)),A=C(()=>{let L=[],G=[];for(let ae of d())if(ae.allDay&&cn(ae,i(x),i(T),i(E))){let P=sn(ae,i(x),i(T));ft(ae.display)?G.push(P):L.push(P)}Rn(G,u());let be=Rn(L,u());return[L,G,be]}),$=C(()=>Bn(i(A),3)),S=C(()=>i($)[0]),p=C(()=>i($)[1]),I=C(()=>i($)[2]);function H(){Hr(m,t.dates)}rt(()=>{i(S),R(H)});let U=C(()=>v().map(L=>{let G;return L&&L.allDay&&cn(L,i(x),i(T),c())?(G=sn(L,i(x),i(T)),Rn([G],u())):G=null,G}));var F=De();Se("resize",st,H);var q=j(F);Ye(q,17,()=>t.dates,bt,(L,G,be)=>{yt(go(L,{get date(){return i(G)},get chunks(){return i(S)},get bgChunks(){return i(p)},get longChunks(){return i(I)},get iChunks(){return i(U)},get resource(){return c()}}),(ae,P)=>m[P]=ae,ae=>m==null?void 0:m[ae],()=>[be])}),M(e,F),_e(),r()}var yo=Z('<div role="columnheader"><time></time></div>'),bo=Z("<div><div><!> <div></div></div></div>"),wo=Z("<div><!> <div></div></div> <!> <!>",1);function Er(e,t){ge(t,!1);const[n,r]=Re(),a=()=>o(w,"$theme",n),l=()=>o(c,"$_viewDates",n),s=()=>o(_,"$_today",n),d=()=>o(f,"$_intlDayHeaderAL",n),u=()=>o(g,"$_intlDayHeader",n),v=()=>o(y,"$allDaySlot",n);let{_viewDates:c,_intlDayHeader:g,_intlDayHeaderAL:f,_today:_,allDaySlot:y,theme:w}=Me("state");Yn();var h=wo(),m=j(h),x=ne(m);Wn(x,{children:(S,p)=>{var I=De(),H=j(I);Ye(H,1,l,bt,(U,F)=>{var q=yo(),L=ne(q);Et(L,(G,be)=>xe==null?void 0:xe(G,be),()=>u().format(i(F))),Q(q),re((G,be,ae,P)=>{V(q,1,`${a().day??""} ${G??""}${be??""}`),ct(L,"datetime",ae),ct(L,"aria-label",P)},[()=>{var G;return(G=a().weekdays)==null?void 0:G[i(F).getUTCDay()]},()=>je(i(F),s())?" "+a().today:"",()=>dt(i(F),10),()=>d().format(i(F))],wi),M(U,q)}),M(S,I)},$$slots:{default:!0}});var T=ie(x,2);Q(m);var E=ie(m,2);{var A=S=>{var p=bo(),I=ne(p),H=ne(I);Wn(H,{children:(F,q)=>{_o(F,{get dates(){return l()}})},$$slots:{default:!0}});var U=ie(H,2);Q(I),Q(p),re(()=>{V(p,1,a().allDay),V(I,1,a().content),V(U,1,a().hiddenScroll)}),M(S,p)};ce(E,S=>{v()&&S(A)})}var $=ie(E,2);lo($,{children:(S,p)=>{var I=De(),H=j(I);Ye(H,1,l,bt,(U,F)=>{vo(U,{get date(){return i(F)}})}),M(S,I)},$$slots:{default:!0}}),re(()=>{V(m,1,a().header),V(T,1,a().hiddenScroll)}),M(e,h),_e(),r()}const $o={createOptions(e){e.buttonText.timeGridDay="day",e.buttonText.timeGridWeek="week",e.view="timeGridWeek",e.views.timeGridDay={buttonText:ta,component:Er,dayHeaderFormat:{weekday:"long"},duration:{days:1},theme:wr("ec-time-grid ec-day-view"),titleFormat:{year:"numeric",month:"long",day:"numeric"}},e.views.timeGridWeek={buttonText:na,component:Er,duration:{weeks:1},theme:wr("ec-time-grid ec-week-view")}},createStores(e){e._slotTimeLimits=eo(e),e._times=ja(e)}};et(["click"]);et(["pointerdown"]);var Do=(e,t)=>{le(t,e.currentTarget.value,!0)},To=(e,t)=>{le(t,new Date(e.currentTarget.value),!0)},Co=(e,t)=>{le(t,new Date(e.currentTarget.value),!0)},ko=(e,t)=>le(t,e.currentTarget.value,!0),Eo=(e,t)=>{var n;return(n=t())==null?void 0:n.closeModal()},So=Z('<form><div class="form-grid svelte-l5tfc4"><label for="title" class="svelte-l5tfc4">Title</label> <input id="title" type="text" class="svelte-l5tfc4"/> <label for="start" class="svelte-l5tfc4">Start time</label> <input id="start" type="datetime-local" class="svelte-l5tfc4"/> <label for="end" class="svelte-l5tfc4">End time</label> <input id="end" type="datetime-local" class="svelte-l5tfc4"/> <label for="color" class="svelte-l5tfc4">Color</label> <input id="color" type="color" class="svelte-l5tfc4"/></div> <div class="form-actions svelte-l5tfc4"><button type="submit">Confirm</button> <button type="button">Cancel</button></div></form>');function xo(e,t){ge(t,!0);let n=Fe(t,"modal",15),r=Ge(""),a=Ge(""),l=Ge(null),s=Ge(null);yt(Di(e,{title:"Edit Event",children:(d,u)=>{var v=So(),c=ne(v),g=ie(ne(c),2);tn(g),g.__input=[Do,r];var f=ie(g,4);tn(f),f.__input=[To,l];var _=ie(f,4);tn(_),_.__input=[Co,s];var y=ie(_,4);tn(y),y.__input=[ko,a],Q(c);var w=ie(c,2),h=ie(ne(w),2);h.__click=[Eo,n],Q(w),Q(v),re((m,x)=>{nn(g,t.event.title),nn(f,m),nn(_,x),nn(y,t.event.backgroundColor)},[()=>gr(t.event.start),()=>gr(t.event.end)]),Se("submit",v,async()=>{await ki(n(),t.dbWorker,i(r),i(a),t.event,i(l),i(s),t.updateEvent)}),M(d,v)},$$slots:{default:!0}}),d=>n(d),()=>n()),_e()}et(["input","click"]);var Ro=Z("<!> <!>",1);function po(e,t){ge(t,!0);let n=Ge(null),r=Ge(void 0);async function a(c){let g=new Date(c.event.start),f=new Date(c.event.end),_=await Ei(g,f);console.log("Resize toUpdate: ",_),await Si(t.dbWorker,_.join(", "),`id = ${c.event.id}`)}let l=xr({view:"timeGridWeek",events:t.events,eventDidMount(c){c.el.addEventListener("click",()=>{var g;le(r,c.event,!0),(g=i(n))==null||g.showModal()})},eventDrop:a,eventResize:a,editable:!0});var s=Ro(),d=j(s);xo(d,{get dbWorker(){return t.dbWorker},updateEvent:async()=>{await t.refresh()},get modal(){return i(n)},set modal(c){le(n,c,!0)},get event(){return i(r)},set event(c){le(r,c,!0)}});var u=ie(d,2);const v=C(()=>[$o,Qa]);Ua(u,{get plugins(){return i(v)},get options(){return l}}),M(e,s),_e()}const Po=async e=>{if(!e)return;const t={Relaxing:"#6FCC68",Work:"#68A2CC"},n=[{name:"Reading",project:"Relaxing"},{name:"Gaming",project:"Relaxing"},{name:"FYP",project:"Work"}],r=await xi(e),a=new Set(r.map(c=>c.name));for(const[c,g]of Object.entries(t))a.has(c)||await Ri(e,c,g);const l=await pi(e),s=new Set(l.map(c=>c.name));for(const c of n)s.has(c.name)||await Pi(e,c.name);const d=Date.now(),u=2*60*60*1e3,v=[{activityName:"Reading",projectName:"Relaxing",start:d,end:d+u},{activityName:"FYP",projectName:"Work",start:d+u,end:d+2*u},{activityName:"Gaming",projectName:"Relaxing",start:d-3*60*60*1e3,end:d-3*60*60*1e3+u}];for(const c of v)await Mi(e,c.activityName,c.projectName,c.end-c.start,c.start,c.end)},Mo=async(e,t,n)=>{if(!i(t)){console.error("Worker not ready yet.");return}Po(i(t)),await n()};var Ao=Z("<button>Add test log</button> <!>",1),Lo=Z("<p>Please wait while the calendar loads</p>");function qo(e,t){ge(t,!0);let n=Ge(null),r=Ge(xr([]));const a=g=>g.map(f=>({id:f.id,title:f.activity,start:new Date(f.start),end:new Date(f.end),backgroundColor:f.project_color}));async function l(){i(n)&&le(r,a(await Ai(i(n))),!0)}dn(async()=>{const g=await ci(()=>import("../chunks/BVjkO3Q2.js"),[],import.meta.url);le(n,Ti(new g.default),!0),await i(n).initWorker(),await l()});var d=De(),u=j(d);{var v=g=>{var f=Ao(),_=j(f);_.__click=[Mo,n,l];var y=ie(_,2);$i(y,()=>i(r),w=>{po(w,{get dbWorker(){return i(n)},get events(){return i(r)},refresh:l})}),M(g,f)},c=g=>{var f=Lo();M(g,f)};ce(u,g=>{i(n)?g(v):g(c,!1)})}M(e,d),_e()}et(["click"]);export{qo as component};
