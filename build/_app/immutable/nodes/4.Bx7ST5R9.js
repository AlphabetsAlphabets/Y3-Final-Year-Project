import{i as z,_ as Z,p as nt,b as ct}from"../chunks/Bo_rlaGC.js";import{f as b,a as p,c as ft}from"../chunks/Cq-EHh3y.js";import{w as pt,g as bt,o as tt}from"../chunks/CjBLn947.js";import{aI as yt,h as gt,y as wt,ae as kt,j as H,aw as h,al as st,f as O,g as t,k as y,l as K,s as _,o as v,r as i,q,ay as vt,aJ as ht}from"../chunks/DY99hRlv.js";import{l as xt,d as Q,s as A,e as Pt}from"../chunks/Hrd9LDci.js";import{s as jt}from"../chunks/DwHDfmlN.js";import{s as Wt,a as Ct}from"../chunks/box2CaQC.js";import{w as et}from"../chunks/B8fJUUNV.js";import{r as U,e as ut}from"../chunks/Dr9EWtn6.js";import{s as Mt}from"../chunks/N53LrMpk.js";function X(a,e,o=e){var n=yt();xt(a,"input",r=>{var l=r?a.defaultValue:a.value;if(l=rt(a)?lt(l):l,o(l),n&&l!==(l=e())){var c=a.selectionStart,s=a.selectionEnd;a.value=l??"",s!==null&&(a.selectionStart=c,a.selectionEnd=Math.min(s,a.value.length))}}),(gt&&a.defaultValue!==a.value||wt(e)==null&&a.value)&&o(rt(a)?lt(a.value):a.value),kt(()=>{var r=e();rt(a)&&r===lt(a.value)||a.type==="date"&&!r&&!a.value||r!==a.value&&(a.value=r??"")})}function rt(a){var e=a.type;return e==="number"||e==="range"}function lt(a){return a===""?null:+a}const B=pt(0),I={Running:"Running",Paused:"Paused",Stopped:"Stopped"};let dt=Date.now(),it=Date.now(),Y=null,F=!1;function St(){F=!1,B.set(0),Y=setInterval(()=>{F||B.update(a=>a+1)},1e3),dt=Date.now()}function Dt(){Y!==null&&(clearInterval(Y),Y=null);const a=bt(B);return it=Date.now(),B.set(0),F=!1,[dt,it,a]}function Nt(){F=!0}function $t(){F=!1}var Et=(a,e)=>{St(),_(e,I.Running,!0)},Lt=b('<button type="button" class="btn btn-outline-success w-100 h-100 d-flex justify-content-center align-items-center">Start</button>'),Rt=(a,e)=>{$t(),_(e,I.Running,!0)},At=b('<button type="button" class="btn btn-outline-primary flex-grow-1" style="margin-right: 10px;">Resume</button>'),Tt=(a,e)=>{Nt(),_(e,I.Paused,!0)},It=b('<button type="button" class="btn btn-outline-warning flex-grow-1" style="margin-right: 10px;">Pause</button>'),Ot=async(a,e,o,n)=>{if(e.activityName.length===0||e.activityName==="Activity"){console.log(e.activityName),console.error("No activity selected.");return}let[r,l,c]=Dt();if(!t(o)){console.error("No database worker available.");return}await t(o).addLog(e.activityName,e.projectName,e.projectColor,r,l,c),_(n,I.Stopped,!0)},Vt=b('<div style="display: flex; justify-content: space-between; margin-top: 10px;"><!> <button type="button" class="btn btn-outline-danger flex-grow-1">Stop</button></div>'),zt=b("<!> <!>",1);function qt(a,e){H(e,!0);let o=h(st(I.Stopped)),n=h(null);tt(async()=>{const d=await Z(()=>import("../chunks/DIHOYDEx.js"),[],import.meta.url);_(n,et(new d.default),!0),await t(n).initWorker()});var l=zt(),c=O(l);{var s=d=>{var w=Lt();w.__click=[Et,o],p(d,w)};z(c,d=>{t(o)===I.Stopped&&d(s)})}var u=y(c,2);{var x=d=>{var w=Vt(),M=v(w);{var P=k=>{var S=At();S.__click=[Rt,o],p(k,S)},T=k=>{var S=It();S.__click=[Tt,o],p(k,S)};z(M,k=>{t(o)===I.Paused?k(P):k(T,!1)})}var g=y(M,2);g.__click=[Ot,e,n,o],i(w),p(d,w)};z(u,d=>{(t(o)===I.Running||t(o)===I.Paused)&&d(x)})}p(a,l),K()}Q(["click"]);var Gt=(a,e)=>e(),Jt=(a,e)=>e(),Bt=a=>a.stopPropagation(),Ft=a=>a.stopPropagation(),Ht=b('<h5 class="modal-title svelte-18iei91"> </h5>'),Kt=b('<div class="modal-backdrop svelte-18iei91" role="button" aria-pressed="false" tabindex="0"><div id="modal-content" class="modal-content svelte-18iei91" role="button" aria-pressed="false" tabindex="0"><button aria-label="Close" class="modal-close svelte-18iei91">&times;</button> <!> <!></div></div>');function _t(a,e){H(e,!0);let o=h(!1);function n(){_(o,!0)}function r(){_(o,!1)}var l=ft(),c=O(l);{var s=u=>{var x=Kt();x.__click=[Gt,r],x.__keydown=[Jt,r];var d=v(x);d.__click=[Bt],d.__keydown=[Ft];var w=v(d);w.__click=r;var M=y(w,2);{var P=g=>{var k=Ht(),S=v(k,!0);i(k),q(()=>A(S,e.title)),p(g,k)};z(M,g=>{e.title&&g(P)})}var T=y(M,2);Mt(T,()=>e.children),i(d),i(x),p(u,x)};z(c,u=>{t(o)&&u(s)})}return p(a,l),K({showModal:n,closeModal:r})}Q(["click","keydown"]);var Qt=(a,e)=>{var o;(o=t(e))==null||o.showModal()},Ut=(a,e,o,n)=>{var r;e(t(o).name),(r=t(n))==null||r.closeModal()},Xt=b('<li class="option-item svelte-v93s7w"><button type="button" class="btn btn-outline-primary w-100"> </button></li>'),Yt=b('<ul class="options-list svelte-v93s7w"></ul>'),Zt=async(a,e,o,n,r,l)=>{var c;if(!t(e)){console.error("dbWorker not ready yet.");return}_(o,await t(e).addActivity(t(n)),!0),r(t(n)),(c=t(l))==null||c.closeModal()},te=b('<p> </p> <button type="button" class="btn btn-outline-success w-100"> </button>',1),ee=b('<input type="text" class="form-control mb-3" placeholder="Type to search..."/> <!> <button type="button" class="btn btn-secondary w-100 mt-3">Cancel</button>',1),ae=b('<button id="activity select" type="button" class="btn btn-outline-primary w-100"> </button> <!>',1);function oe(a,e){H(e,!0);let o=nt(e,"selected",15),n=h(null),r=h(st([]));tt(async()=>{const P=await Z(()=>import("../chunks/DIHOYDEx.js"),[],import.meta.url);_(n,et(new P.default),!0),await t(n).initWorker(),_(r,await t(n).listActivities(),!0)});let c=h(null),s=h(""),u=vt(()=>t(s).length===0?t(r):t(r).filter(P=>P.name.toLowerCase().includes(t(s).toLowerCase())));var x=ae(),d=O(x);d.__click=[Qt,c];var w=v(d,!0);i(d);var M=y(d,2);ct(_t(M,{title:"Select an option",children:(P,T)=>{var g=ee(),k=O(g);U(k);var S=y(k,2);{var D=j=>{var $=Yt();ut($,21,()=>t(u),m=>m.id,(m,W)=>{var f=Xt(),C=v(f);C.__click=[Ut,o,W,c];var V=v(C,!0);i(C),i(f),q(()=>A(V,t(W).name)),p(m,f)}),i($),p(j,$)},E=j=>{var $=te(),m=O($),W=v(m);i(m);var f=y(m,2);f.__click=[Zt,n,r,s,o,c];var C=v(f);i(f),q(()=>{A(W,`No options found for "${t(s)??""}"`),A(C,`Create "${t(s)??""}"`)}),p(j,$)};z(S,j=>{t(u).length>0||t(s)===""?j(D):j(E,!1)})}var G=y(S,2);G.__click=function(...j){var $,m;(m=($=t(c))==null?void 0:$.closeModal)==null||m.apply(this,j)},X(k,()=>t(s),j=>_(s,j)),p(P,g)},$$slots:{default:!0}}),P=>_(c,P,!0),()=>t(c)),q(()=>A(w,o())),p(a,x),K()}Q(["click"]);var re=(a,e)=>{var o;(o=t(e))==null||o.showModal()},le=(a,e,o,n,r,l,c)=>{var s;_(e,t(o).name,!0),n(t(e)),_(r,t(o).color,!0),l(t(r)),(s=t(c))==null||s.closeModal()},ne=async(a,e,o,n)=>{var r;if(!t(e)){console.error("Worker not ready.");return}await((r=t(e))==null?void 0:r.updateProject(t(o).name,t(o).color)),_(n,await t(e).listProjects(),!0)},se=b('<li class="option-item svelte-v8cl9o"><div class="d-flex"><button type="button" class="btn btn-outline-primary w-100 d-flex p-0 svelte-v8cl9o"><span class="project-name svelte-v8cl9o"> </span></button> <input type="color" class="form-control form-control-color svelte-v8cl9o" title="Choose project color"/></div></li>'),ie=b('<ul class="options-list svelte-v8cl9o"></ul>'),ce=async(a,e,o,n,r,l,c,s)=>{var u;if(!t(e)){console.error("dbWorker not ready yet.");return}_(o,await t(e).addProject(t(n),t(r)),!0),l(t(n)),c(t(r)),(u=t(s))==null||u.closeModal()},ve=b('<p> </p> <div class="new-project-section svelte-v8cl9o"><div class="color-picker-container svelte-v8cl9o"><input type="color" id="project-color" title="Choose project color" class="svelte-v8cl9o"/></div> <button type="button" class="btn btn-outline-success w-100 mt-2"> </button></div>',1),ue=b('<input type="text" class="form-control mb-3" placeholder="Type to search..."/> <!> <button type="button" class="btn btn-secondary w-100 mt-3">Cancel</button>',1),de=b('<button id="activity select" type="button" class="btn btn-outline-primary w-100"> </button> <!>',1);function _e(a,e){H(e,!0);let o=nt(e,"selected",15),n=nt(e,"color",15),r=h(null),l=h(st([]));tt(async()=>{const g=await Z(()=>import("../chunks/DIHOYDEx.js"),[],import.meta.url);_(r,et(new g.default),!0),await t(r).initWorker(),_(l,await t(r).listProjects(),!0)});let s=h(null),u=h(""),x=h("#3498db"),d=vt(()=>t(u).length===0?t(l):t(l).filter(g=>g.name.toLowerCase().includes(t(u).toLowerCase())));var w=de(),M=O(w);M.__click=[re,s];var P=v(M,!0);i(M);var T=y(M,2);ct(_t(T,{title:"Select an option",children:(g,k)=>{var S=ue(),D=O(S);U(D);var E=y(D,2);{var G=m=>{var W=ie();ut(W,21,()=>t(d),f=>f.name,(f,C,V)=>{var L=se(),J=v(L),R=v(J);R.__click=[le,u,C,o,x,n,s];var N=v(R),at=v(N,!0);i(N),i(R);var ot=y(R,2);U(ot),ot.__change=[ne,r,C,l],i(J),i(L),q(()=>A(at,t(C).name)),X(ot,()=>t(C).color,mt=>t(C).color=mt),p(f,L)}),i(W),p(m,W)},j=m=>{var W=ve(),f=O(W),C=v(f);i(f);var V=y(f,2),L=v(V),J=v(L);U(J),i(L);var R=y(L,2);R.__click=[ce,r,l,u,x,o,n,s];var N=v(R);i(R),i(V),q(()=>{A(C,`No options found for "${t(u)??""}"`),A(N,`Create "${t(u)??""}"`)}),X(J,()=>t(x),at=>_(x,at)),p(m,W)};z(E,m=>{t(d).length>0||t(u)===""?m(G):m(j,!1)})}var $=y(E,2);$.__click=function(...m){var W,f;(f=(W=t(s))==null?void 0:W.closeModal)==null||f.apply(this,m)},X(D,()=>t(u),m=>_(u,m)),p(g,S)},$$slots:{default:!0}}),g=>_(s,g,!0),()=>t(s)),q(()=>A(P,t(u)||"Project")),p(a,w),K()}Q(["click","change"]);var me=(a,e)=>_(e,!t(e)),fe=b('<form><div class="d-flex gap-2 mb-3"><div class="flex-grow-1"><!></div> <div class="flex-grow-1"><!></div></div> <div class="input-group mb-3"><span class="input-group-text">Goal</span> <input type="text" class="form-control" placeholder="What are you working on?"/></div> <div class="d-grid gap-2 mb-4"><button type="button">Pomodoro</button></div> <div class="display-1 fw-bold my-3"> <span class="fs-4 align-text-top">s</span></div> <!></form>'),pe=b('<div class="d-flex flex-column align-items-center p-5"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div> <p class="mt-3 mb-0">Please wait while the app loads</p></div>'),be=b('<div class="settings-container svelte-z6oua9"><button id="settings" class="btn btn-light rounded-circle p-2 lh-1 svelte-z6oua9"><img src="/gear.svg" alt="gear" class="svelte-z6oua9"/></button></div> <main class="container mt-5"><div class="row justify-content-center"><div class="col-md-8 col-lg-6 text-center"><!></div></div></main>',1);function Me(a,e){H(e,!0);const[o,n]=Wt(),r=()=>Ct(B,"$seconds",o);let l=h("Activity"),c=h("Project"),s=h(""),u=h(null);tt(async()=>{const D=await Z(()=>import("../chunks/DIHOYDEx.js"),[],import.meta.url);_(u,et(new D.default),!0),await t(u).initWorker()});let d=h(!1);var w=be(),M=y(O(w),2),P=v(M),T=v(P),g=v(T);{var k=D=>{var E=fe(),G=v(E),j=v(G),$=v(j);oe($,{get selected(){return t(l)},set selected(N){_(l,N,!0)}}),i(j);var m=y(j,2),W=v(m);_e(W,{get selected(){return t(c)},set selected(N){_(c,N,!0)},get color(){return t(s)},set color(N){_(s,N,!0)}}),i(m),i(G);var f=y(G,4),C=v(f);let V;C.__click=[me,d],i(f);var L=y(f,2),J=v(L,!0);ht(),i(L);var R=y(L,2);qt(R,{get activityName(){return t(l)},get projectName(){return t(c)},get projectColor(){return t(s)}}),i(E),q(N=>{V=jt(C,1,"btn",null,V,N),A(J,r())},[()=>({"btn-success":t(d),"btn-outline-success":!t(d)})]),Pt("submit",E,N=>N.preventDefault()),p(D,E)},S=D=>{var E=pe();p(D,E)};z(g,D=>{t(u)?D(k):D(S,!1)})}i(T),i(P),i(M),p(a,w),K(),n()}Q(["click"]);export{Me as component};
