import{d as R,f as p,a as u,g as K,c as X}from"../chunks/DYAZ3xSE.js";import"../chunks/C4pyXiQM.js";import{p as Z,i as F,b as se,_ as le}from"../chunks/B0vD_CDy.js";import{C as O,I as c,D,H as b,J as _,j as e,F as x,G,z as r,K as Q,am as oe,aA as ie}from"../chunks/CovMCToo.js";import{k as ne}from"../chunks/ozXLM6ea.js";import{w as de}from"../chunks/B8fJUUNV.js";import{b as I,a as ce,d as ve,m as ue,c as _e,u as S,T as ke,l as be}from"../chunks/BshZFSB1.js";import{r as L,s as pe}from"../chunks/CxkTVC9Y.js";import{s as U}from"../chunks/Chg3hcGr.js";import{s as me,e as fe}from"../chunks/B3QRiNGC.js";import{M as we}from"../chunks/Ogyqt5yR.js";var he=async(o,a)=>{o.key==="Enter"&&await a()},ye=async(o,a)=>{o.key==="Enter"&&await a()},xe=p('<header class="svelte-xt44rj"><h1 class="svelte-xt44rj">Tasks</h1> <p class="svelte-xt44rj">Stay organized and get things done.</p></header> <div class="add-task-wrapper svelte-xt44rj"><div class="task-inputs svelte-xt44rj"><input type="text" placeholder="e.g., Finish project report" tabindex="0" class="svelte-xt44rj"/> <input type="text" class="description-input svelte-xt44rj" placeholder="description" tabindex="0"/></div> <button aria-label="Add new task" tabindex="0" class="svelte-xt44rj"><i class="bi bi-plus-lg svelte-xt44rj"></i> <span>Add Task</span></button></div>',1);function We(o,a){O(a,!0);let t=Z(a,"tasks",15),s=x(""),n=x(""),l=async()=>{e(s).length!==0&&(a.dbWorker?(t(await ce(a.dbWorker,e(s),e(n))),r(s,""),r(n,"")):console.error("Worker is not ready. Please try again."))};var i=xe(),h=c(D(i),2),k=b(h),m=b(k);L(m),m.__keydown=[he,l];var d=c(m,2);L(d),d.__keydown=[ye,l],_(k);var T=c(k,2);T.__click=l,_(h),I(m,()=>e(s),v=>r(s,v)),I(d,()=>e(n),v=>r(n,v)),u(o,i),G()}R(["keydown","click"]);var ge=(o,a)=>{var t;return(t=e(a))==null?void 0:t.showModal()},Te=p('<span class="tooltip svelte-1ffcuub">Delete all COMPLETED tasks</span>'),je=(o,a,t)=>{var s;a.yesAction(),(s=e(t))==null||s.closeModal()},Ee=(o,a)=>{var t;return(t=e(a))==null?void 0:t.closeModal()},Me=p("<!> <button>Yes</button> <button>No</button>",1),Ae=p('<button class="delete-all-btn svelte-1ffcuub" aria-label="Delete all completed tasks"><i class="bi bi-trash"></i> <!></button> <div class="message-modal-wrapper svelte-1ffcuub"><!></div>',1);function Pe(o,a){O(a,!0);let t=x(null),s=x(!1);var n=Ae(),l=D(n);l.__click=[ge,t];var i=c(b(l),2);{var h=d=>{var T=Te();u(d,T)};F(i,d=>{e(s)&&d(h)})}_(l);var k=c(l,2),m=b(k);se(we(m,{get title(){return a.title},children:(d,T)=>{var v=Me(),W=D(v);me(W,()=>a.children);var M=c(W,2);M.__click=[je,a,t];var A=c(M,2);A.__click=[Ee,t],u(d,v)},$$slots:{default:!0}}),d=>r(t,d,!0),()=>e(t)),_(k),K("mouseenter",l,()=>r(s,!0)),K("mouseleave",l,()=>r(s,!1)),u(o,n),G()}R(["click"]);var De=(o,a)=>r(a,!e(a)),Ce=p("<p>Are you sure you want to delete all completed tasks?</p>"),ze=async(o,a,t)=>a(e(t).id),Fe=async(o,a,t,s,n,l,i)=>{o.key==="Enter"?(a.dbWorker&&e(t).trim()&&s(await S(a.dbWorker,e(n).id,e(t).trim(),e(l).trim())),r(i,null),r(t,""),r(l,"")):o.key==="Escape"&&(r(i,null),r(t,""),r(l,""))},Ie=async(o,a,t,s,n,l,i)=>{o.key==="Enter"?(a.dbWorker&&e(t).trim()&&s(await S(a.dbWorker,e(n).id,e(t).trim(),e(l).trim())),r(i,null),r(t,""),r(l,"")):o.key==="Escape"&&(r(i,null),r(t,""),r(l,""))},Le=p('<div class="task-edit-container svelte-hdxrpw"><input type="text" class="task-edit-input svelte-hdxrpw" placeholder="Task name"/> <input type="text" class="task-edit-input task-description-input svelte-hdxrpw" placeholder="Task description"/></div>'),Oe=p('<div class="task-content svelte-hdxrpw"><span class="task-name svelte-hdxrpw"> </span> <small class="task-description svelte-hdxrpw"> </small></div>'),Ge=(o,a,t,s,n)=>{r(a,e(t).id,!0),r(s,e(t).name,!0),r(n,e(t).description||"",!0)},He=async(o,a,t,s)=>{a.dbWorker?t(await _e(a.dbWorker,e(s).id)):console.error("Worker not ready. Please wait.")},Je=p('<li class="task-item svelte-hdxrpw"><button aria-label="Mark task as uncompleted" class="checkbox svelte-hdxrpw"><i class="bi bi-check svelte-hdxrpw"></i></button> <!> <button class="delete-btn svelte-hdxrpw" aria-label="Edit task name"><i class="bi bi-pencil"></i></button> <button class="delete-btn svelte-hdxrpw" aria-label="Delete task"><i class="bi bi-trash"></i></button></li>'),Ke=p('<ul class="task-list svelte-hdxrpw"></ul>'),Re=p('<div class="tasks-section svelte-hdxrpw"><div class="section-header svelte-hdxrpw"><button class="section-title-button svelte-hdxrpw"><h2 class="section-title svelte-hdxrpw">Done</h2> <i></i></button> <!></div> <!></div>');function Se(o,a){O(a,!0);let t=Z(a,"tasks",15),s=x(!0),n=x(null),l=x(""),i=x(""),h=async w=>{a.dbWorker?t(await ue(a.dbWorker,w)):console.error("Worker is not ready. Please try again.")};var k=Re(),m=b(k),d=b(m);d.__click=[De,s];var T=c(b(d),2);let v;_(d);var W=c(d,2);Pe(W,{title:"Are you sure?",yesAction:async()=>t(await ve(a.dbWorker)),children:(w,y)=>{var C=Ce();u(w,C)},$$slots:{default:!0}}),_(m);var M=c(m,2);{var A=w=>{var y=Ke();fe(y,21,t,C=>C.id,(C,f)=>{var V=X(),N=D(V);{var $=H=>{var J=Je(),Y=b(J);Y.__click=[ze,h,f];var q=c(Y,2);{var ee=P=>{var j=Le(),E=b(j);L(E),E.__keydown=[Fe,a,l,t,f,i,n];var z=c(E,2);L(z),z.__keydown=[Ie,a,l,t,f,i,n],_(j),K("blur",j,async g=>{g.currentTarget.contains(g.relatedTarget)||(a.dbWorker&&e(l).trim()&&(e(l)!==e(f).name||e(i)!==e(f).description)&&t(await S(a.dbWorker,e(f).id,e(l).trim(),e(i).trim())),r(n,null),r(l,""),r(i,""))}),I(E,()=>e(l),g=>r(l,g)),I(z,()=>e(i),g=>r(i,g)),u(P,j)},te=P=>{var j=Oe(),E=b(j),z=b(E,!0);_(E);var g=c(E,2),re=b(g,!0);_(g),_(j),Q(()=>{U(z,e(f).name),U(re,e(f).description)}),u(P,j)};F(q,P=>{e(n)===e(f).id?P(ee):P(te,!1)})}var B=c(q,2);B.__click=[Ge,n,f,l,i];var ae=c(B,2);ae.__click=[He,a,t,f],_(J),u(H,J)};F(N,H=>{e(f).completed&&H($)})}u(C,V)}),_(y),u(w,y)};F(M,w=>{e(s)||w(A)})}_(k),Q(w=>v=pe(T,1,"bi bi-chevron-down svelte-hdxrpw",null,v,w),[()=>({rotated:e(s)})]),u(o,k),G()}R(["click","keydown"]);var Ve=p("<!> <!> <!>",1),Ye=p("<p>Please wait while the app loads.</p>"),qe=p('<div class="container svelte-1eux5ee"><!></div>');function Be(o,a){O(a,!0);let t=x(null),s=x(oe([]));ie(async()=>{const h=await le(()=>import("../chunks/BYbjoqHL.js"),[],import.meta.url);r(t,de(new h.default),!0),await e(t).initWorker(),r(s,await be(e(t)),!0)});var l=qe(),i=b(l);ne(i,()=>e(t),h=>{var k=X(),m=D(k);{var d=v=>{var W=Ve(),M=D(W);We(M,{get dbWorker(){return e(t)},get tasks(){return e(s)},set tasks(y){r(s,y,!0)}});var A=c(M,2);Se(A,{get dbWorker(){return e(t)},get tasks(){return e(s)},set tasks(y){r(s,y,!0)}});var w=c(A,2);ke(w,{get dbWorker(){return e(t)},get tasks(){return e(s)},set tasks(y){r(s,y,!0)}}),u(v,W)},T=v=>{var W=Ye();u(v,W)};F(m,v=>{e(t)?v(d):v(T,!1)})}u(h,k)}),_(l),u(o,l),G()}function lt(o){Be(o,{})}export{lt as component};
