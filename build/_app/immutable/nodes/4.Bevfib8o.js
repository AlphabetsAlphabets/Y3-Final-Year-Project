import{l as ri,p as Te,b as wd,s as Ed,i as bn,_ as Sd}from"../chunks/4bz4uomn.js";import{f as $e,a as oe,d as Td,s as wn,c as ss}from"../chunks/DDpgsnWW.js";import{a7 as Od,B as vc,aT as xd,at as yc,aU as Md,aV as $d,F as _c,D as Ye,af as Rr,j as W,H as ut,G as wt,J as Yn,A as mt,I as Et,C as ji}from"../chunks/Nagih0ik.js";import{k as Ad}from"../chunks/DUcmQWgZ.js";import{b as Cd,i as ls,r as cs,c as us}from"../chunks/qkCkcpST.js";import{b as hs}from"../chunks/D7mLoLgg.js";import{w as Ld}from"../chunks/B8fJUUNV.js";import"../chunks/CLNk2ODh.js";import{i as Dd}from"../chunks/XlJgZQad.js";import{l as kd}from"../chunks/Bm68CKNN.js";function Bi(t,e){var a;var n=(a=t.$$events)==null?void 0:a[e.type],r=Od(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,e)}var bc=(t=>(t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout",t))(bc||{}),wc=(t=>(t.SHOW="show-modal",t.HIDE="hide-modal",t))(wc||{}),Ec=(t=>(t.UPDATE="model-update",t))(Ec||{}),Sc=(t=>(t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",t.BUTTON_CLICK="toolbar-button-click",t.SHOW_TOOLTIP="toolbar-show-tooltip",t.HIDE_TOOLTIP="toolbar-hide-tooltip",t))(Sc||{}),Tc=(t=>(t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end",t))(Tc||{}),Oc=(t=>(t.CHANGE="zoom-domain-change",t))(Oc||{}),xc=(t=>(t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out",t))(xc||{}),Mc=(t=>(t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout",t.LABEL_FOCUS="axis-label-focus",t.LABEL_BLUR="axis-label-blur",t.RENDER_COMPLETE="axis-render-complete",t))(Mc||{}),$c=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))($c||{}),Ac=(t=>(t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout",t))(Ac||{}),Cc=(t=>(t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout",t))(Cc||{}),Lc=(t=>(t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout",t))(Lc||{}),Dc=(t=>(t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout",t))(Dc||{}),kc=(t=>(t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout",t))(kc||{}),Ic=(t=>(t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout",t))(Ic||{}),Rc=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(Rc||{}),Nc=(t=>(t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",t))(Nc||{}),Uc=(t=>(t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout",t))(Uc||{}),Pc=(t=>(t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout",t))(Pc||{}),Hc=(t=>(t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip",t))(Hc||{}),Fc=(t=>(t.SHOW="show-threshold",t.HIDE="hide-threshold",t))(Fc||{}),Vc=(t=>(t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update",t))(Vc||{}),jc=(t=>(t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",t))(jc||{}),Bc=(t=>(t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove",t))(Bc||{}),Gc=(t=>(t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove",t))(Gc||{}),zc=(t=>(t.HEATMAP_MOUSEOVER="heatmap-mouseover",t.HEATMAP_CLICK="heatmap-click",t.HEATMAP_MOUSEOUT="heatmap-mouseout",t.HEATMAP_MOUSEMOVE="hetmap-mousemove",t))(zc||{}),Wc=(t=>(t.CHOROPLETH_MOUSEOVER="choropleth-mouseover",t.CHOROPLETH_CLICK="choropleth-click",t.CHOROPLETH_MOUSEOUT="choropleth-mouseout",t.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",t))(Wc||{});const Id=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:Bc,Area:$c,Axis:Mc,Bar:Dc,Boxplot:kc,CanvasZoom:xc,Chart:bc,Choropleth:Wc,CirclePack:jc,Gauge:Lc,Heatmap:zc,Legend:Vc,Line:Rc,Meter:Gc,Modal:wc,Model:Ec,Pie:Cc,Radar:Nc,Scatter:Ic,Threshold:Fc,Toolbar:Sc,Tooltip:Hc,Tree:Uc,Treemap:Pc,WordCloud:Ac,ZoomBar:Tc,ZoomDomain:Oc},Symbol.toStringTag,{value:"Module"})),T=Id;var Tt=(t=>(t.HTML="html",t.SVG="svg",t))(Tt||{}),Yc=(t=>(t.WHITE="white",t.G100="g100",t.G90="g90",t.G10="g10",t))(Yc||{}),jt=(t=>(t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip",t))(jt||{}),ii=(t=>(t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view",t))(ii||{}),Oe=(t=>(t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none",t))(Oe||{}),le=(t=>(t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t))(le||{}),fe=(t=>(t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio",t))(fe||{}),Xc=(t=>(t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom",t))(Xc||{}),re=(t=>(t.LEFT="left",t.CENTER="center",t.RIGHT="right",t))(re||{}),Oa=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(Oa||{}),qc=(t=>(t.TREE="tree",t.DENDROGRAM="dendrogram",t))(qc||{}),ee=(t=>(t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse",t))(ee||{}),Ut=(t=>(t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch",t))(Ut||{}),io=(t=>(t.CENTER="center",t))(io||{}),zr=(t=>(t.LEFT="left",t.RIGHT="right",t))(zr||{}),Mn=(t=>(t.GRID="grid",t.VERT_OR_HORIZ="vertOrHoriz",t.PIE="pie",t.DONUT="donut",t))(Mn||{}),Kc=(t=>(t.SEMI="semi",t.FULL="full",t))(Kc||{}),Xe=(t=>(t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area",t))(Xe||{}),gt=(t=>(t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.EXIT_FULLSCREEN="Exit fullscreen",t.SHOW_AS_DATATABLE="Show as data-table",t.CUSTOM="Custom",t))(gt||{}),Lt=(t=>(t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom",t))(Lt||{}),Zc=(t=>(t.ON="on",t.AUTO="auto",t.OFF="off",t))(Zc||{}),Jc=(t=>(t.geoEqualEarth="geoEqualEarth",t.geoAlbers="geoAlbers",t.geoConicEqualArea="geoConicEqualArea",t.geoConicEquidistant="geoConicEquidistant",t.geoEquirectangular="geoEquirectangular",t.geoMercator="geoMercator",t.geoNaturalEarth1="geoNaturalEarth1",t))(Jc||{});function Gi(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}function Xn(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):o;i=t.formattingValues[s]||t.formattingValues[o]}else{const o=t.defaultWidth,s=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[s]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}function qn(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(s)?Nd(s,h=>h.test(o)):Rd(s,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Rd(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Nd(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Ud(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const s=e.slice(i.length);return{value:o,rest:s}}}const Pd={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Hd=(t,e,n)=>{let r;const i=Pd[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},Fd={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vd=(t,e,n,r)=>Fd[t],jd={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Bd={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Gd={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zd={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Wd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Yd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xd=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},qd={ordinalNumber:Xd,era:Xn({values:jd,defaultWidth:"wide"}),quarter:Xn({values:Bd,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Xn({values:Gd,defaultWidth:"wide"}),day:Xn({values:zd,defaultWidth:"wide"}),dayPeriod:Xn({values:Wd,defaultWidth:"wide",formattingValues:Yd,defaultFormattingWidth:"wide"})},Kd=/^(\d+)(th|st|nd|rd)?/i,Zd=/\d+/i,Jd={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Qd={any:[/^b/i,/^(a|c)/i]},tf={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ef={any:[/1/i,/2/i,/3/i,/4/i]},nf={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},rf={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},af={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},of={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cf={ordinalNumber:Ud({matchPattern:Kd,parsePattern:Zd,valueCallback:t=>parseInt(t,10)}),era:qn({matchPatterns:Jd,defaultMatchWidth:"wide",parsePatterns:Qd,defaultParseWidth:"any"}),quarter:qn({matchPatterns:tf,defaultMatchWidth:"wide",parsePatterns:ef,defaultParseWidth:"any",valueCallback:t=>t+1}),month:qn({matchPatterns:nf,defaultMatchWidth:"wide",parsePatterns:rf,defaultParseWidth:"any"}),day:qn({matchPatterns:af,defaultMatchWidth:"wide",parsePatterns:of,defaultParseWidth:"any"}),dayPeriod:qn({matchPatterns:sf,defaultMatchWidth:"any",parsePatterns:lf,defaultParseWidth:"any"})},uf={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hf={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},df={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ff={date:Gi({formats:uf,defaultWidth:"full"}),time:Gi({formats:hf,defaultWidth:"full"}),dateTime:Gi({formats:df,defaultWidth:"full"})},pf={code:"en-US",formatDistance:Hd,formatLong:ff,formatRelative:Vd,localize:qd,match:cf,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Qc=typeof global=="object"&&global&&global.Object===Object&&global,gf=typeof self=="object"&&self&&self.Object===Object&&self,ye=Qc||gf||Function("return this")(),ce=ye.Symbol,tu=Object.prototype,mf=tu.hasOwnProperty,vf=tu.toString,Kn=ce?ce.toStringTag:void 0;function yf(t){var e=mf.call(t,Kn),n=t[Kn];try{t[Kn]=void 0;var r=!0}catch{}var i=vf.call(t);return r&&(e?t[Kn]=n:delete t[Kn]),i}var _f=Object.prototype,bf=_f.toString;function wf(t){return bf.call(t)}var Ef="[object Null]",Sf="[object Undefined]",ds=ce?ce.toStringTag:void 0;function hn(t){return t==null?t===void 0?Sf:Ef:ds&&ds in Object(t)?yf(t):wf(t)}function Me(t){return t!=null&&typeof t=="object"}var Tf="[object Symbol]";function Oi(t){return typeof t=="symbol"||Me(t)&&hn(t)==Tf}function eu(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Wt=Array.isArray,fs=ce?ce.prototype:void 0,ps=fs?fs.toString:void 0;function nu(t){if(typeof t=="string")return t;if(Wt(t))return eu(t,nu)+"";if(Oi(t))return ps?ps.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function ue(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function ao(t){return t}var Of="[object AsyncFunction]",xf="[object Function]",Mf="[object GeneratorFunction]",$f="[object Proxy]";function oo(t){if(!ue(t))return!1;var e=hn(t);return e==xf||e==Mf||e==Of||e==$f}var zi=ye["__core-js_shared__"],gs=function(){var t=/[^.]+$/.exec(zi&&zi.keys&&zi.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Af(t){return!!gs&&gs in t}var Cf=Function.prototype,Lf=Cf.toString;function dn(t){if(t!=null){try{return Lf.call(t)}catch{}try{return t+""}catch{}}return""}var Df=/[\\^$.*+?()[\]{}|]/g,kf=/^\[object .+?Constructor\]$/,If=Function.prototype,Rf=Object.prototype,Nf=If.toString,Uf=Rf.hasOwnProperty,Pf=RegExp("^"+Nf.call(Uf).replace(Df,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Hf(t){if(!ue(t)||Af(t))return!1;var e=oo(t)?Pf:kf;return e.test(dn(t))}function Ff(t,e){return t==null?void 0:t[e]}function fn(t,e){var n=Ff(t,e);return Hf(n)?n:void 0}var xa=fn(ye,"WeakMap"),ms=Object.create,Vf=function(){function t(){}return function(e){if(!ue(e))return{};if(ms)return ms(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function jf(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Bf(){}function ru(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Gf=800,zf=16,Wf=Date.now;function Yf(t){var e=0,n=0;return function(){var r=Wf(),i=zf-(r-n);if(n=r,i>0){if(++e>=Gf)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Xf(t){return function(){return t}}var ai=function(){try{var t=fn(Object,"defineProperty");return t({},"",{}),t}catch{}}(),qf=ai?function(t,e){return ai(t,"toString",{configurable:!0,enumerable:!1,value:Xf(e),writable:!0})}:ao,iu=Yf(qf);function Kf(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function Zf(t,e,n,r){for(var i=t.length,a=n+-1;++a<i;)if(e(t[a],a,t))return a;return-1}function Jf(t){return t!==t}function Qf(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function tp(t,e,n){return e===e?Qf(t,e,n):Zf(t,Jf,n)}function ep(t,e){var n=t==null?0:t.length;return!!n&&tp(t,e,0)>-1}var np=9007199254740991,rp=/^(?:0|[1-9]\d*)$/;function so(t,e){var n=typeof t;return e=e??np,!!e&&(n=="number"||n!="symbol"&&rp.test(t))&&t>-1&&t%1==0&&t<e}function xi(t,e,n){e=="__proto__"&&ai?ai(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Sr(t,e){return t===e||t!==t&&e!==e}var ip=Object.prototype,ap=ip.hasOwnProperty;function au(t,e,n){var r=t[e];(!(ap.call(t,e)&&Sr(r,n))||n===void 0&&!(e in t))&&xi(t,e,n)}function jn(t,e,n,r){var i=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],l=void 0;l===void 0&&(l=t[s]),i?xi(n,s,l):au(n,s,l)}return n}var vs=Math.max;function ou(t,e,n){return e=vs(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=vs(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(o),jf(t,this,s)}}function lo(t,e){return iu(ou(t,e,ao),t+"")}var op=9007199254740991;function co(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=op}function Tr(t){return t!=null&&co(t.length)&&!oo(t)}function sp(t,e,n){if(!ue(n))return!1;var r=typeof e;return(r=="number"?Tr(n)&&so(e,n.length):r=="string"&&e in n)?Sr(n[e],t):!1}function lp(t){return lo(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,o&&sp(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e})}var cp=Object.prototype;function uo(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||cp;return t===n}function up(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var hp="[object Arguments]";function ys(t){return Me(t)&&hn(t)==hp}var su=Object.prototype,dp=su.hasOwnProperty,fp=su.propertyIsEnumerable,dr=ys(function(){return arguments}())?ys:function(t){return Me(t)&&dp.call(t,"callee")&&!fp.call(t,"callee")};function pp(){return!1}var lu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_s=lu&&typeof module=="object"&&module&&!module.nodeType&&module,gp=_s&&_s.exports===lu,bs=gp?ye.Buffer:void 0,mp=bs?bs.isBuffer:void 0,fr=mp||pp,vp="[object Arguments]",yp="[object Array]",_p="[object Boolean]",bp="[object Date]",wp="[object Error]",Ep="[object Function]",Sp="[object Map]",Tp="[object Number]",Op="[object Object]",xp="[object RegExp]",Mp="[object Set]",$p="[object String]",Ap="[object WeakMap]",Cp="[object ArrayBuffer]",Lp="[object DataView]",Dp="[object Float32Array]",kp="[object Float64Array]",Ip="[object Int8Array]",Rp="[object Int16Array]",Np="[object Int32Array]",Up="[object Uint8Array]",Pp="[object Uint8ClampedArray]",Hp="[object Uint16Array]",Fp="[object Uint32Array]",bt={};bt[Dp]=bt[kp]=bt[Ip]=bt[Rp]=bt[Np]=bt[Up]=bt[Pp]=bt[Hp]=bt[Fp]=!0;bt[vp]=bt[yp]=bt[Cp]=bt[_p]=bt[Lp]=bt[bp]=bt[wp]=bt[Ep]=bt[Sp]=bt[Tp]=bt[Op]=bt[xp]=bt[Mp]=bt[$p]=bt[Ap]=!1;function Vp(t){return Me(t)&&co(t.length)&&!!bt[hn(t)]}function ho(t){return function(e){return t(e)}}var cu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ur=cu&&typeof module=="object"&&module&&!module.nodeType&&module,jp=ur&&ur.exports===cu,Wi=jp&&Qc.process,In=function(){try{var t=ur&&ur.require&&ur.require("util").types;return t||Wi&&Wi.binding&&Wi.binding("util")}catch{}}(),ws=In&&In.isTypedArray,fo=ws?ho(ws):Vp,Bp=Object.prototype,Gp=Bp.hasOwnProperty;function uu(t,e){var n=Wt(t),r=!n&&dr(t),i=!n&&!r&&fr(t),a=!n&&!r&&!i&&fo(t),o=n||r||i||a,s=o?up(t.length,String):[],l=s.length;for(var c in t)(e||Gp.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||so(c,l)))&&s.push(c);return s}function hu(t,e){return function(n){return t(e(n))}}var zp=hu(Object.keys,Object),Wp=Object.prototype,Yp=Wp.hasOwnProperty;function Xp(t){if(!uo(t))return zp(t);var e=[];for(var n in Object(t))Yp.call(t,n)&&n!="constructor"&&e.push(n);return e}function Or(t){return Tr(t)?uu(t):Xp(t)}function qp(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Kp=Object.prototype,Zp=Kp.hasOwnProperty;function Jp(t){if(!ue(t))return qp(t);var e=uo(t),n=[];for(var r in t)r=="constructor"&&(e||!Zp.call(t,r))||n.push(r);return n}function xr(t){return Tr(t)?uu(t,!0):Jp(t)}var Qp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tg=/^\w*$/;function po(t,e){if(Wt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Oi(t)?!0:tg.test(t)||!Qp.test(t)||e!=null&&t in Object(e)}var pr=fn(Object,"create");function eg(){this.__data__=pr?pr(null):{},this.size=0}function ng(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var rg="__lodash_hash_undefined__",ig=Object.prototype,ag=ig.hasOwnProperty;function og(t){var e=this.__data__;if(pr){var n=e[t];return n===rg?void 0:n}return ag.call(e,t)?e[t]:void 0}var sg=Object.prototype,lg=sg.hasOwnProperty;function cg(t){var e=this.__data__;return pr?e[t]!==void 0:lg.call(e,t)}var ug="__lodash_hash_undefined__";function hg(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=pr&&e===void 0?ug:e,this}function on(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}on.prototype.clear=eg;on.prototype.delete=ng;on.prototype.get=og;on.prototype.has=cg;on.prototype.set=hg;function dg(){this.__data__=[],this.size=0}function Mi(t,e){for(var n=t.length;n--;)if(Sr(t[n][0],e))return n;return-1}var fg=Array.prototype,pg=fg.splice;function gg(t){var e=this.__data__,n=Mi(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():pg.call(e,n,1),--this.size,!0}function mg(t){var e=this.__data__,n=Mi(e,t);return n<0?void 0:e[n][1]}function vg(t){return Mi(this.__data__,t)>-1}function yg(t,e){var n=this.__data__,r=Mi(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Be(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Be.prototype.clear=dg;Be.prototype.delete=gg;Be.prototype.get=mg;Be.prototype.has=vg;Be.prototype.set=yg;var gr=fn(ye,"Map");function _g(){this.size=0,this.__data__={hash:new on,map:new(gr||Be),string:new on}}function bg(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function $i(t,e){var n=t.__data__;return bg(e)?n[typeof e=="string"?"string":"hash"]:n.map}function wg(t){var e=$i(this,t).delete(t);return this.size-=e?1:0,e}function Eg(t){return $i(this,t).get(t)}function Sg(t){return $i(this,t).has(t)}function Tg(t,e){var n=$i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Ge(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ge.prototype.clear=_g;Ge.prototype.delete=wg;Ge.prototype.get=Eg;Ge.prototype.has=Sg;Ge.prototype.set=Tg;var Og="Expected a function";function go(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Og);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(go.Cache||Ge),n}go.Cache=Ge;var xg=500;function Mg(t){var e=go(t,function(r){return n.size===xg&&n.clear(),r}),n=e.cache;return e}var $g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ag=/\\(\\)?/g,Cg=Mg(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace($g,function(n,r,i,a){e.push(i?a.replace(Ag,"$1"):r||n)}),e});function Lg(t){return t==null?"":nu(t)}function Ai(t,e){return Wt(t)?t:po(t,e)?[t]:Cg(Lg(t))}function Mr(t){if(typeof t=="string"||Oi(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function mo(t,e){e=Ai(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Mr(e[n++])];return n&&n==r?t:void 0}function du(t,e,n){var r=t==null?void 0:mo(t,e);return r===void 0?n:r}function vo(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Es=ce?ce.isConcatSpreadable:void 0;function Dg(t){return Wt(t)||dr(t)||!!(Es&&t&&t[Es])}function fu(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=Dg),i||(i=[]);++a<o;){var s=t[a];n(s)?vo(i,s):r||(i[i.length]=s)}return i}var yo=hu(Object.getPrototypeOf,Object),kg="[object Object]",Ig=Function.prototype,Rg=Object.prototype,pu=Ig.toString,Ng=Rg.hasOwnProperty,Ug=pu.call(Object);function gu(t){if(!Me(t)||hn(t)!=kg)return!1;var e=yo(t);if(e===null)return!0;var n=Ng.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&pu.call(n)==Ug}function Pg(){this.__data__=new Be,this.size=0}function Hg(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Fg(t){return this.__data__.get(t)}function Vg(t){return this.__data__.has(t)}var jg=200;function Bg(t,e){var n=this.__data__;if(n instanceof Be){var r=n.__data__;if(!gr||r.length<jg-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ge(r)}return n.set(t,e),this.size=n.size,this}function ve(t){var e=this.__data__=new Be(t);this.size=e.size}ve.prototype.clear=Pg;ve.prototype.delete=Hg;ve.prototype.get=Fg;ve.prototype.has=Vg;ve.prototype.set=Bg;function Gg(t,e){return t&&jn(e,Or(e),t)}function zg(t,e){return t&&jn(e,xr(e),t)}var mu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ss=mu&&typeof module=="object"&&module&&!module.nodeType&&module,Wg=Ss&&Ss.exports===mu,Ts=Wg?ye.Buffer:void 0,Os=Ts?Ts.allocUnsafe:void 0;function vu(t,e){if(e)return t.slice();var n=t.length,r=Os?Os(n):new t.constructor(n);return t.copy(r),r}function Yg(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}function yu(){return[]}var Xg=Object.prototype,qg=Xg.propertyIsEnumerable,xs=Object.getOwnPropertySymbols,_o=xs?function(t){return t==null?[]:(t=Object(t),Yg(xs(t),function(e){return qg.call(t,e)}))}:yu;function Kg(t,e){return jn(t,_o(t),e)}var Zg=Object.getOwnPropertySymbols,_u=Zg?function(t){for(var e=[];t;)vo(e,_o(t)),t=yo(t);return e}:yu;function Jg(t,e){return jn(t,_u(t),e)}function bu(t,e,n){var r=e(t);return Wt(t)?r:vo(r,n(t))}function Ma(t){return bu(t,Or,_o)}function wu(t){return bu(t,xr,_u)}var $a=fn(ye,"DataView"),Aa=fn(ye,"Promise"),Dn=fn(ye,"Set"),Ms="[object Map]",Qg="[object Object]",$s="[object Promise]",As="[object Set]",Cs="[object WeakMap]",Ls="[object DataView]",tm=dn($a),em=dn(gr),nm=dn(Aa),rm=dn(Dn),im=dn(xa),pe=hn;($a&&pe(new $a(new ArrayBuffer(1)))!=Ls||gr&&pe(new gr)!=Ms||Aa&&pe(Aa.resolve())!=$s||Dn&&pe(new Dn)!=As||xa&&pe(new xa)!=Cs)&&(pe=function(t){var e=hn(t),n=e==Qg?t.constructor:void 0,r=n?dn(n):"";if(r)switch(r){case tm:return Ls;case em:return Ms;case nm:return $s;case rm:return As;case im:return Cs}return e});var am=Object.prototype,om=am.hasOwnProperty;function sm(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&om.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var oi=ye.Uint8Array;function bo(t){var e=new t.constructor(t.byteLength);return new oi(e).set(new oi(t)),e}function lm(t,e){var n=e?bo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var cm=/\w*$/;function um(t){var e=new t.constructor(t.source,cm.exec(t));return e.lastIndex=t.lastIndex,e}var Ds=ce?ce.prototype:void 0,ks=Ds?Ds.valueOf:void 0;function hm(t){return ks?Object(ks.call(t)):{}}function Eu(t,e){var n=e?bo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var dm="[object Boolean]",fm="[object Date]",pm="[object Map]",gm="[object Number]",mm="[object RegExp]",vm="[object Set]",ym="[object String]",_m="[object Symbol]",bm="[object ArrayBuffer]",wm="[object DataView]",Em="[object Float32Array]",Sm="[object Float64Array]",Tm="[object Int8Array]",Om="[object Int16Array]",xm="[object Int32Array]",Mm="[object Uint8Array]",$m="[object Uint8ClampedArray]",Am="[object Uint16Array]",Cm="[object Uint32Array]";function Lm(t,e,n){var r=t.constructor;switch(e){case bm:return bo(t);case dm:case fm:return new r(+t);case wm:return lm(t,n);case Em:case Sm:case Tm:case Om:case xm:case Mm:case $m:case Am:case Cm:return Eu(t,n);case pm:return new r;case gm:case ym:return new r(t);case mm:return um(t);case vm:return new r;case _m:return hm(t)}}function Su(t){return typeof t.constructor=="function"&&!uo(t)?Vf(yo(t)):{}}var Dm="[object Map]";function km(t){return Me(t)&&pe(t)==Dm}var Is=In&&In.isMap,Im=Is?ho(Is):km,Rm="[object Set]";function Nm(t){return Me(t)&&pe(t)==Rm}var Rs=In&&In.isSet,Um=Rs?ho(Rs):Nm,Pm=1,Hm=2,Fm=4,Tu="[object Arguments]",Vm="[object Array]",jm="[object Boolean]",Bm="[object Date]",Gm="[object Error]",Ou="[object Function]",zm="[object GeneratorFunction]",Wm="[object Map]",Ym="[object Number]",xu="[object Object]",Xm="[object RegExp]",qm="[object Set]",Km="[object String]",Zm="[object Symbol]",Jm="[object WeakMap]",Qm="[object ArrayBuffer]",tv="[object DataView]",ev="[object Float32Array]",nv="[object Float64Array]",rv="[object Int8Array]",iv="[object Int16Array]",av="[object Int32Array]",ov="[object Uint8Array]",sv="[object Uint8ClampedArray]",lv="[object Uint16Array]",cv="[object Uint32Array]",vt={};vt[Tu]=vt[Vm]=vt[Qm]=vt[tv]=vt[jm]=vt[Bm]=vt[ev]=vt[nv]=vt[rv]=vt[iv]=vt[av]=vt[Wm]=vt[Ym]=vt[xu]=vt[Xm]=vt[qm]=vt[Km]=vt[Zm]=vt[ov]=vt[sv]=vt[lv]=vt[cv]=!0;vt[Gm]=vt[Ou]=vt[Jm]=!1;function hr(t,e,n,r,i,a){var o,s=e&Pm,l=e&Hm,c=e&Fm;if(n&&(o=i?n(t,r,i,a):n(t)),o!==void 0)return o;if(!ue(t))return t;var u=Wt(t);if(u){if(o=sm(t),!s)return ru(t,o)}else{var h=pe(t),d=h==Ou||h==zm;if(fr(t))return vu(t,s);if(h==xu||h==Tu||d&&!i){if(o=l||d?{}:Su(t),!s)return l?Jg(t,zg(o,t)):Kg(t,Gg(o,t))}else{if(!vt[h])return i?t:{};o=Lm(t,h,s)}}a||(a=new ve);var f=a.get(t);if(f)return f;a.set(t,o),Um(t)?t.forEach(function(m){o.add(hr(m,e,n,m,t,a))}):Im(t)&&t.forEach(function(m,_){o.set(_,hr(m,e,n,_,t,a))});var p=c?l?wu:Ma:l?xr:Or,w=u?void 0:p(t);return Kf(w||t,function(m,_){w&&(_=m,m=t[_]),au(o,_,hr(m,e,n,_,t,a))}),o}var uv=1,hv=4;function Mu(t){return hr(t,uv|hv)}var dv="__lodash_hash_undefined__";function fv(t){return this.__data__.set(t,dv),this}function pv(t){return this.__data__.has(t)}function mr(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ge;++e<n;)this.add(t[e])}mr.prototype.add=mr.prototype.push=fv;mr.prototype.has=pv;function $u(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Au(t,e){return t.has(e)}var gv=1,mv=2;function Cu(t,e,n,r,i,a){var o=n&gv,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(t),u=a.get(e);if(c&&u)return c==e&&u==t;var h=-1,d=!0,f=n&mv?new mr:void 0;for(a.set(t,e),a.set(e,t);++h<s;){var p=t[h],w=e[h];if(r)var m=o?r(w,p,h,e,t,a):r(p,w,h,t,e,a);if(m!==void 0){if(m)continue;d=!1;break}if(f){if(!$u(e,function(_,S){if(!Au(f,S)&&(p===_||i(p,_,n,r,a)))return f.push(S)})){d=!1;break}}else if(!(p===w||i(p,w,n,r,a))){d=!1;break}}return a.delete(t),a.delete(e),d}function vv(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function wo(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var yv=1,_v=2,bv="[object Boolean]",wv="[object Date]",Ev="[object Error]",Sv="[object Map]",Tv="[object Number]",Ov="[object RegExp]",xv="[object Set]",Mv="[object String]",$v="[object Symbol]",Av="[object ArrayBuffer]",Cv="[object DataView]",Ns=ce?ce.prototype:void 0,Yi=Ns?Ns.valueOf:void 0;function Lv(t,e,n,r,i,a,o){switch(n){case Cv:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Av:return!(t.byteLength!=e.byteLength||!a(new oi(t),new oi(e)));case bv:case wv:case Tv:return Sr(+t,+e);case Ev:return t.name==e.name&&t.message==e.message;case Ov:case Mv:return t==e+"";case Sv:var s=vv;case xv:var l=r&yv;if(s||(s=wo),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=_v,o.set(t,e);var u=Cu(s(t),s(e),r,i,a,o);return o.delete(t),u;case $v:if(Yi)return Yi.call(t)==Yi.call(e)}return!1}var Dv=1,kv=Object.prototype,Iv=kv.hasOwnProperty;function Rv(t,e,n,r,i,a){var o=n&Dv,s=Ma(t),l=s.length,c=Ma(e),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var d=s[h];if(!(o?d in e:Iv.call(e,d)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var w=!0;a.set(t,e),a.set(e,t);for(var m=o;++h<l;){d=s[h];var _=t[d],S=e[d];if(r)var E=o?r(S,_,d,e,t,a):r(_,S,d,t,e,a);if(!(E===void 0?_===S||i(_,S,n,r,a):E)){w=!1;break}m||(m=d=="constructor")}if(w&&!m){var y=t.constructor,g=e.constructor;y!=g&&"constructor"in t&&"constructor"in e&&!(typeof y=="function"&&y instanceof y&&typeof g=="function"&&g instanceof g)&&(w=!1)}return a.delete(t),a.delete(e),w}var Nv=1,Us="[object Arguments]",Ps="[object Array]",Nr="[object Object]",Uv=Object.prototype,Hs=Uv.hasOwnProperty;function Pv(t,e,n,r,i,a){var o=Wt(t),s=Wt(e),l=o?Ps:pe(t),c=s?Ps:pe(e);l=l==Us?Nr:l,c=c==Us?Nr:c;var u=l==Nr,h=c==Nr,d=l==c;if(d&&fr(t)){if(!fr(e))return!1;o=!0,u=!1}if(d&&!u)return a||(a=new ve),o||fo(t)?Cu(t,e,n,r,i,a):Lv(t,e,l,n,r,i,a);if(!(n&Nv)){var f=u&&Hs.call(t,"__wrapped__"),p=h&&Hs.call(e,"__wrapped__");if(f||p){var w=f?t.value():t,m=p?e.value():e;return a||(a=new ve),i(w,m,n,r,a)}}return d?(a||(a=new ve),Rv(t,e,n,r,i,a)):!1}function Ci(t,e,n,r,i){return t===e?!0:t==null||e==null||!Me(t)&&!Me(e)?t!==t&&e!==e:Pv(t,e,n,r,Ci,i)}var Hv=1,Fv=2;function Vv(t,e,n,r){var i=n.length,a=i;if(t==null)return!a;for(t=Object(t);i--;){var o=n[i];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=n[i];var s=o[0],l=t[s],c=o[1];if(o[2]){if(l===void 0&&!(s in t))return!1}else{var u=new ve,h;if(!(h===void 0?Ci(c,l,Hv|Fv,r,u):h))return!1}}return!0}function Lu(t){return t===t&&!ue(t)}function jv(t){for(var e=Or(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Lu(i)]}return e}function Du(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function Bv(t){var e=jv(t);return e.length==1&&e[0][2]?Du(e[0][0],e[0][1]):function(n){return n===t||Vv(n,t,e)}}function Gv(t,e){return t!=null&&e in Object(t)}function zv(t,e,n){e=Ai(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var o=Mr(e[r]);if(!(a=t!=null&&n(t,o)))break;t=t[o]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&co(i)&&so(o,i)&&(Wt(t)||dr(t)))}function Wv(t,e){return t!=null&&zv(t,e,Gv)}var Yv=1,Xv=2;function qv(t,e){return po(t)&&Lu(e)?Du(Mr(t),e):function(n){var r=du(n,t);return r===void 0&&r===e?Wv(n,t):Ci(e,r,Yv|Xv)}}function Kv(t){return function(e){return e==null?void 0:e[t]}}function Zv(t){return function(e){return mo(e,t)}}function Jv(t){return po(t)?Kv(Mr(t)):Zv(t)}function Eo(t){return typeof t=="function"?t:t==null?ao:typeof t=="object"?Wt(t)?qv(t[0],t[1]):Bv(t):Jv(t)}function Qv(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var l=o[++i];if(n(a[l],l,a)===!1)break}return e}}var ku=Qv();function Ca(t,e,n){(n!==void 0&&!Sr(t[e],n)||n===void 0&&!(e in t))&&xi(t,e,n)}function La(t){return Me(t)&&Tr(t)}function Da(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function ty(t){return jn(t,xr(t))}function ey(t,e,n,r,i,a,o){var s=Da(t,n),l=Da(e,n),c=o.get(l);if(c){Ca(t,n,c);return}var u=a?a(s,l,n+"",t,e,o):void 0,h=u===void 0;if(h){var d=Wt(l),f=!d&&fr(l),p=!d&&!f&&fo(l);u=l,d||f||p?Wt(s)?u=s:La(s)?u=ru(s):f?(h=!1,u=vu(l,!0)):p?(h=!1,u=Eu(l,!0)):u=[]:gu(l)||dr(l)?(u=s,dr(s)?u=ty(s):(!ue(s)||oo(s))&&(u=Su(l))):h=!1}h&&(o.set(l,u),i(u,l,r,a,o),o.delete(l)),Ca(t,n,u)}function Iu(t,e,n,r,i){t!==e&&ku(e,function(a,o){if(i||(i=new ve),ue(a))ey(t,e,o,n,Iu,r,i);else{var s=r?r(Da(t,o),a,o+"",t,e,i):void 0;s===void 0&&(s=a),Ca(t,o,s)}},xr)}function Ru(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var it=lp(function(t,e,n){Iu(t,e,n)}),ny=1/0,ry=Dn&&1/wo(new Dn([,-0]))[1]==ny?function(t){return new Dn(t)}:Bf,iy=200;function Nu(t,e,n){var r=-1,i=ep,a=t.length,o=!0,s=[],l=s;if(a>=iy){var c=e?null:ry(t);if(c)return wo(c);o=!1,i=Au,l=new mr}else l=e?[]:s;t:for(;++r<a;){var u=t[r],h=e?e(u):u;if(u=u!==0?u:0,o&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(u)}else i(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}var ay=lo(function(t){var e=Ru(t);return La(e)&&(e=void 0),Nu(fu(t,1,La,!0),Eo(e))});function ka(t){return t&&t.length?Nu(t):[]}function Wr(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function oy(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function So(t){let e,n,r;t.length!==2?(e=Wr,n=(s,l)=>Wr(t(s),l),r=(s,l)=>t(s)-l):(e=t===Wr||t===oy?t:sy,n=t,r=t);function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(s[h],l)<0?c=h+1:u=h}while(c<u)}return c}function a(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(s[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(s,l,c=0,u=s.length){const h=i(s,l,c,u-1);return h>c&&r(s[h-1],l)>-r(s[h],l)?h-1:h}return{left:i,center:o,right:a}}function sy(){return 0}function ly(t){return t===null?NaN:+t}const cy=So(Wr),Uu=cy.right;So(ly).center;function Xi(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}let Fs=class extends Map{constructor(e,n=dy){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Vs(this,e))}has(e){return super.has(Vs(this,e))}set(e,n){return super.set(uy(this,e),n)}delete(e){return super.delete(hy(this,e))}};function Vs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function uy({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function hy({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function dy(t){return t!==null&&typeof t=="object"?t.valueOf():t}const fy=Math.sqrt(50),py=Math.sqrt(10),gy=Math.sqrt(2);function si(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=fy?10:a>=py?5:a>=gy?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?si(t,e,n*2):[s,l,c]}function Pu(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?si(e,t,n):si(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function Rn(t,e,n){return e=+e,t=+t,n=+n,si(t,e,n)[2]}function Ia(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Rn(e,t,n):Rn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}var my={value:()=>{}};function To(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Yr(n)}function Yr(t){this._=t}function vy(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Yr.prototype=To.prototype={constructor:Yr,on:function(t,e){var n=this._,r=vy(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=yy(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=js(n[i],t.name,e);else if(e==null)for(i in n)n[i]=js(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Yr(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function yy(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function js(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=my,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ra="http://www.w3.org/1999/xhtml";const Bs={svg:"http://www.w3.org/2000/svg",xhtml:Ra,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Li(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Bs.hasOwnProperty(e)?{space:Bs[e],local:t}:t}function _y(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ra&&e.documentElement.namespaceURI===Ra?e.createElement(t):e.createElementNS(n,t)}}function by(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Hu(t){var e=Li(t);return(e.local?by:_y)(e)}function wy(){}function Oo(t){return t==null?wy:function(){return this.querySelector(t)}}function Ey(t){typeof t!="function"&&(t=Oo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=a[u])&&(c=t.call(l,l.__data__,u,a))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new ie(r,this._parents)}function Sy(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ty(){return[]}function Fu(t){return t==null?Ty:function(){return this.querySelectorAll(t)}}function Oy(t){return function(){return Sy(t.apply(this,arguments))}}function xy(t){typeof t=="function"?t=Oy(t):t=Fu(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new ie(r,i)}function Vu(t){return function(){return this.matches(t)}}function ju(t){return function(e){return e.matches(t)}}var My=Array.prototype.find;function $y(t){return function(){return My.call(this.children,t)}}function Ay(){return this.firstElementChild}function Cy(t){return this.select(t==null?Ay:$y(typeof t=="function"?t:ju(t)))}var Ly=Array.prototype.filter;function Dy(){return Array.from(this.children)}function ky(t){return function(){return Ly.call(this.children,t)}}function Iy(t){return this.selectAll(t==null?Dy:ky(typeof t=="function"?t:ju(t)))}function Ry(t){typeof t!="function"&&(t=Vu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,c=0;c<o;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&s.push(l);return new ie(r,this._parents)}function Bu(t){return new Array(t.length)}function Ny(){return new ie(this._enter||this._groups.map(Bu),this._parents)}function li(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}li.prototype={constructor:li,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Uy(t){return function(){return t}}function Py(t,e,n,r,i,a){for(var o=0,s,l=e.length,c=a.length;o<c;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new li(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function Hy(t,e,n,r,i,a,o){var s,l,c=new Map,u=e.length,h=a.length,d=new Array(u),f;for(s=0;s<u;++s)(l=e[s])&&(d[s]=f=o.call(l,l.__data__,s,e)+"",c.has(f)?i[s]=l:c.set(f,l));for(s=0;s<h;++s)f=o.call(t,a[s],s,a)+"",(l=c.get(f))?(r[s]=l,l.__data__=a[s],c.delete(f)):n[s]=new li(t,a[s]);for(s=0;s<u;++s)(l=e[s])&&c.get(d[s])===l&&(i[s]=l)}function Fy(t){return t.__data__}function Vy(t,e){if(!arguments.length)return Array.from(this,Fy);var n=e?Hy:Py,r=this._parents,i=this._groups;typeof t!="function"&&(t=Uy(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=r[c],h=i[c],d=h.length,f=jy(t.call(u,u&&u.__data__,c,r)),p=f.length,w=s[c]=new Array(p),m=o[c]=new Array(p),_=l[c]=new Array(d);n(u,h,w,m,_,f,e);for(var S=0,E=0,y,g;S<p;++S)if(y=w[S]){for(S>=E&&(E=S+1);!(g=m[E])&&++E<p;);y._next=g||null}}return o=new ie(o,r),o._enter=s,o._exit=l,o}function jy(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function By(){return new ie(this._exit||this._groups.map(Bu),this._parents)}function Gy(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function zy(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],h=c.length,d=s[l]=new Array(h),f,p=0;p<h;++p)(f=c[p]||u[p])&&(d[p]=f);for(;l<i;++l)s[l]=n[l];return new ie(s,this._parents)}function Wy(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Yy(t){t||(t=Xy);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),c,u=0;u<s;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new ie(i,this._parents).order()}function Xy(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function qy(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ky(){return Array.from(this)}function Zy(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Jy(){let t=0;for(const e of this)++t;return t}function Qy(){return!this.node()}function t1(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function e1(t){return function(){this.removeAttribute(t)}}function n1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function r1(t,e){return function(){this.setAttribute(t,e)}}function i1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function a1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function o1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function s1(t,e){var n=Li(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?n1:e1:typeof e=="function"?n.local?o1:a1:n.local?i1:r1)(n,e))}function Gu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function l1(t){return function(){this.style.removeProperty(t)}}function c1(t,e,n){return function(){this.style.setProperty(t,e,n)}}function u1(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function h1(t,e,n){return arguments.length>1?this.each((e==null?l1:typeof e=="function"?u1:c1)(t,e,n??"")):Nn(this.node(),t)}function Nn(t,e){return t.style.getPropertyValue(e)||Gu(t).getComputedStyle(t,null).getPropertyValue(e)}function d1(t){return function(){delete this[t]}}function f1(t,e){return function(){this[t]=e}}function p1(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function g1(t,e){return arguments.length>1?this.each((e==null?d1:typeof e=="function"?p1:f1)(t,e)):this.node()[t]}function zu(t){return t.trim().split(/^|\s+/)}function xo(t){return t.classList||new Wu(t)}function Wu(t){this._node=t,this._names=zu(t.getAttribute("class")||"")}Wu.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Yu(t,e){for(var n=xo(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Xu(t,e){for(var n=xo(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function m1(t){return function(){Yu(this,t)}}function v1(t){return function(){Xu(this,t)}}function y1(t,e){return function(){(e.apply(this,arguments)?Yu:Xu)(this,t)}}function _1(t,e){var n=zu(t+"");if(arguments.length<2){for(var r=xo(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?y1:e?m1:v1)(n,e))}function b1(){this.textContent=""}function w1(t){return function(){this.textContent=t}}function E1(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function S1(t){return arguments.length?this.each(t==null?b1:(typeof t=="function"?E1:w1)(t)):this.node().textContent}function T1(){this.innerHTML=""}function O1(t){return function(){this.innerHTML=t}}function x1(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function M1(t){return arguments.length?this.each(t==null?T1:(typeof t=="function"?x1:O1)(t)):this.node().innerHTML}function $1(){this.nextSibling&&this.parentNode.appendChild(this)}function A1(){return this.each($1)}function C1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function L1(){return this.each(C1)}function D1(t){var e=typeof t=="function"?t:Hu(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function k1(){return null}function I1(t,e){var n=typeof t=="function"?t:Hu(t),r=e==null?k1:typeof e=="function"?e:Oo(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function R1(){var t=this.parentNode;t&&t.removeChild(this)}function N1(){return this.each(R1)}function U1(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function P1(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function H1(t){return this.select(t?P1:U1)}function F1(t){return arguments.length?this.property("__data__",t):this.node().__data__}function V1(t){return function(e){t.call(this,e,this.__data__)}}function j1(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function B1(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function G1(t,e,n){return function(){var r=this.__on,i,a=V1(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function z1(t,e,n){var r=j1(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(i=0,u=s[l];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=e?G1:B1,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function qu(t,e,n){var r=Gu(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function W1(t,e){return function(){return qu(this,t,e)}}function Y1(t,e){return function(){return qu(this,t,e.apply(this,arguments))}}function X1(t,e){return this.each((typeof e=="function"?Y1:W1)(t,e))}function*q1(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Ku=[null];function ie(t,e){this._groups=t,this._parents=e}function $r(){return new ie([[document.documentElement]],Ku)}function K1(){return this}ie.prototype=$r.prototype={constructor:ie,select:Ey,selectAll:xy,selectChild:Cy,selectChildren:Iy,filter:Ry,data:Vy,enter:Ny,exit:By,join:Gy,merge:zy,selection:K1,order:Wy,sort:Yy,call:qy,nodes:Ky,node:Zy,size:Jy,empty:Qy,each:t1,attr:s1,style:h1,property:g1,classed:_1,text:S1,html:M1,raise:A1,lower:L1,append:D1,insert:I1,remove:N1,clone:H1,datum:F1,on:z1,dispatch:X1,[Symbol.iterator]:q1};function Z1(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Un(t,e){if(t=Z1(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Mo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Zu(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ar(){}var vr=.7,ci=1/vr,kn="\\s*([+-]?\\d+)\\s*",yr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",J1=/^#([0-9a-f]{3,8})$/,Q1=new RegExp(`^rgb\\(${kn},${kn},${kn}\\)$`),t0=new RegExp(`^rgb\\(${xe},${xe},${xe}\\)$`),e0=new RegExp(`^rgba\\(${kn},${kn},${kn},${yr}\\)$`),n0=new RegExp(`^rgba\\(${xe},${xe},${xe},${yr}\\)$`),r0=new RegExp(`^hsl\\(${yr},${xe},${xe}\\)$`),i0=new RegExp(`^hsla\\(${yr},${xe},${xe},${yr}\\)$`),Gs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mo(Ar,sn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zs,formatHex:zs,formatHex8:a0,formatHsl:o0,formatRgb:Ws,toString:Ws});function zs(){return this.rgb().formatHex()}function a0(){return this.rgb().formatHex8()}function o0(){return Ju(this).formatHsl()}function Ws(){return this.rgb().formatRgb()}function sn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=J1.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ys(e):n===3?new Zt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ur(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ur(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Q1.exec(t))?new Zt(e[1],e[2],e[3],1):(e=t0.exec(t))?new Zt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=e0.exec(t))?Ur(e[1],e[2],e[3],e[4]):(e=n0.exec(t))?Ur(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=r0.exec(t))?Ks(e[1],e[2]/100,e[3]/100,1):(e=i0.exec(t))?Ks(e[1],e[2]/100,e[3]/100,e[4]):Gs.hasOwnProperty(t)?Ys(Gs[t]):t==="transparent"?new Zt(NaN,NaN,NaN,0):null}function Ys(t){return new Zt(t>>16&255,t>>8&255,t&255,1)}function Ur(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zt(t,e,n,r)}function s0(t){return t instanceof Ar||(t=sn(t)),t?(t=t.rgb(),new Zt(t.r,t.g,t.b,t.opacity)):new Zt}function Na(t,e,n,r){return arguments.length===1?s0(t):new Zt(t,e,n,r??1)}function Zt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Mo(Zt,Na,Zu(Ar,{brighter(t){return t=t==null?ci:Math.pow(ci,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vr:Math.pow(vr,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zt(an(this.r),an(this.g),an(this.b),ui(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xs,formatHex:Xs,formatHex8:l0,formatRgb:qs,toString:qs}));function Xs(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}`}function l0(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}${rn((isNaN(this.opacity)?1:this.opacity)*255)}`}function qs(){const t=ui(this.opacity);return`${t===1?"rgb(":"rgba("}${an(this.r)}, ${an(this.g)}, ${an(this.b)}${t===1?")":`, ${t})`}`}function ui(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function an(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function rn(t){return t=an(t),(t<16?"0":"")+t.toString(16)}function Ks(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new me(t,e,n,r)}function Ju(t){if(t instanceof me)return new me(t.h,t.s,t.l,t.opacity);if(t instanceof Ar||(t=sn(t)),!t)return new me;if(t instanceof me)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new me(o,s,l,t.opacity)}function c0(t,e,n,r){return arguments.length===1?Ju(t):new me(t,e,n,r??1)}function me(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Mo(me,c0,Zu(Ar,{brighter(t){return t=t==null?ci:Math.pow(ci,t),new me(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vr:Math.pow(vr,t),new me(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zt(qi(t>=240?t-240:t+120,i,r),qi(t,i,r),qi(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new me(Zs(this.h),Pr(this.s),Pr(this.l),ui(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ui(this.opacity);return`${t===1?"hsl(":"hsla("}${Zs(this.h)}, ${Pr(this.s)*100}%, ${Pr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Zs(t){return t=(t||0)%360,t<0?t+360:t}function Pr(t){return Math.max(0,Math.min(1,t||0))}function qi(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const $o=t=>()=>t;function u0(t,e){return function(n){return t+n*e}}function h0(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function d0(t){return(t=+t)==1?Qu:function(e,n){return n-e?h0(e,n,t):$o(isNaN(e)?n:e)}}function Qu(t,e){var n=e-t;return n?u0(t,n):$o(isNaN(t)?e:t)}const hi=function t(e){var n=d0(e);function r(i,a){var o=n((i=Na(i)).r,(a=Na(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),c=Qu(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function f0(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function p0(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function g0(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Cr(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function m0(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ge(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function v0(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Cr(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Ua=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ki=new RegExp(Ua.source,"g");function y0(t){return function(){return t}}function _0(t){return function(e){return t(e)+""}}function th(t,e){var n=Ua.lastIndex=Ki.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Ua.exec(t))&&(i=Ki.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:ge(r,i)})),n=Ki.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?_0(l[0].x):y0(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)s[(h=l[u]).i]=h.x(c);return s.join("")})}function Cr(t,e){var n=typeof e,r;return e==null||n==="boolean"?$o(e):(n==="number"?ge:n==="string"?(r=sn(e))?(e=r,hi):th:e instanceof sn?hi:e instanceof Date?m0:p0(e)?f0:Array.isArray(e)?g0:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?v0:ge)(t,e)}function b0(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Js=180/Math.PI,eh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nh(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Js,skewX:Math.atan(l)*Js,scaleX:o,scaleY:s}}var Hr;function w0(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?eh:nh(e.a,e.b,e.c,e.d,e.e,e.f)}function E0(t){return t==null||(Hr||(Hr=document.createElementNS("http://www.w3.org/2000/svg","g")),Hr.setAttribute("transform",t),!(t=Hr.transform.baseVal.consolidate()))?eh:(t=t.matrix,nh(t.a,t.b,t.c,t.d,t.e,t.f))}function rh(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,u,h,d,f,p){if(c!==h||u!==d){var w=f.push("translate(",null,e,null,n);p.push({i:w-4,x:ge(c,h)},{i:w-2,x:ge(u,d)})}else(h||d)&&f.push("translate("+h+e+d+n)}function o(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:ge(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function s(c,u,h,d){c!==u?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:ge(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,d,f,p){if(c!==h||u!==d){var w=f.push(i(f)+"scale(",null,",",null,")");p.push({i:w-4,x:ge(c,h)},{i:w-2,x:ge(u,d)})}else(h!==1||d!==1)&&f.push(i(f)+"scale("+h+","+d+")")}return function(c,u){var h=[],d=[];return c=t(c),u=t(u),a(c.translateX,c.translateY,u.translateX,u.translateY,h,d),o(c.rotate,u.rotate,h,d),s(c.skewX,u.skewX,h,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,d),c=u=null,function(f){for(var p=-1,w=d.length,m;++p<w;)h[(m=d[p]).i]=m.x(f);return h.join("")}}}var S0=rh(w0,"px, ","px)","deg)"),T0=rh(E0,", ",")",")"),Pn=0,sr=0,Zn=0,ih=1e3,di,lr,fi=0,ln=0,Di=0,_r=typeof performance=="object"&&performance.now?performance:Date,ah=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ao(){return ln||(ah(O0),ln=_r.now()+Di)}function O0(){ln=0}function pi(){this._call=this._time=this._next=null}pi.prototype=oh.prototype={constructor:pi,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ao():+n)+(e==null?0:+e),!this._next&&lr!==this&&(lr?lr._next=this:di=this,lr=this),this._call=t,this._time=n,Pa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pa())}};function oh(t,e,n){var r=new pi;return r.restart(t,e,n),r}function x0(){Ao(),++Pn;for(var t=di,e;t;)(e=ln-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Pn}function Qs(){ln=(fi=_r.now())+Di,Pn=sr=0;try{x0()}finally{Pn=0,$0(),ln=0}}function M0(){var t=_r.now(),e=t-fi;e>ih&&(Di-=e,fi=t)}function $0(){for(var t,e=di,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:di=n);lr=t,Pa(r)}function Pa(t){if(!Pn){sr&&(sr=clearTimeout(sr));var e=t-ln;e>24?(t<1/0&&(sr=setTimeout(Qs,t-_r.now()-Di)),Zn&&(Zn=clearInterval(Zn))):(Zn||(fi=_r.now(),Zn=setInterval(M0,ih)),Pn=1,ah(Qs))}}function tl(t,e,n){var r=new pi;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var A0=To("start","end","cancel","interrupt"),C0=[],sh=0,el=1,Ha=2,Xr=3,nl=4,Fa=5,qr=6;function ki(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;L0(t,n,{name:e,index:r,group:i,on:A0,tween:C0,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:sh})}function Co(t,e){var n=_e(t,e);if(n.state>sh)throw new Error("too late; already scheduled");return n}function Ae(t,e){var n=_e(t,e);if(n.state>Xr)throw new Error("too late; already running");return n}function _e(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function L0(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=oh(a,0,n.time);function a(c){n.state=el,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,h,d,f;if(n.state!==el)return l();for(u in r)if(f=r[u],f.name===n.name){if(f.state===Xr)return tl(o);f.state===nl?(f.state=qr,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=qr,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(tl(function(){n.state===Xr&&(n.state=nl,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=Ha,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ha){for(n.state=Xr,i=new Array(d=n.tween.length),u=0,h=-1;u<d;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=f);i.length=h+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Fa,1),h=-1,d=i.length;++h<d;)i[h].call(t,u);n.state===Fa&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=qr,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Va(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>Ha&&r.state<Fa,r.state=qr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function D0(t){return this.each(function(){Va(this,t)})}function k0(t,e){var n,r;return function(){var i=Ae(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function I0(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Ae(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function R0(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=_e(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?k0:I0)(n,t,e))}function Lo(t,e,n){var r=t._id;return t.each(function(){var i=Ae(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return _e(i,r).value[e]}}function lh(t,e){var n;return(typeof e=="number"?ge:e instanceof sn?hi:(n=sn(e))?(e=n,hi):th)(t,e)}function N0(t){return function(){this.removeAttribute(t)}}function U0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function P0(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function H0(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function F0(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function V0(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function j0(t,e){var n=Li(t),r=n==="transform"?T0:lh;return this.attrTween(t,typeof e=="function"?(n.local?V0:F0)(n,r,Lo(this,"attr."+t,e)):e==null?(n.local?U0:N0)(n):(n.local?H0:P0)(n,r,e))}function B0(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function G0(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function z0(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&G0(t,a)),n}return i._value=e,i}function W0(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&B0(t,a)),n}return i._value=e,i}function Y0(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Li(t);return this.tween(n,(r.local?z0:W0)(r,e))}function X0(t,e){return function(){Co(this,t).delay=+e.apply(this,arguments)}}function q0(t,e){return e=+e,function(){Co(this,t).delay=e}}function K0(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?X0:q0)(e,t)):_e(this.node(),e).delay}function Z0(t,e){return function(){Ae(this,t).duration=+e.apply(this,arguments)}}function J0(t,e){return e=+e,function(){Ae(this,t).duration=e}}function Q0(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Z0:J0)(e,t)):_e(this.node(),e).duration}function t_(t,e){if(typeof e!="function")throw new Error;return function(){Ae(this,t).ease=e}}function e_(t){var e=this._id;return arguments.length?this.each(t_(e,t)):_e(this.node(),e).ease}function n_(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ae(this,t).ease=n}}function r_(t){if(typeof t!="function")throw new Error;return this.each(n_(this._id,t))}function i_(t){typeof t!="function"&&(t=Vu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,c=0;c<o;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&s.push(l);return new Fe(r,this._parents,this._name,this._id)}function a_(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],c=n[s],u=l.length,h=o[s]=new Array(u),d,f=0;f<u;++f)(d=l[f]||c[f])&&(h[f]=d);for(;s<r;++s)o[s]=e[s];return new Fe(o,this._parents,this._name,this._id)}function o_(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function s_(t,e,n){var r,i,a=o_(e)?Co:Ae;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function l_(t,e){var n=this._id;return arguments.length<2?_e(this.node(),n).on.on(t):this.each(s_(n,t,e))}function c_(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function u_(){return this.on("end.remove",c_(this._id))}function h_(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Oo(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,c=a[o]=new Array(l),u,h,d=0;d<l;++d)(u=s[d])&&(h=t.call(u,u.__data__,d,s))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h,ki(c[d],e,n,d,c,_e(u,n)));return new Fe(a,this._parents,e,n)}function d_(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Fu(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var d=t.call(u,u.__data__,h,l),f,p=_e(u,n),w=0,m=d.length;w<m;++w)(f=d[w])&&ki(f,e,n,w,d,p);a.push(d),o.push(u)}return new Fe(a,o,e,n)}var f_=$r.prototype.constructor;function p_(){return new f_(this._groups,this._parents)}function g_(t,e){var n,r,i;return function(){var a=Nn(this,t),o=(this.style.removeProperty(t),Nn(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function ch(t){return function(){this.style.removeProperty(t)}}function m_(t,e,n){var r,i=n+"",a;return function(){var o=Nn(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function v_(t,e,n){var r,i,a;return function(){var o=Nn(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),Nn(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}function y_(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var l=Ae(this,t),c=l.on,u=l.value[a]==null?s||(s=ch(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function __(t,e,n){var r=(t+="")=="transform"?S0:lh;return e==null?this.styleTween(t,g_(t,r)).on("end.style."+t,ch(t)):typeof e=="function"?this.styleTween(t,v_(t,r,Lo(this,"style."+t,e))).each(y_(this._id,t)):this.styleTween(t,m_(t,r,e),n).on("end.style."+t,null)}function b_(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function w_(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&b_(t,o,n)),r}return a._value=e,a}function E_(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,w_(t,e,n??""))}function S_(t){return function(){this.textContent=t}}function T_(t){return function(){var e=t(this);this.textContent=e??""}}function O_(t){return this.tween("text",typeof t=="function"?T_(Lo(this,"text",t)):S_(t==null?"":t+""))}function x_(t){return function(e){this.textContent=t.call(this,e)}}function M_(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&x_(i)),e}return r._value=t,r}function $_(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,M_(t))}function A_(){for(var t=this._name,e=this._id,n=uh(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,c=0;c<s;++c)if(l=o[c]){var u=_e(l,e);ki(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Fe(r,this._parents,t,n)}function C_(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var c=Ae(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),c.on=e}),i===0&&a()})}var L_=0;function Fe(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function uh(){return++L_}var Re=$r.prototype;Fe.prototype={constructor:Fe,select:h_,selectAll:d_,selectChild:Re.selectChild,selectChildren:Re.selectChildren,filter:i_,merge:a_,selection:p_,transition:A_,call:Re.call,nodes:Re.nodes,node:Re.node,size:Re.size,empty:Re.empty,each:Re.each,on:l_,attr:j0,attrTween:Y0,style:__,styleTween:E_,text:O_,textTween:$_,remove:u_,tween:R0,delay:K0,duration:Q0,ease:e_,easeVarying:r_,end:C_,[Symbol.iterator]:Re[Symbol.iterator]};function hh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var D_={time:null,delay:0,duration:250,ease:hh};function k_(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function I_(t){var e,n;t instanceof Fe?(e=t._id,t=t._name):(e=uh(),(n=D_).time=Ao(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&ki(l,t,e,c,o,n||k_(l,e));return new Fe(r,this._parents,t,e)}$r.prototype.interrupt=D0;$r.prototype.transition=I_;function R_(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function gi(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Hn(t){return t=gi(Math.abs(t)),t?t[1]:NaN}function N_(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function U_(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var P_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mi(t){if(!(e=P_.exec(t)))throw new Error("invalid format: "+t);var e;return new Do({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}mi.prototype=Do.prototype;function Do(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Do.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function H_(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var dh;function F_(t,e){var n=gi(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(dh=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+gi(t,Math.max(0,e+a-1))[0]}function rl(t,e){var n=gi(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const il={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:R_,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>rl(t*100,e),r:rl,s:F_,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function al(t){return t}var ol=Array.prototype.map,sl=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function V_(t){var e=t.grouping===void 0||t.thousands===void 0?al:N_(ol.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?al:U_(ol.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=mi(h);var d=h.fill,f=h.align,p=h.sign,w=h.symbol,m=h.zero,_=h.width,S=h.comma,E=h.precision,y=h.trim,g=h.type;g==="n"?(S=!0,g="g"):il[g]||(E===void 0&&(E=12),y=!0,g="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var b=w==="$"?n:w==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",A=w==="$"?r:/[%p]/.test(g)?o:"",L=il[g],x=/[defgprs%]/.test(g);E=E===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function V($){var G=b,C=A,R,rt,X;if(g==="c")C=L($)+C,$="";else{$=+$;var et=$<0||1/$<0;if($=isNaN($)?l:L(Math.abs($),E),y&&($=H_($)),et&&+$==0&&p!=="+"&&(et=!1),G=(et?p==="("?p:s:p==="-"||p==="("?"":p)+G,C=(g==="s"?sl[8+dh/3]:"")+C+(et&&p==="("?")":""),x){for(R=-1,rt=$.length;++R<rt;)if(X=$.charCodeAt(R),48>X||X>57){C=(X===46?i+$.slice(R+1):$.slice(R))+C,$=$.slice(0,R);break}}}S&&!m&&($=e($,1/0));var F=G.length+$.length+C.length,tt=F<_?new Array(_-F+1).join(d):"";switch(S&&m&&($=e(tt+$,tt.length?_-C.length:1/0),tt=""),f){case"<":$=G+$+C+tt;break;case"=":$=G+tt+$+C;break;case"^":$=tt.slice(0,F=tt.length>>1)+G+$+C+tt.slice(F);break;default:$=tt+G+$+C;break}return a($)}return V.toString=function(){return h+""},V}function u(h,d){var f=c((h=mi(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Hn(d)/3)))*3,w=Math.pow(10,-p),m=sl[8+p/3];return function(_){return f(w*_)+m}}return{format:c,formatPrefix:u}}var Fr,fh,ph;j_({thousands:",",grouping:[3],currency:["$",""]});function j_(t){return Fr=V_(t),fh=Fr.format,ph=Fr.formatPrefix,Fr}function B_(t){return Math.max(0,-Hn(Math.abs(t)))}function G_(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hn(e)/3)))*3-Hn(Math.abs(t)))}function z_(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Hn(e)-Hn(t))+1}function Ii(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const ll=Symbol("implicit");function ko(){var t=new Fs,e=[],n=[],r=ll;function i(a){let o=t.get(a);if(o===void 0){if(r!==ll)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Fs;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return ko(e,n).unknown(r)},Ii.apply(i,arguments),i}function W_(t){return function(){return t}}function Y_(t){return+t}var cl=[0,1];function $n(t){return t}function ja(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:W_(isNaN(e)?NaN:.5)}function X_(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function q_(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=ja(i,r),a=n(o,a)):(r=ja(r,i),a=n(a,o)),function(s){return a(r(s))}}function K_(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=ja(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=Uu(t,s,1,r)-1;return a[l](i[l](s))}}function gh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Z_(){var t=cl,e=cl,n=Cr,r,i,a,o=$n,s,l,c;function u(){var d=Math.min(t.length,e.length);return o!==$n&&(o=X_(t[0],t[d-1])),s=d>2?K_:q_,l=c=null,h}function h(d){return d==null||isNaN(d=+d)?a:(l||(l=s(t.map(r),e,n)))(r(o(d)))}return h.invert=function(d){return o(i((c||(c=s(e,t.map(r),ge)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,Y_),u()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),n=b0,u()},h.clamp=function(d){return arguments.length?(o=d?!0:$n,u()):o!==$n},h.interpolate=function(d){return arguments.length?(n=d,u()):n},h.unknown=function(d){return arguments.length?(a=d,h):a},function(d,f){return r=d,i=f,u()}}function mh(){return Z_()($n,$n)}function J_(t,e,n,r){var i=Ia(t,e,n),a;switch(r=mi(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=G_(i,o))&&(r.precision=a),ph(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=z_(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=B_(i))&&(r.precision=a-(r.type==="%")*2);break}}return fh(r)}function Q_(t){var e=t.domain;return t.ticks=function(n){var r=e();return Pu(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return J_(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,c,u=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);u-- >0;){if(c=Rn(o,s,n),c===l)return r[i]=o,r[a]=s,e(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function Ba(){var t=mh();return t.copy=function(){return gh(t,Ba())},Ii.apply(t,arguments),Q_(t)}function cr(t,e,n){this.k=t,this.x=e,this.y=n}cr.prototype={constructor:cr,scale:function(t){return t===1?this:new cr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new cr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};cr.prototype;const ne="cds",Ue={opacity:{unselected:.05,selected:.4}},ul={duration:1e3,ease:hh},tb={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},depth:2},eb={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},nb={defaultBins:10},Rt={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},Zi={opacity:{unselected:.3,selected:1}},yt={radiusOffset:-15,innerRadius:2,padAngle:.007,hoverArc:{outerRadiusOffset:3},xOffset:30,yOffset:20,yOffsetCallout:10,callout:{minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2}},hl={default:{size:24}},dl={defaultOffset:4,horizontalOffset:10},fl={default:{duration:300},pie_slice_mouseover:{duration:100},pie_slice_mouseout:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},pl={height:{[ii.GRAPH_VIEW]:32,[ii.SLIDER_VIEW]:10},spacerHeight:8},rb=[{type:Lt.RADIUS,name:"Radius"},{type:Lt.AREA,name:"Poor area"},{type:Lt.AREA,name:"Satisfactory area"},{type:Lt.AREA,name:"Great area"},{type:Lt.QUARTILE,name:"Quartiles"}],An={type:Oe.END_LINE,threshold:16,numCharacter:14},ib={code:typeof navigator<"u"&&(navigator==null?void 0:navigator.language)||"en-US",number:(t,e=(navigator==null?void 0:navigator.language)||"en-US")=>t.toLocaleString(e),date:(t,e=(navigator==null?void 0:navigator.language)||"en-US",n={},r=null)=>r||t.toLocaleDateString(e,n),time:(t,e=(navigator==null?void 0:navigator.language)||"en-US",n={},r=null)=>r||t.toLocaleTimeString(e,n),optionsObject:{"15seconds":{primary:{"MMM d, pp":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"MMM d, h:mm:ss.SSS a":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},secondary:{pp:{hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"h:mm:ss.SSS a":{hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},type:"time"},minute:{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},"30minutes":{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},hourly:{primary:{"MMM d, hh a":{month:"short",day:"numeric",hour:"2-digit",hourCycle:"h12"}},secondary:{"hh a":{hour:"2-digit",hourCycle:"h12"}},type:"time"},daily:{primary:{"MMM d":{month:"short",day:"numeric"}},secondary:{d:{day:"numeric"}},type:"date"},weekly:{primary:{"eee, MMM d":{weekday:"short",month:"short",day:"numeric"}},secondary:{eee:{weekday:"short"}},type:"date"},monthly:{primary:{"MMM yyyy":{month:"short",year:"numeric"}},secondary:{MMM:{month:"short"}},type:"date"},quarterly:{primary:{},secondary:{},type:"date"},yearly:{primary:{yyyy:{year:"numeric"}},secondary:{yyyy:{year:"numeric"}},type:"date"}},translations:{group:"Group",total:"Total",meter:{title:""},tabularRep:{title:"Tabular representation",downloadAsCSV:"Download as CSV"},toolbar:{exportAsCSV:"Export to CSV",exportAsJPG:"Export to JPG",exportAsPNG:"Export to PNG",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",moreOptions:"More options",makeFullScreen:"Make fullscreen",exitFullScreen:"Exit fullscreen",showAsTable:"Show as table"}}},ab={enabled:!0,position:Xc.BOTTOM,clickable:!0,truncation:An,alignment:re.LEFT,order:null,additionalItems:[]},ob={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},sb={enabled:!0},vh={enabled:!0,showTotal:!0,truncation:An,groupLabel:"Group"},yh={top:{visible:!0,includeZero:!0,truncation:An},bottom:{visible:!0,includeZero:!0,truncation:An},left:{visible:!0,includeZero:!0,truncation:An},right:{visible:!0,includeZero:!0,truncation:An}},Ri={addSpaceOnEdges:1,showDayName:!1,localeObject:pf,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}};let _h=!1;try{_h=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}catch(t){console.warn("Fullscreen capabilities check failed: ",t.message)}const Yt={width:null,height:null,resizable:!0,theme:Yc.WHITE,tooltip:vh,legend:ab,locale:ib,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:gt.SHOW_AS_DATATABLE},..._h?[{type:gt.MAKE_FULLSCREEN}]:[],{type:gt.EXPORT_CSV},{type:gt.EXPORT_PNG},{type:gt.EXPORT_JPG}]}},lb=it({},Yt,{thematic:{projection:Jc.geoNaturalEarth1}}),Ni=it({},Yt,{axes:yh,timeScale:Ri,grid:ob,ruler:sb,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:ii.GRAPH_VIEW}}}),cn=it({},Ni,{bars:{maxWidth:16,spacingFactor:.25},timeScale:it(Ri,{addSpaceOnEdges:1})});it({},cn,{});it({},cn,{});it({},cn,{bars:it({},cn.bars,{dividerSize:1.5})});it({},cn,{});const cb=it({},Ni,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),ub=it({},cb,{points:{radius:3,filled:!1,enabled:!0}});it({},ub,{timeScale:it(Ri,{addSpaceOnEdges:0})});it({},Ni,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:t=>{const e=Math.min(t.width,t.height);return[e*3/400,e*25/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:Lt.RADIUS,name:"Radius"}]}});it({},Ni,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:Lt.AREA,name:"Poor area"},{type:Lt.AREA,name:"Satisfactory area"},{type:Lt.AREA,name:"Great area"},{type:Lt.QUARTILE,name:"Quartiles"}]}});it({},cn,{bars:{dividerSize:1.5},timeScale:it(Ri,{addSpaceOnEdges:0})});it({},Yt,{tooltip:it({},vh,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:t=>{const e=Math.min(t.width,t.height);return[e*20/400,e*75/400]},wordMapsTo:"word"}});const bh=it({},Yt,{pie:{labels:{formatter:null,enabled:!0},alignment:re.LEFT,sortFunction:null,valueMapsTo:"value"}});it({},Yt,{legend:{enabled:!1},gauge:{type:Kc.SEMI,arcWidth:16,deltaArrow:{size:t=>t/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:t=>t/8,valueFontSize:t=>t/2.5,alignment:re.LEFT}});it({},bh,{donut:{center:{numberFontSize:t=>`${Math.min(t/100*24,24)}px`,titleFontSize:t=>`${Math.min(t/100*15,15)}px`,titleYPosition:t=>Math.min(t/80*20,20)},alignment:re.LEFT}});const hb=it({},Yt,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}});it({},hb,{legend:{enabled:!0}});it({},Yt,{radar:{axes:{angle:"key",value:"value"},alignment:re.LEFT},tooltip:{gridline:{enabled:!0}}});it({},cn,{comboChartTypes:[]});it({tree:{type:qc.TREE}},Yt,{});it({},Yt,{data:it(Yt.data,{groupMapsTo:"name"})});it({},Yt,tb,{data:it(Yt.data,{groupMapsTo:"name"})});it({},Yt,{alluvial:{data:it(Yt.data,{groupMapsTo:"source"}),nodeAlignment:re.CENTER,nodePadding:24,monochrome:!1,nodes:[]}});it({},Yt,{axes:yh,heatmap:{divider:{state:Zc.AUTO},colorLegend:{type:"linear"}}});it({},lb,{choropleth:{colorLegend:{type:"linear"}}});const db={pieChart:bh};function fb(t,e,n){let r=null;return function(...i){const a=this;a.mousePosition=Un(i[0],n),clearTimeout(r),r=setTimeout(function(){t.apply(a,i)},e)}}function pb(t,e){var n;const r=Mu(t),i=Object.keys(e.axes||{});(n=e==null?void 0:e.toolbar)!=null&&n.controls&&delete r.toolbar.controls,i.length===0&&delete r.axes;for(const a in r.axes)if(i.includes(a)){const o=e.axes[a];if((o.primary||o.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://charts.carbondesignsystem.com/"),o.mapsTo==null){const l=o.scaleType;l==null?o.mapsTo="value":l===fe.TIME?o.mapsTo="date":l===fe.LABELS&&(o.mapsTo="key")}}else delete r.axes[a];return wh(r,e),it(r,e)}function Ji(t,e,n="value",r=!1){const i=t/e.reduce((a,o)=>a+o[n],0)*100;return r?i:i%1!==0?parseFloat(i.toFixed(1)):i}function Ga(t,e,n){if(n>t.length)return t;if(e===Oe.MID_LINE)return t.substr(0,n/2)+"..."+t.substr(-n/2);if(e===Oe.FRONT_LINE)return"..."+t.substr(-n);if(e===Oe.END_LINE)return t.substr(0,n)+"..."}function wh(t,e){const n=O(t,"legend","additionalItems"),r=O(e,"legend","additionalItems");if(n&&r){const i=r.map(s=>s.type),a=n.map(s=>s.type),o=rb.filter(s=>a.includes(s.type)&&!i.includes(s.type));t.legend.additionalItems=o,e.legend.additionalItems=ay(o,r,"name")}}const O=(t,...e)=>{let n=t;if(n){for(const r of e)if(n[r]!==null&&n[r]!==void 0)n=n[r];else return null;return n}return null},Eh=(t,e)=>e===le.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t,Io=(t,e)=>{const{x0:n,x1:r,y0:i,y1:a}=Eh(t,e);return`M${n},${i}L${n},${a}L${r},${a}L${r},${i}L${n},${i}`};function Kr(t,e,n){return n===le.VERTICAL?[t,e]:[e,t]}function gl(t){return t===void 0?"":t.toISOString()}var St=(t=>(t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img",t))(St||{});function gb(t,e){return t&&ku(t,e,Or)}function mb(t,e){return function(n,r){if(n==null)return n;if(!Tr(n))return t(n,r);for(var i=n.length,a=-1,o=Object(n);++a<i&&r(o[a],a,o)!==!1;);return n}}var Sh=mb(gb);function ot(t){return function(){return t}}function Ui(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function vb(t,e,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}function yb(t,e,n,r){return Sh(t,function(i,a,o){e(r,i,n(i),o)}),r}function _b(t,e){return function(n,r){var i=Wt(n)?vb:yb,a={};return i(n,t,Eo(r),a)}}function bb(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}var wb=Object.prototype,Eb=wb.hasOwnProperty,Sb=_b(function(t,e,n){Eb.call(t,n)?t[n].push(e):xi(t,n,[e])});function Tb(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function Ob(t){return t}var xb=Array.prototype,Mb=xb.slice;function Qi(t){return()=>t}function $b(t,e,n){let r;for(;;){const i=Rn(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function Ab(t){return Math.max(1,Math.ceil(Math.log(Tb(t))/Math.LN2)+1)}function Cb(){var t=Ob,e=Xi,n=Ab;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,c=new Array(o);for(a=0;a<o;++a)c[a]=t(i[a],a,i);var u=e(c),h=u[0],d=u[1],f=n(c,h,d);if(!Array.isArray(f)){const E=d,y=+f;if(e===Xi&&([h,d]=$b(h,d,y)),f=Pu(h,d,y),f[0]<=h&&(l=Rn(h,d,y)),f[f.length-1]>=d)if(E>=d&&e===Xi){const g=Rn(h,d,y);isFinite(g)&&(g>0?d=(Math.floor(d/g)+1)*g:g<0&&(d=(Math.ceil(d*-g)+1)/-g))}else f.pop()}for(var p=f.length,w=0,m=p;f[w]<=h;)++w;for(;f[m-1]>d;)--m;(w||m<p)&&(f=f.slice(w,m),p=m-w);var _=new Array(p+1),S;for(a=0;a<=p;++a)S=_[a]=[],S.x0=a>0?f[a-1]:h,S.x1=a<p?f[a]:d;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=c[a])!=null&&h<=s&&s<=d&&_[Math.min(p,Math.floor((s-h)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=c[a])!=null&&h<=s&&s<=d){const E=Math.floor((h-s)*l);_[Math.min(p,E+(f[E]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=c[a])!=null&&h<=s&&s<=d&&_[Uu(f,s,0,p)].push(i[a]);return _}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Qi(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Qi([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Qi(Array.isArray(i)?Mb.call(i):i),r):n},r}function ml(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,s=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function vl(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Lb(t,e){return t[e]}function Db(t){const e=[];return e.key=t,e}function ta(){var t=ot([]),e=vl,n=ml,r=Lb;function i(a){var o=Array.from(t.apply(this,arguments),Db),s,l=o.length,c=-1,u;for(const h of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(h,o[s].key,c,a)]).data=h;for(s=0,u=Ui(e(o));s<l;++s)o[u[s]].index=s;return n(o,u),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:ot(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:ot(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?vl:typeof a=="function"?a:ot(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??ml,i):n},i}function kb(t,e){if((l=t.length)>0)for(var n,r=0,i,a,o,s,l,c=t[e[0]].length;r<c;++r)for(o=s=0,n=0;n<l;++n)(a=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=o,i[1]=o+=a):a<0?(i[1]=s,i[0]=s+=a):(i[0]=0,i[1]=a)}function Ib(t){const e=t.trim();return["=","+","-","@","	","\r"].includes(e.charAt(0))?` ${e}`:/[,\"\n]/.test(e)?`"${e}"`:e}let Th=class{constructor(e){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=e}formatTable({headers:e,cells:n}){const r=this.getOptions(),{code:i,date:a,number:o}=O(r,"locale"),s=O(r,"tabularRepModal","tableHeadingFormatter"),l=O(r,"tabularRepModal","tableCellFormatter"),{cartesianScales:c}=this.services,u=c==null?void 0:c.getDomainAxisScaleType();let h;return u===fe.TIME&&(h=d=>a(d,i,{month:"short",day:"numeric",year:"numeric"})),[typeof s=="function"?s(e):e,...typeof l=="function"?l(n):n.map(d=>{h&&(d[1]=h(d[1]));for(const f in d){const p=d[f];typeof p=="number"&&(d[f]=o(p,i))}return d})]}getAllDataFromDomain(e){if(!this.getData())return null;const n=this.getOptions();let r=this.getData();const i=this.getDataGroups(),{groupMapsTo:a}=O(n,"data"),o=O(n,"axes");return e&&(r=r.filter(s=>e.includes(s[a]))),o&&Object.keys(o).forEach(s=>{const l=o[s].mapsTo,c=o[s].scaleType;if((c===fe.LINEAR||c===fe.LOG)&&(r=r.map(u=>({...u,[l]:u[l]===null?u[l]:Number(u[l])}))),l&&o[s].domain)if(c===fe.LABELS)r=r.filter(u=>o[s].domain.includes(u[l]));else{const[u,h]=o[s].domain;r=r.filter(d=>!(l in d)||d[l]>=u&&d[l]<=h)}}),r.filter(s=>i.find(l=>l.name===s[a]))}getDisplayData(e){if(!this.get("data"))return null;const{ACTIVE:n}=Rt.items.status,r=this.getDataGroups(e),{groupMapsTo:i}=this.getOptions().data;return this.getAllDataFromDomain(e).filter(a=>r.find(o=>o.name===a[i]&&o.status===n))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(e){const n=this.sanitize(Mu(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),n}getDataGroups(e){return O(this.getOptions(),"data","loading")?[]:e?this.get("dataGroups").filter(n=>e.includes(n.name)):this.get("dataGroups")}getActiveDataGroups(e){const{ACTIVE:n}=Rt.items.status;return this.getDataGroups(e).filter(r=>r.status===n)}getDataGroupNames(e){return this.getDataGroups(e).map(n=>n.name)}getActiveDataGroupNames(e){return this.getActiveDataGroups(e).map(n=>n.name)}aggregateBinDataByGroup(e){return Sb(e,"group")}getBinConfigurations(){const e=this.getDisplayData(),n=this.getOptions(),r=this.services.cartesianScales.getMainXAxisPosition(),i=this.services.cartesianScales.getDomainIdentifier(),a=n.axes[r],{groupMapsTo:o}=n.data,{bins:s=nb.defaultBins}=a,l=Array.isArray(s),c=Cb().value(f=>f[i]).thresholds(s)(e);if(l)c[c.length-1].x1=s[s.length-1];else{const f=c[0].x1-c[0].x0;c[c.length-1].x1=+c[c.length-1].x0+f}const u=l?[s[0],s[s.length-1]]:[c[0].x0,c[c.length-1].x1],h=Array.from(new Set(e.map(f=>f[o]))),d=[];return c.forEach(f=>{const p=`${f.x0}-${f.x1}`,w=this.aggregateBinDataByGroup(f);h.forEach(m=>{d.push({group:m,key:p,value:w[m]||0,bin:f.x0})})}),{bins:c,binsDomain:u}}getBinnedStackedData(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getActiveDataGroupNames(),{bins:i}=this.getBinConfigurations(),a=this.getDataValuesGroupedByKeys({bins:i});return ta().keys(r)(a).map((o,s)=>Object.keys(o).filter(l=>!isNaN(l)).map(l=>{const c=o[l];return c[n]=r[s],c}))}getGroupedData(e){const n=this.getDisplayData(e),r={},{groupMapsTo:i}=this.getOptions().data;return n.map(a=>{const o=a[i];r[o]!==null&&r[o]!==void 0?r[o].push(a):r[o]=[a]}),Object.keys(r).map(a=>({name:a,data:r[a]}))}getStackKeys({bins:e=null,groups:n=null}={bins:null,groups:null}){const r=this.getOptions(),i=this.getDisplayData(n);let a;e?a=e.map(l=>`${l.x0}:${l.x1}`):a=ka(i.map(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return l[c]instanceof Date?gl(l[c]):l[c]&&typeof l[c].toString=="function"?l[c].toString():l[c]}));const o=this.services.cartesianScales.domainAxisPosition,s=r.axes[o].scaleType;return s===fe.TIME?a.sort((l,c)=>{const u=new Date(l),h=new Date(c);return u-h}):(s===fe.LOG||s===fe.LINEAR)&&a.sort((l,c)=>l-c),a}getDataValuesGroupedByKeys({bins:e=null,groups:n=null}){const r=this.getOptions(),{groupMapsTo:i}=r.data,a=this.getDisplayData(n),o=this.getDataGroupNames(),s=this.getStackKeys({bins:e,groups:n});return e?s.map(l=>{const[c,u]=l.split(":"),h={x0:c,x1:u},d=e.find(f=>f.x0.toString()===c.toString());return o.forEach(f=>{h[f]=d.filter(p=>p[i]===f).length}),h}):s.map(l=>{const c={sharedStackKey:l};return o.forEach(u=>{const h=a.find(f=>{const p=this.services.cartesianScales.getDomainIdentifier(f);return f[i]===u&&Object.prototype.hasOwnProperty.call(f,p)&&(f[p]instanceof Date?gl(f[p])===l:f[p].toString()===l)}),d=this.services.cartesianScales.getRangeIdentifier(c);c[u]=h?h[d]:null}),c})}getStackedData({percentage:e=!1,groups:n=null,divergent:r=!1}){const i=this.getOptions(),{groupMapsTo:a}=i.data,o=this.getActiveDataGroupNames(n),s=this.getDataValuesGroupedByKeys({groups:n});if(e){const l=bb(s.map(c=>[c.sharedStackKey,0]));s.forEach(c=>{o.forEach(u=>{l[c.sharedStackKey]+=c[u]})}),s.forEach(c=>{o.forEach(u=>{const h=l[c.sharedStackKey];l[c.sharedStackKey]?c[u]=c[u]/h*100:c[u]=0})})}return(r?ta().offset(kb):ta()).keys(o)(s).map((l,c)=>Object.keys(l).filter(u=>!isNaN(u)).map(u=>{const h=l[u];return h[a]=o[c],h}))}getOptions(){return this.state.options}set(e,n){this.state=Object.assign({},this.state,e);const r=Object.assign({skipUpdate:!1,animate:!0},n);r.skipUpdate||this.update(r.animate)}get(e){return e?this.state[e]:this.state}setOptions(e){const n=this.getOptions();wh(n,e),this.set({options:it(n,e)})}update(e=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(T.Model.UPDATE,{animate:e}))}toggleDataLabel(e){const{ACTIVE:n,DISABLED:r}=Rt.items.status,i=this.getDataGroups(),a=i.some(c=>c.status===r),o=i.filter(c=>c.status===n);if(a)if(o.length===1&&o[0].name===e)i.forEach((c,u)=>{i[u].status=n});else{const c=i.findIndex(u=>u.name===e);i[c].status=i[c].status===r?n:r}else i.forEach((c,u)=>{i[u].status=c.name===e?n:r});const s=i.filter(c=>c.status===n),l=this.getOptions();i.some(c=>c.status===r)?l.data.selectedGroups=s.map(c=>c.name):l.data.selectedGroups=[],this.services.events.dispatchEvent(T.Legend.ITEMS_UPDATE,{dataGroups:i}),this.set({dataGroups:i})}getIsFilled(e,n,r,i){const a=this.getOptions();return a.getIsFilled?a.getIsFilled(e,n,r,i):i}getFillColor(e,n,r){const i=this.getOptions(),a=O(this.colorScale,e);return i.getFillColor?i.getFillColor(e,n,r,a):a}getStrokeColor(e,n,r){const i=this.getOptions(),a=O(this.colorScale,e);return i.getStrokeColor?i.getStrokeColor(e,n,r,a):a}isUserProvidedColorScaleValid(){const e=O(this.getOptions(),"color","scale"),n=this.getDataGroups();return e==null||Object.keys(e).length==0?!1:n.some(r=>Object.keys(e).includes(r.name))}getColorClassName(e){const n=this.colorClassNames(e.dataGroupName);let r=e.originalClassName;return e.classNameTypes.forEach(i=>r=e.originalClassName?`${r} ${i}-${n}`:`${i}-${n}`),r||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(e){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://charts.carbondesignsystem.com/");const n=[],{datasets:r,labels:i}=e;return r.forEach(a=>{a.data.forEach((o,s)=>{let l;const c=O(a,"label");if(c===null){const h=O(i,s);h?l=h:l="Ungrouped"}else l=c;const u={group:l,key:i[s]};isNaN(o)?(u.value=o.value,u.date=o.date):u.value=o,n.push(u)})}),n}getTabularDataArray(){return[]}exportToCSV(){const e=this.getTabularDataArray().map(a=>a.map(o=>`"${(o==="&ndash;"?"–":o).split(/[,;'"`]/).map(s=>Ib(s)).join("")}"`)).map(a=>a.join(",")).join(`
`),n=this.getOptions();let r="myChart";const i=O(n,"fileDownload","fileName");typeof i=="function"?r=i("csv"):typeof i=="string"&&(r=i),this.services.files.downloadCSV(e,`${r}.csv`)}getTabularData(e){return Array.isArray(e)?e:this.transformToTabularData(e)}sanitize(e){return e=this.getTabularData(e),e}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach(e=>{this.allDataGroups.indexOf(e)===-1&&this.allDataGroups.push(e)}):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(e){const{groupMapsTo:n}=this.getOptions().data,{ACTIVE:r,DISABLED:i}=Rt.items.status,a=this.getOptions(),o=ka(e.map(l=>l[n]));a.data.selectedGroups.length&&(a.data.selectedGroups.every(l=>o.includes(l))||(a.data.selectedGroups=[]));const s=l=>!a.data.selectedGroups.length||a.data.selectedGroups.includes(l)?r:i;return o.map(l=>({name:l,status:s(l)}))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;const e=this.getOptions(),n=O(e,"color","scale");Object.keys(n).forEach(r=>{this.allDataGroups.includes(r)||console.warn(`"${r}" does not exist in data groups.`)}),this.allDataGroups.filter(r=>n[r]).forEach(r=>this.colorScale[r]=n[r])}setColorClassNames(){const e=O(this.getOptions(),"color","pairing");let n=O(e,"numberOfVariants");(!n||n<this.allDataGroups.length)&&(n=this.allDataGroups.length);let r=O(e,"option");const i=eb.pairingOptions,a=n>5?14:n,o=`${a}-color`;r=r<=i[o]?r:1;const s=this.allDataGroups.map((l,c)=>`${a}-${r}-${c%14+1}`);this.colorClassNames=ko().range(s).domain(this.allDataGroups)}},Rb=class extends Th{constructor(e){super(e)}getTabularData(e){const n=super.getTabularData(e);return e!==n&&n.forEach(r=>{r.key&&r.key!==r.group&&(r.group=r.key)}),n}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{valueMapsTo:i}=n.pie,{number:a,code:o}=O(n,"locale"),s=["Group","Value"],l=[...e.map(c=>[c[r],c[i]===null?"&ndash;":a(c[i],o)])];return super.formatTable({headers:s,cells:l})}sanitize(e){return this.getTabularData(e).sort((n,r)=>r.value-n.value)}};var Nb=/\s/;function Ub(t){for(var e=t.length;e--&&Nb.test(t.charAt(e)););return e}var Pb=/^\s+/;function Hb(t){return t&&t.slice(0,Ub(t)+1).replace(Pb,"")}var yl=NaN,Fb=/^[-+]0x[0-9a-f]+$/i,Vb=/^0b[01]+$/i,jb=/^0o[0-7]+$/i,Bb=parseInt;function za(t){if(typeof t=="number")return t;if(Oi(t))return yl;if(ue(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ue(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Hb(t);var n=Vb.test(t);return n||jb.test(t)?Bb(t.slice(2),n?2:8):Fb.test(t)?yl:+t}var ea=function(){return ye.Date.now()},Gb="Expected a function",zb=Math.max,Wb=Math.min;function Yb(t,e,n){var r,i,a,o,s,l,c=0,u=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(Gb);e=za(e)||0,ue(n)&&(u=!!n.leading,h="maxWait"in n,a=h?zb(za(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d);function f(b){var A=r,L=i;return r=i=void 0,c=b,o=t.apply(L,A),o}function p(b){return c=b,s=setTimeout(_,e),u?f(b):o}function w(b){var A=b-l,L=b-c,x=e-A;return h?Wb(x,a-L):x}function m(b){var A=b-l,L=b-c;return l===void 0||A>=e||A<0||h&&L>=a}function _(){var b=ea();if(m(b))return S(b);s=setTimeout(_,w(b))}function S(b){return s=void 0,d&&r?f(b):(r=i=void 0,o)}function E(){s!==void 0&&clearTimeout(s),c=0,r=l=i=s=void 0}function y(){return s===void 0?o:S(ea())}function g(){var b=ea(),A=m(b);if(r=arguments,i=this,l=b,A){if(s===void 0)return p(l);if(h)return clearTimeout(s),s=setTimeout(_,e),f(l)}return s===void 0&&(s=setTimeout(_,e)),o}return g.cancel=E,g.flush=y,g}function Xb(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function P(t){return typeof t=="string"?new ie([[document.querySelector(t)]],[document.documentElement]):new ie([[t]],Ku)}function Oh(){var t=ko().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var d=e().length,f=i<r,p=f?i:r,w=f?r:i;a=(w-p)/Math.max(1,d-l+c*2),s&&(a=Math.floor(a)),p+=(w-p-a*(d-l))*u,o=a*(1-l),s&&(p=Math.round(p),o=Math.round(o));var m=Xb(d).map(function(_){return p+a*_});return n(f?m.reverse():m)}return t.domain=function(d){return arguments.length?(e(d),h()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(d){return arguments.length?(s=!!d,h()):s},t.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),h()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),h()):l},t.paddingOuter=function(d){return arguments.length?(c=+d,h()):c},t.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),h()):u},t.copy=function(){return Oh(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},Ii.apply(h(),arguments)}function qb(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}const na=new Date,ra=new Date;function $t(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),e(a,s),t(a);while(c<a&&a<o);return l},i.filter=a=>$t(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(na.setTime(+a),ra.setTime(+o),t(na),t(ra),Math.floor(n(na,ra))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const vi=$t(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);vi.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?$t(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):vi);vi.range;const Pe=1e3,se=Pe*60,He=se*60,Ve=He*24,Ro=Ve*7,_l=Ve*30,ia=Ve*365,Cn=$t(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Pe)},(t,e)=>(e-t)/Pe,t=>t.getUTCSeconds());Cn.range;const No=$t(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pe)},(t,e)=>{t.setTime(+t+e*se)},(t,e)=>(e-t)/se,t=>t.getMinutes());No.range;const Kb=$t(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*se)},(t,e)=>(e-t)/se,t=>t.getUTCMinutes());Kb.range;const Uo=$t(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pe-t.getMinutes()*se)},(t,e)=>{t.setTime(+t+e*He)},(t,e)=>(e-t)/He,t=>t.getHours());Uo.range;const Zb=$t(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*He)},(t,e)=>(e-t)/He,t=>t.getUTCHours());Zb.range;const Lr=$t(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*se)/Ve,t=>t.getDate()-1);Lr.range;const Po=$t(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ve,t=>t.getUTCDate()-1);Po.range;const Jb=$t(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ve,t=>Math.floor(t/Ve));Jb.range;function pn(t){return $t(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*se)/Ro)}const Pi=pn(0),yi=pn(1),Qb=pn(2),tw=pn(3),Fn=pn(4),ew=pn(5),nw=pn(6);Pi.range;yi.range;Qb.range;tw.range;Fn.range;ew.range;nw.range;function gn(t){return $t(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Ro)}const xh=gn(0),_i=gn(1),rw=gn(2),iw=gn(3),Vn=gn(4),aw=gn(5),ow=gn(6);xh.range;_i.range;rw.range;iw.range;Vn.range;aw.range;ow.range;const Ho=$t(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Ho.range;const sw=$t(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());sw.range;const je=$t(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());je.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:$t(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});je.range;const un=$t(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());un.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:$t(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});un.range;function lw(t,e,n,r,i,a){const o=[[Cn,1,Pe],[Cn,5,5*Pe],[Cn,15,15*Pe],[Cn,30,30*Pe],[a,1,se],[a,5,5*se],[a,15,15*se],[a,30,30*se],[i,1,He],[i,3,3*He],[i,6,6*He],[i,12,12*He],[r,1,Ve],[r,2,2*Ve],[n,1,Ro],[e,1,_l],[e,3,3*_l],[t,1,ia]];function s(c,u,h){const d=u<c;d&&([c,u]=[u,c]);const f=h&&typeof h.range=="function"?h:l(c,u,h),p=f?f.range(c,+u+1):[];return d?p.reverse():p}function l(c,u,h){const d=Math.abs(u-c)/h,f=So(([,,m])=>m).right(o,d);if(f===o.length)return t.every(Ia(c/ia,u/ia,h));if(f===0)return vi.every(Math.max(Ia(c,u,h),1));const[p,w]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return p.every(w)}return[s,l]}const[cw,uw]=lw(je,Ho,Pi,Lr,Uo,No);function aa(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function oa(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Jn(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function hw(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=Qn(i),u=tr(i),h=Qn(a),d=tr(a),f=Qn(o),p=tr(o),w=Qn(s),m=tr(s),_=Qn(l),S=tr(l),E={a:et,A:F,b:tt,B:st,c:null,d:Ol,e:Ol,f:Iw,g:Gw,G:Ww,H:Lw,I:Dw,j:kw,L:Mh,m:Rw,M:Nw,p:Y,q:k,Q:$l,s:Al,S:Uw,u:Pw,U:Hw,V:Fw,w:Vw,W:jw,x:null,X:null,y:Bw,Y:zw,Z:Yw,"%":Ml},y={a:B,A:ct,b:z,B:dt,c:null,d:xl,e:xl,f:Zw,g:sE,G:cE,H:Xw,I:qw,j:Kw,L:Ah,m:Jw,M:Qw,p:lt,q:ft,Q:$l,s:Al,S:tE,u:eE,U:nE,V:rE,w:iE,W:aE,x:null,X:null,y:oE,Y:lE,Z:uE,"%":Ml},g={a:V,A:$,b:G,B:C,c:R,d:Sl,e:Sl,f:Mw,g:El,G:wl,H:Tl,I:Tl,j:Sw,L:xw,m:Ew,M:Tw,p:x,q:ww,Q:Aw,s:Cw,S:Ow,u:mw,U:vw,V:yw,w:gw,W:_w,x:rt,X,y:El,Y:wl,Z:bw,"%":$w};E.x=b(n,E),E.X=b(r,E),E.c=b(e,E),y.x=b(n,y),y.X=b(r,y),y.c=b(e,y);function b(D,U){return function(I){var M=[],nt=-1,q=0,Q=D.length,Z,H,K;for(I instanceof Date||(I=new Date(+I));++nt<Q;)D.charCodeAt(nt)===37&&(M.push(D.slice(q,nt)),(H=bl[Z=D.charAt(++nt)])!=null?Z=D.charAt(++nt):H=Z==="e"?" ":"0",(K=U[Z])&&(Z=K(I,H)),M.push(Z),q=nt+1);return M.push(D.slice(q,nt)),M.join("")}}function A(D,U){return function(I){var M=Jn(1900,void 0,1),nt=L(M,D,I+="",0),q,Q;if(nt!=I.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(U&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(q=oa(Jn(M.y,0,1)),Q=q.getUTCDay(),q=Q>4||Q===0?_i.ceil(q):_i(q),q=Po.offset(q,(M.V-1)*7),M.y=q.getUTCFullYear(),M.m=q.getUTCMonth(),M.d=q.getUTCDate()+(M.w+6)%7):(q=aa(Jn(M.y,0,1)),Q=q.getDay(),q=Q>4||Q===0?yi.ceil(q):yi(q),q=Lr.offset(q,(M.V-1)*7),M.y=q.getFullYear(),M.m=q.getMonth(),M.d=q.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),Q="Z"in M?oa(Jn(M.y,0,1)).getUTCDay():aa(Jn(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(Q+5)%7:M.w+M.U*7-(Q+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,oa(M)):aa(M)}}function L(D,U,I,M){for(var nt=0,q=U.length,Q=I.length,Z,H;nt<q;){if(M>=Q)return-1;if(Z=U.charCodeAt(nt++),Z===37){if(Z=U.charAt(nt++),H=g[Z in bl?U.charAt(nt++):Z],!H||(M=H(D,I,M))<0)return-1}else if(Z!=I.charCodeAt(M++))return-1}return M}function x(D,U,I){var M=c.exec(U.slice(I));return M?(D.p=u.get(M[0].toLowerCase()),I+M[0].length):-1}function V(D,U,I){var M=f.exec(U.slice(I));return M?(D.w=p.get(M[0].toLowerCase()),I+M[0].length):-1}function $(D,U,I){var M=h.exec(U.slice(I));return M?(D.w=d.get(M[0].toLowerCase()),I+M[0].length):-1}function G(D,U,I){var M=_.exec(U.slice(I));return M?(D.m=S.get(M[0].toLowerCase()),I+M[0].length):-1}function C(D,U,I){var M=w.exec(U.slice(I));return M?(D.m=m.get(M[0].toLowerCase()),I+M[0].length):-1}function R(D,U,I){return L(D,e,U,I)}function rt(D,U,I){return L(D,n,U,I)}function X(D,U,I){return L(D,r,U,I)}function et(D){return o[D.getDay()]}function F(D){return a[D.getDay()]}function tt(D){return l[D.getMonth()]}function st(D){return s[D.getMonth()]}function Y(D){return i[+(D.getHours()>=12)]}function k(D){return 1+~~(D.getMonth()/3)}function B(D){return o[D.getUTCDay()]}function ct(D){return a[D.getUTCDay()]}function z(D){return l[D.getUTCMonth()]}function dt(D){return s[D.getUTCMonth()]}function lt(D){return i[+(D.getUTCHours()>=12)]}function ft(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var U=b(D+="",E);return U.toString=function(){return D},U},parse:function(D){var U=A(D+="",!1);return U.toString=function(){return D},U},utcFormat:function(D){var U=b(D+="",y);return U.toString=function(){return D},U},utcParse:function(D){var U=A(D+="",!0);return U.toString=function(){return D},U}}}var bl={"-":"",_:" ",0:"0"},Dt=/^\s*\d+/,dw=/^%/,fw=/[\\^$*+?|[\]().{}]/g;function ht(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function pw(t){return t.replace(fw,"\\$&")}function Qn(t){return new RegExp("^(?:"+t.map(pw).join("|")+")","i")}function tr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function gw(t,e,n){var r=Dt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function mw(t,e,n){var r=Dt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function vw(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function yw(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function _w(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function wl(t,e,n){var r=Dt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function El(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bw(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ww(t,e,n){var r=Dt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Ew(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Sl(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Sw(t,e,n){var r=Dt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Tl(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Tw(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ow(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function xw(t,e,n){var r=Dt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Mw(t,e,n){var r=Dt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function $w(t,e,n){var r=dw.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Aw(t,e,n){var r=Dt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Cw(t,e,n){var r=Dt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Ol(t,e){return ht(t.getDate(),e,2)}function Lw(t,e){return ht(t.getHours(),e,2)}function Dw(t,e){return ht(t.getHours()%12||12,e,2)}function kw(t,e){return ht(1+Lr.count(je(t),t),e,3)}function Mh(t,e){return ht(t.getMilliseconds(),e,3)}function Iw(t,e){return Mh(t,e)+"000"}function Rw(t,e){return ht(t.getMonth()+1,e,2)}function Nw(t,e){return ht(t.getMinutes(),e,2)}function Uw(t,e){return ht(t.getSeconds(),e,2)}function Pw(t){var e=t.getDay();return e===0?7:e}function Hw(t,e){return ht(Pi.count(je(t)-1,t),e,2)}function $h(t){var e=t.getDay();return e>=4||e===0?Fn(t):Fn.ceil(t)}function Fw(t,e){return t=$h(t),ht(Fn.count(je(t),t)+(je(t).getDay()===4),e,2)}function Vw(t){return t.getDay()}function jw(t,e){return ht(yi.count(je(t)-1,t),e,2)}function Bw(t,e){return ht(t.getFullYear()%100,e,2)}function Gw(t,e){return t=$h(t),ht(t.getFullYear()%100,e,2)}function zw(t,e){return ht(t.getFullYear()%1e4,e,4)}function Ww(t,e){var n=t.getDay();return t=n>=4||n===0?Fn(t):Fn.ceil(t),ht(t.getFullYear()%1e4,e,4)}function Yw(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ht(e/60|0,"0",2)+ht(e%60,"0",2)}function xl(t,e){return ht(t.getUTCDate(),e,2)}function Xw(t,e){return ht(t.getUTCHours(),e,2)}function qw(t,e){return ht(t.getUTCHours()%12||12,e,2)}function Kw(t,e){return ht(1+Po.count(un(t),t),e,3)}function Ah(t,e){return ht(t.getUTCMilliseconds(),e,3)}function Zw(t,e){return Ah(t,e)+"000"}function Jw(t,e){return ht(t.getUTCMonth()+1,e,2)}function Qw(t,e){return ht(t.getUTCMinutes(),e,2)}function tE(t,e){return ht(t.getUTCSeconds(),e,2)}function eE(t){var e=t.getUTCDay();return e===0?7:e}function nE(t,e){return ht(xh.count(un(t)-1,t),e,2)}function Ch(t){var e=t.getUTCDay();return e>=4||e===0?Vn(t):Vn.ceil(t)}function rE(t,e){return t=Ch(t),ht(Vn.count(un(t),t)+(un(t).getUTCDay()===4),e,2)}function iE(t){return t.getUTCDay()}function aE(t,e){return ht(_i.count(un(t)-1,t),e,2)}function oE(t,e){return ht(t.getUTCFullYear()%100,e,2)}function sE(t,e){return t=Ch(t),ht(t.getUTCFullYear()%100,e,2)}function lE(t,e){return ht(t.getUTCFullYear()%1e4,e,4)}function cE(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Vn(t):Vn.ceil(t),ht(t.getUTCFullYear()%1e4,e,4)}function uE(){return"+0000"}function Ml(){return"%"}function $l(t){return+t}function Al(t){return Math.floor(+t/1e3)}var En,Lh;hE({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hE(t){return En=hw(t),Lh=En.format,En.parse,En.utcFormat,En.utcParse,En}function dE(t){return new Date(t)}function fE(t){return t instanceof Date?+t:+new Date(+t)}function Dh(t,e,n,r,i,a,o,s,l,c){var u=mh(),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),w=c("%I:%M"),m=c("%I %p"),_=c("%a %d"),S=c("%b %d"),E=c("%B"),y=c("%Y");function g(b){return(l(b)<b?f:s(b)<b?p:o(b)<b?w:a(b)<b?m:r(b)<b?i(b)<b?_:S:n(b)<b?E:y)(b)}return u.invert=function(b){return new Date(h(b))},u.domain=function(b){return arguments.length?d(Array.from(b,fE)):d().map(dE)},u.ticks=function(b){var A=d();return t(A[0],A[A.length-1],b??10)},u.tickFormat=function(b,A){return A==null?g:c(A)},u.nice=function(b){var A=d();return(!b||typeof b.range!="function")&&(b=e(A[0],A[A.length-1],b??10)),b?d(qb(A,b)):u},u.copy=function(){return gh(u,Dh(t,e,n,r,i,a,o,s,l,c))},u}function pE(){return Ii.apply(Dh(cw,uw,je,Ho,Pi,Lr,Uo,No,Cn,Lh).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const Cl=Math.abs,Pt=Math.atan2,Je=Math.cos,gE=Math.max,sa=Math.min,Se=Math.sin,Ln=Math.sqrt,Vt=1e-12,br=Math.PI,bi=br/2,Zr=2*br;function mE(t){return t>1?0:t<-1?br:Math.acos(t)}function Ll(t){return t>=1?bi:t<=-1?-bi:Math.asin(t)}function kh(t){this._context=t}kh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ih(t){return new kh(t)}function wi(){}function vE(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const yE=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function qe(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let er=null;function Rh(t={}){return er||(t.includeStyleProperties?(er=t.includeStyleProperties,er):(er=qe(window.getComputedStyle(document.documentElement)),er))}function Ei(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function _E(t){const e=Ei(t,"border-left-width"),n=Ei(t,"border-right-width");return t.clientWidth+e+n}function bE(t){const e=Ei(t,"border-top-width"),n=Ei(t,"border-bottom-width");return t.clientHeight+e+n}function Nh(t,e={}){const n=e.width||_E(t),r=e.height||bE(t);return{width:n,height:r}}function wE(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const te=16384;function EE(t){(t.width>te||t.height>te)&&(t.width>te&&t.height>te?t.width>t.height?(t.height*=te/t.width,t.width=te):(t.width*=te/t.height,t.height=te):t.width>te?(t.height*=te/t.width,t.width=te):(t.width*=te/t.height,t.height=te))}function Si(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function SE(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function TE(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(t),SE(i)}const Jt=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Jt(n,e)};function OE(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function xE(t,e){return Rh(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function ME(t,e,n,r){const i=`.${t}:${e}`,a=n.cssText?OE(n):xE(n,r);return document.createTextNode(`${i}{${a}}`)}function Dl(t,e,n,r){const i=window.getComputedStyle(t,n),a=i.getPropertyValue("content");if(a===""||a==="none")return;const o=yE();try{e.className=`${e.className} ${o}`}catch{return}const s=document.createElement("style");s.appendChild(ME(o,n,i,r)),e.appendChild(s)}function $E(t,e,n){Dl(t,e,":before",n),Dl(t,e,":after",n)}const kl="application/font-woff",Il="image/jpeg",AE={woff:kl,woff2:kl,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Il,jpeg:Il,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function CE(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Fo(t){const e=CE(t).toLowerCase();return AE[e]||""}function LE(t){return t.split(/,/)[1]}function Wa(t){return t.search(/^(data:)/)!==-1}function DE(t,e){return`data:${e};base64,${t}`}async function Uh(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((a,o)=>{const s=new FileReader;s.onerror=o,s.onloadend=()=>{try{a(n({res:r,result:s.result}))}catch(l){o(l)}},s.readAsDataURL(i)})}const la={};function kE(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Vo(t,e,n){const r=kE(t,e,n.includeQueryParams);if(la[r]!=null)return la[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const a=await Uh(t,n.fetchRequestInit,({res:o,result:s})=>(e||(e=o.headers.get("Content-Type")||""),LE(s)));i=DE(a,e)}catch(a){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;a&&(o=typeof a=="string"?a:a.message),o&&console.warn(o)}return la[r]=i,i}async function IE(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):Si(e)}async function RE(t,e){if(t.currentSrc){const a=document.createElement("canvas"),o=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,o==null||o.drawImage(t,0,0,a.width,a.height);const s=a.toDataURL();return Si(s)}const n=t.poster,r=Fo(n),i=await Vo(n,r,e);return Si(i)}async function NE(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await Hi(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function UE(t,e){return Jt(t,HTMLCanvasElement)?IE(t):Jt(t,HTMLVideoElement)?RE(t,e):Jt(t,HTMLIFrameElement)?NE(t,e):t.cloneNode(Ph(t))}const PE=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",Ph=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function HE(t,e,n){var r,i;if(Ph(e))return e;let a=[];return PE(t)&&t.assignedNodes?a=qe(t.assignedNodes()):Jt(t,HTMLIFrameElement)&&!((r=t.contentDocument)===null||r===void 0)&&r.body?a=qe(t.contentDocument.body.childNodes):a=qe(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),a.length===0||Jt(t,HTMLVideoElement)||await a.reduce((o,s)=>o.then(()=>Hi(s,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function FE(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Rh(n).forEach(a=>{let o=i.getPropertyValue(a);a==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Jt(t,HTMLIFrameElement)&&a==="display"&&o==="inline"&&(o="block"),a==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(a,o,i.getPropertyPriority(a))})}function VE(t,e){Jt(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Jt(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function jE(t,e){if(Jt(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function BE(t,e,n){return Jt(e,Element)&&(FE(t,e,n),$E(t,e,n),VE(t,e),jE(t,e)),e}async function GE(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let a=0;a<n.length;a++){const o=n[a].getAttribute("xlink:href");if(o){const s=t.querySelector(o),l=document.querySelector(o);!s&&l&&!r[o]&&(r[o]=await Hi(l,e,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const s=document.createElementNS(a,"defs");o.appendChild(s);for(let l=0;l<i.length;l++)s.appendChild(i[l]);t.appendChild(o)}return t}async function Hi(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>UE(r,e)).then(r=>HE(t,r,e)).then(r=>BE(t,r,e)).then(r=>GE(r,e))}const Hh=/url\((['"]?)([^'"]+?)\1\)/g,zE=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,WE=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function YE(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function XE(t){const e=[];return t.replace(Hh,(n,r,i)=>(e.push(i),n)),e.filter(n=>!Wa(n))}async function qE(t,e,n,r,i){try{const a=n?vE(e,n):e,o=Fo(e);let s;return i||(s=await Vo(a,o,r)),t.replace(YE(e),`$1${s}$3`)}catch{}return t}function KE(t,{preferredFontFormat:e}){return e?t.replace(WE,n=>{for(;;){const[r,,i]=zE.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function Fh(t){return t.search(Hh)!==-1}async function Vh(t,e,n){if(!Fh(t))return t;const r=KE(t,n);return XE(r).reduce((i,a)=>i.then(o=>qE(o,a,e,n)),Promise.resolve(r))}async function Sn(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const a=await Vh(i,null,n);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function ZE(t,e){await Sn("background",t,e)||await Sn("background-image",t,e),await Sn("mask",t,e)||await Sn("-webkit-mask",t,e)||await Sn("mask-image",t,e)||await Sn("-webkit-mask-image",t,e)}async function JE(t,e){const n=Jt(t,HTMLImageElement);if(!(n&&!Wa(t.src))&&!(Jt(t,SVGImageElement)&&!Wa(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await Vo(r,Fo(r),e);await new Promise((a,o)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...l)=>{try{a(e.onImageErrorHandler(...l))}catch(c){o(c)}}:o;const s=t;s.decode&&(s.decode=a),s.loading==="lazy"&&(s.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function QE(t,e){const n=qe(t.childNodes).map(r=>jh(r,e));await Promise.all(n).then(()=>t)}async function jh(t,e){Jt(t,Element)&&(await ZE(t,e),await JE(t,e),await QE(t,e))}function tS(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const Rl={};async function Nl(t){let e=Rl[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},Rl[t]=e,e}async function Ul(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async a=>{let o=a.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),Uh(o,e.fetchRequestInit,({result:s})=>(n=n.replace(a,`url(${s})`),[a,s]))});return Promise.all(i).then(()=>n)}function Pl(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",s=new RegExp(o,"gi");for(;;){let l=a.exec(r);if(l===null){if(l=s.exec(r),l===null)break;a.lastIndex=s.lastIndex}else s.lastIndex=a.lastIndex;e.push(l[0])}return e}async function eS(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{qe(i.cssRules||[]).forEach((a,o)=>{if(a.type===CSSRule.IMPORT_RULE){let s=o+1;const l=a.href,c=Nl(l).then(u=>Ul(u,e)).then(u=>Pl(u).forEach(h=>{try{i.insertRule(h,h.startsWith("@import")?s+=1:i.cssRules.length)}catch(d){console.error("Error inserting rule from remote css",{rule:h,error:d})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(c)}})}catch(a){const o=t.find(s=>s.href==null)||document.styleSheets[0];i.href!=null&&r.push(Nl(i.href).then(s=>Ul(s,e)).then(s=>Pl(s).forEach(l=>{o.insertRule(l,o.cssRules.length)})).catch(s=>{console.error("Error loading remote stylesheet",s)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{qe(i.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),n))}function nS(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Fh(e.style.getPropertyValue("src")))}async function rS(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=qe(t.ownerDocument.styleSheets),r=await eS(n,e);return nS(r)}function Bh(t){return t.trim().replace(/["']/g,"")}function iS(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(i=>{e.add(Bh(i))}),Array.from(r.children).forEach(i=>{i instanceof HTMLElement&&n(i)})}return n(t),e}async function aS(t,e){const n=await rS(t,e),r=iS(t);return(await Promise.all(n.filter(i=>r.has(Bh(i.style.fontFamily))).map(i=>{const a=i.parentStyleSheet?i.parentStyleSheet.href:null;return Vh(i.cssText,a,e)}))).join(`
`)}async function oS(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await aS(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function sS(t,e={}){const{width:n,height:r}=Nh(t,e),i=await Hi(t,e,!0);return await oS(i,e),await jh(i,e),tS(i,e),await TE(i,n,r)}async function Gh(t,e={}){const{width:n,height:r}=Nh(t,e),i=await sS(t,e),a=await Si(i),o=document.createElement("canvas"),s=o.getContext("2d"),l=e.pixelRatio||wE(),c=e.canvasWidth||n,u=e.canvasHeight||r;return o.width=c*l,o.height=u*l,e.skipAutoScale||EE(o),o.style.width=`${c}`,o.style.height=`${u}`,e.backgroundColor&&(s.fillStyle=e.backgroundColor,s.fillRect(0,0,o.width,o.height)),s.drawImage(a,0,0,o.width,o.height),o}async function lS(t,e={}){return(await Gh(t,e)).toDataURL()}async function cS(t,e={}){return(await Gh(t,e)).toDataURL("image/jpeg",e.quality||1)}class Bn{constructor(e,n){this.model=e,this.services=n,this.init()}init(){}update(){}setModel(e){this.model=e}setServices(e){this.services=e}}const uS="DONT_STYLE_ME_css_styles_verifier";class J extends Bn{constructor(e,n){super(e,n)}static getHTMLElementSize(e){return{width:e.clientWidth,height:e.clientHeight}}static getSVGElementSize(e,n={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){e.attr||(e=P(e));const r={width:0,height:0},i=d=>{d&&Object.keys(r).forEach(f=>{if(d[f]){const p=d[f],w=parseFloat(p);p&&w>r[f]&&(""+p).indexOf("%")===-1&&(r[f]=w)}})},a={width:e.attr("width"),height:e.attr("height")},o=e.node();let s,l,c,u;try{typeof o.getBBox=="function"&&(s=o.getBBox(),l={width:s.width,height:s.height})}catch(d){console.error(d)}try{typeof(o==null?void 0:o.getBoundingClientRect)=="function"&&(c=o.getBoundingClientRect(),u={width:c.width,height:c.height})}catch(d){console.error(d)}let h;if(o instanceof SVGSVGElement&&(h={width:o.clientWidth,height:o.clientHeight}),n){if(n.useAttrs&&(i(a),r.width>0&&r.height>0))return r;if(n.useClientDimensions&&(i(h),r.width>0&&r.height>0))return h;if(n.useBBox&&(i(l),r.width>0&&r.height>0))return l;if(n.useBoundingRect&&(i(u),r.width>0&&r.height>0))return u}try{const d={width:O(e.node(),"width","baseVal","value"),height:O(e.node(),"height","baseVal","value")};i(d)}catch{i(h),i(l),i(a)}return r}static appendOrSelect(e,n){const r=e.select(`${n}`);if(r.empty()){let i=n.split("#"),a,o;return i.length===2?(a=i[0],i=i[1].split("."),o=i[0]):(i=n.split("."),a=i[0]),e.append(a).attr("id",o).attr("class",i.slice(1).join(" "))}return r}init(){this.initializeID(),this.styleHolderElement(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}getElementOffset(e,n=!1){const r={left:0,top:0},i=e.getBoundingClientRect(),a=n?{left:0,top:0}:this.getHolder().getBoundingClientRect();try{r.left=i.left-a.left,r.top=i.top-a.top}catch(o){console.error(o)}return r}generateElementIDString(e){return`chart-${this.chartID}-${e}`}initializeID(){this.chartID=Math.floor((1+Math.random())*281474976710656).toString(16)}addMainContainer(){const e=this.model.getOptions(),n=O(e,"style","prefix"),r=P(this.getHolder()).append("div").classed(`${ne}--${n}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");r.append("g").attr("class",uS),this.mainContainer=r.node()}update(){this.styleHolderElement()}styleHolderElement(){const e=this.getHolder(),{width:n,height:r,theme:i}=this.model.getOptions();n!==this.width&&(e.style.width=n,this.width=n),r!==this.height&&(e.style.height=r,this.height=r),P(this.getHolder()).classed(`${ne}--chart-holder`,!0).attr("data-carbon-theme",i)}getHolder(){return this.model.get("holder")}exportToJPG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=P(r);i.classed("filled",!0),cS(this.getMainContainer(),{quality:1,filter:a=>!(a.classList&&a.classList.contains("cds--cc--toolbar"))}).then(function(a){var o;let s="myChart";const l=O(n,"fileDownload","fileName");typeof l=="function"?s=l("jpg"):typeof l=="string"&&(s=l),(o=e.services.files)==null||o.downloadImage(a,`${s}.jpg`),i.classed("filled",!1)})}exportToPNG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=P(r);i.classed("filled",!0),lS(this.getMainContainer(),{quality:1,filter:a=>!(a.classList&&a.classList.contains("cds--cc--toolbar"))}).then(function(a){var o;let s="myChart";const l=O(n,"fileDownload","fileName");typeof l=="function"?s=l("png"):typeof l=="string"&&(s=l),(o=e.services.files)==null||o.downloadImage(a,`${s}.png`),i.classed("filled",!1)}).catch(function(a){console.error("oops, something went wrong!",a)})}isFullScreenMode(){return P(this.getHolder()).classed("fullscreen")}toggleFullscreen(){const e=this.getHolder();P(e).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",()=>{const e=P(this.getHolder()),n=e.classed("fullscreen");e.classed("fullscreen",!n)})}setSVGMaxHeight(){if(!this.model.getOptions().height){const{height:e}=J.getSVGElementSize(P(this.mainContainer),{useBBox:!0}),n=P(this.mainContainer).attr("class"),r=P(this.mainContainer).selectAll(`.${n} > svg`);let i=0;r.nodes().forEach(function(a){i+=Number(J.getSVGElementSize(P(a),{useBBox:!0}).height)}),i<=e?P(this.mainContainer).attr("height",i):P(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){const e=this.getHolder();e&&P(e).on("mouseover",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(T.Chart.MOUSEOVER)}).on("mouseout",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(T.Chart.MOUSEOUT)})}addResizeListener(){const e=this.getHolder();if(!e)return;let n=e.clientWidth,r=e.clientHeight;const i=Yb(()=>{var a;e&&(Math.abs(n-e.clientWidth)>1||Math.abs(r-e.clientHeight)>1)&&(n=e.clientWidth,r=e.clientHeight,(a=this.services.events)==null||a.dispatchEvent(T.Chart.RESIZE))},12.5);new ResizeObserver(i).observe(e)}}class wr extends Bn{static appendOrUpdateLinearGradient(e){let n=e.svg.select(`defs linearGradient#${e.id}`);n.empty()&&(n=e.svg.append("defs").append("linearGradient").attr("id",e.id).attr("x1",e.x1).attr("x2",e.x2).attr("y1",e.y1).attr("y2",e.y2)),n.selectAll("stop").remove(),n.selectAll("stop").data(e.stops).enter().append("stop").attr("offset",r=>r.offset).style("stop-color",r=>r.color).style("stop-opacity",r=>r.opacity)}static getOffsetRatio(e){return(Math.abs(e[1])*100/Math.abs(e[0]-e[1])).toFixed(2)+"%"}static getStops(e,n){const r=e[0]<0&&e[1]>0;let i=[{offset:"0%",color:n,opacity:"0.6"},{offset:"80%",color:n,opacity:"0"}];return r&&(i=[{offset:"0%",color:n,opacity:"0.6"},{offset:wr.getOffsetRatio(e),color:n,opacity:"0"},{offset:"100%",color:n,opacity:"0.6"}]),i}}var hS="Expected a function";function dS(t,e,n){if(typeof t!="function")throw new TypeError(hS);return setTimeout(function(){t.apply(void 0,n)},e)}var fS=lo(function(t,e,n){return dS(t,za(e)||0,n)});function pS(t,e){return Ci(t,e)}function gS(t,e){var n;return Sh(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}function mS(t,e,n){var r=Wt(t)?$u:gS;return r(t,Eo(e))}const Ya={capture:!0,passive:!1};function Xa(t){t.preventDefault(),t.stopImmediatePropagation()}function vS(t){var e=t.document.documentElement,n=P(t).on("dragstart.drag",Xa,Ya);"onselectstart"in e?n.on("selectstart.drag",Xa,Ya):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yS(t,e){var n=t.document.documentElement,r=P(t).on("dragstart.drag",null);e&&(r.on("click.drag",Xa,Ya),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const _S=t=>+t,ca=t=>()=>t;function bS(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function wS(t){t.stopImmediatePropagation()}function ua(t){t.preventDefault(),t.stopImmediatePropagation()}var Hl={name:"drag"},ha={name:"space"},Tn={name:"handle"},On={name:"center"};const{abs:Fl,max:Ht,min:Ft}=Math;function Vl(t){return[+t[0],+t[1]]}function jl(t){return[Vl(t[0]),Vl(t[1])]}var Jr={name:"x",handles:["w","e"].map(qa),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},da={},Ne={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bl={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Gl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ES={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},SS={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function qa(t){return{type:t}}function TS(t){return!t.ctrlKey&&!t.button}function OS(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function xS(){return navigator.maxTouchPoints||"ontouchstart"in this}function fa(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function MS(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function $S(){return AS(Jr)}function AS(t){var e=OS,n=TS,r=xS,i=!0,a=To("start","brush","end"),o=6,s;function l(m){var _=m.property("__brush",w).selectAll(".overlay").data([qa("overlay")]);_.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ne.overlay).merge(_).each(function(){var E=fa(this).extent;P(this).attr("x",E[0][0]).attr("y",E[0][1]).attr("width",E[1][0]-E[0][0]).attr("height",E[1][1]-E[0][1])}),m.selectAll(".selection").data([qa("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ne.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=m.selectAll(".handle").data(t.handles,function(E){return E.type});S.exit().remove(),S.enter().append("rect").attr("class",function(E){return"handle handle--"+E.type}).attr("cursor",function(E){return Ne[E.type]}),m.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,_,S){m.tween?m.on("start.brush",function(E){u(this,arguments).beforestart().start(E)}).on("interrupt.brush end.brush",function(E){u(this,arguments).end(E)}).tween("brush",function(){var E=this,y=E.__brush,g=u(E,arguments),b=y.selection,A=t.input(typeof _=="function"?_.apply(this,arguments):_,y.extent),L=Cr(b,A);function x(V){y.selection=V===1&&A===null?null:L(V),c.call(E),g.brush()}return b!==null&&A!==null?x:x(1)}):m.each(function(){var E=this,y=arguments,g=E.__brush,b=t.input(typeof _=="function"?_.apply(E,y):_,g.extent),A=u(E,y).beforestart();Va(E),g.selection=b===null?null:b,c.call(E),A.start(S).brush(S).end(S)})},l.clear=function(m,_){l.move(m,null,_)};function c(){var m=P(this),_=fa(this).selection;_?(m.selectAll(".selection").style("display",null).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(S){return S.type[S.type.length-1]==="e"?_[1][0]-o/2:_[0][0]-o/2}).attr("y",function(S){return S.type[0]==="s"?_[1][1]-o/2:_[0][1]-o/2}).attr("width",function(S){return S.type==="n"||S.type==="s"?_[1][0]-_[0][0]+o:o}).attr("height",function(S){return S.type==="e"||S.type==="w"?_[1][1]-_[0][1]+o:o})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(m,_,S){var E=m.__brush.emitter;return E&&(!S||!E.clean)?E:new h(m,_,S)}function h(m,_,S){this.that=m,this.args=_,this.state=m.__brush,this.active=0,this.clean=S}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,_){return this.starting?(this.starting=!1,this.emit("start",m,_)):this.emit("brush",m),this},brush:function(m,_){return this.emit("brush",m,_),this},end:function(m,_){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,_)),this},emit:function(m,_,S){var E=P(this.that).datum();a.call(m,this.that,new bS(m,{sourceEvent:_,target:l,selection:t.output(this.state.selection),mode:S,dispatch:a}),E)}};function d(m){if(s&&!m.touches||!n.apply(this,arguments))return;var _=this,S=m.target.__data__.type,E=(i&&m.metaKey?S="overlay":S)==="selection"?Hl:i&&m.altKey?On:Tn,y=t===da?null:ES[S],g=t===Jr?null:SS[S],b=fa(_),A=b.extent,L=b.selection,x=A[0][0],V,$,G=A[0][1],C,R,rt=A[1][0],X,et,F=A[1][1],tt,st,Y=0,k=0,B,ct=y&&g&&i&&m.shiftKey,z,dt,lt=Array.from(m.touches||[m],H=>{const K=H.identifier;return H=Un(H,_),H.point0=H.slice(),H.identifier=K,H});Va(_);var ft=u(_,arguments,!0).beforestart();if(S==="overlay"){L&&(B=!0);const H=[lt[0],lt[1]||lt[0]];b.selection=L=[[V=t===da?x:Ft(H[0][0],H[1][0]),C=t===Jr?G:Ft(H[0][1],H[1][1])],[X=t===da?rt:Ht(H[0][0],H[1][0]),tt=t===Jr?F:Ht(H[0][1],H[1][1])]],lt.length>1&&nt(m)}else V=L[0][0],C=L[0][1],X=L[1][0],tt=L[1][1];$=V,R=C,et=X,st=tt;var D=P(_).attr("pointer-events","none"),U=D.selectAll(".overlay").attr("cursor",Ne[S]);if(m.touches)ft.moved=M,ft.ended=q;else{var I=P(m.view).on("mousemove.brush",M,!0).on("mouseup.brush",q,!0);i&&I.on("keydown.brush",Q,!0).on("keyup.brush",Z,!0),vS(m.view)}c.call(_),ft.start(m,E.name);function M(H){for(const K of H.changedTouches||[H])for(const _t of lt)_t.identifier===K.identifier&&(_t.cur=Un(K,_));if(ct&&!z&&!dt&&lt.length===1){const K=lt[0];Fl(K.cur[0]-K[0])>Fl(K.cur[1]-K[1])?dt=!0:z=!0}for(const K of lt)K.cur&&(K[0]=K.cur[0],K[1]=K.cur[1]);B=!0,ua(H),nt(H)}function nt(H){const K=lt[0],_t=K.point0;var Mt;switch(Y=K[0]-_t[0],k=K[1]-_t[1],E){case ha:case Hl:{y&&(Y=Ht(x-V,Ft(rt-X,Y)),$=V+Y,et=X+Y),g&&(k=Ht(G-C,Ft(F-tt,k)),R=C+k,st=tt+k);break}case Tn:{lt[1]?(y&&($=Ht(x,Ft(rt,lt[0][0])),et=Ht(x,Ft(rt,lt[1][0])),y=1),g&&(R=Ht(G,Ft(F,lt[0][1])),st=Ht(G,Ft(F,lt[1][1])),g=1)):(y<0?(Y=Ht(x-V,Ft(rt-V,Y)),$=V+Y,et=X):y>0&&(Y=Ht(x-X,Ft(rt-X,Y)),$=V,et=X+Y),g<0?(k=Ht(G-C,Ft(F-C,k)),R=C+k,st=tt):g>0&&(k=Ht(G-tt,Ft(F-tt,k)),R=C,st=tt+k));break}case On:{y&&($=Ht(x,Ft(rt,V-Y*y)),et=Ht(x,Ft(rt,X+Y*y))),g&&(R=Ht(G,Ft(F,C-k*g)),st=Ht(G,Ft(F,tt+k*g)));break}}et<$&&(y*=-1,Mt=V,V=X,X=Mt,Mt=$,$=et,et=Mt,S in Bl&&U.attr("cursor",Ne[S=Bl[S]])),st<R&&(g*=-1,Mt=C,C=tt,tt=Mt,Mt=R,R=st,st=Mt,S in Gl&&U.attr("cursor",Ne[S=Gl[S]])),b.selection&&(L=b.selection),z&&($=L[0][0],et=L[1][0]),dt&&(R=L[0][1],st=L[1][1]),(L[0][0]!==$||L[0][1]!==R||L[1][0]!==et||L[1][1]!==st)&&(b.selection=[[$,R],[et,st]],c.call(_),ft.brush(H,E.name))}function q(H){if(wS(H),H.touches){if(H.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else yS(H.view,B),I.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),U.attr("cursor",Ne.overlay),b.selection&&(L=b.selection),MS(L)&&(b.selection=null,c.call(_)),ft.end(H,E.name)}function Q(H){switch(H.keyCode){case 16:{ct=y&&g;break}case 18:{E===Tn&&(y&&(X=et-Y*y,V=$+Y*y),g&&(tt=st-k*g,C=R+k*g),E=On,nt(H));break}case 32:{(E===Tn||E===On)&&(y<0?X=et-Y:y>0&&(V=$-Y),g<0?tt=st-k:g>0&&(C=R-k),E=ha,U.attr("cursor",Ne.selection),nt(H));break}default:return}ua(H)}function Z(H){switch(H.keyCode){case 16:{ct&&(z=dt=ct=!1,nt(H));break}case 18:{E===On&&(y<0?X=et:y>0&&(V=$),g<0?tt=st:g>0&&(C=R),E=Tn,nt(H));break}case 32:{E===ha&&(H.altKey?(y&&(X=et-Y*y,V=$+Y*y),g&&(tt=st-k*g,C=R+k*g),E=On):(y<0?X=et:y>0&&(V=$),g<0?tt=st:g>0&&(C=R),E=Tn),U.attr("cursor",Ne[S]),nt(H));break}default:return}ua(H)}}function f(m){u(this,arguments).moved(m)}function p(m){u(this,arguments).ended(m)}function w(){var m=this.__brush||{selection:null};return m.extent=jl(e.apply(this,arguments)),m.dim=t,m}return l.extent=function(m){return arguments.length?(e=typeof m=="function"?m:ca(jl(m)),l):e},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:ca(!!m),l):n},l.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:ca(!!m),l):r},l.handleSize=function(m){return arguments.length?(o=+m,l):o},l.keyModifiers=function(m){return arguments.length?(i=!!m,l):i},l.on=function(){var m=a.on.apply(a,arguments);return m===a?l:m},l}const Ka=Math.PI,Za=2*Ka,tn=1e-6,CS=Za-tn;function zh(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function LS(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return zh;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let DS=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zh:LS(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,a){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=n-t,l=r-e,c=a-t,u=o-e,h=c*c+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(h>tn)if(!(Math.abs(u*s-l*c)>tn)||!i)this._append`L${this._x1=t},${this._y1=e}`;else{let d=n-a,f=r-o,p=s*s+l*l,w=d*d+f*f,m=Math.sqrt(p),_=Math.sqrt(h),S=i*Math.tan((Ka-Math.acos((p+h-w)/(2*m*_)))/2),E=S/_,y=S/m;Math.abs(E-1)>tn&&this._append`L${t+E*c},${e+E*u}`,this._append`A${i},${i},0,0,${+(u*d>c*f)},${this._x1=t+y*s},${this._y1=e+y*l}`}}arc(t,e,n,r,i,a){if(t=+t,e=+e,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,c=e+s,u=1^a,h=a?r-i:i-r;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>tn||Math.abs(this._y1-c)>tn)&&this._append`L${l},${c}`,n&&(h<0&&(h=h%Za+Za),h>CS?this._append`A${n},${n},0,1,${u},${t-o},${e-s}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:h>tn&&this._append`A${n},${n},0,${+(h>=Ka)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};var Wh=Math.PI,zl=Wh*2,kS=Math.abs;function Wl(t,e){return kS(t)>Wh&&(t-=Math.round(t/zl)*zl),[t,e]}Wl.invert=Wl;function Yl(){}Yl.prototype={constructor:Yl,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Xl(t,e){return[t,e]}Xl.invert=Xl;function IS(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function RS(){return this.eachAfter(IS)}function NS(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function US(t,e){for(var n=this,r=[n],i,a,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function PS(t,e){for(var n=this,r=[n],i=[],a,o,s,l=-1;n=r.pop();)if(i.push(n),a=n.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function HS(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function FS(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function VS(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function jS(t){for(var e=this,n=BS(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function BS(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function GS(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function zS(){return Array.from(this)}function WS(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function YS(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*XS(){var t=this,e,n=[t],r,i,a;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Yh(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=ZS)):e===void 0&&(e=KS);for(var n=new Er(t),r,i=[n],a,o,s,l;r=i.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new Er(o[s])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(QS)}function qS(){return Yh(this).eachBefore(JS)}function KS(t){return t.children}function ZS(t){return Array.isArray(t)?t[1]:null}function JS(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function QS(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Er(t){this.data=t,this.depth=this.height=0,this.parent=null}Er.prototype=Yh.prototype={constructor:Er,count:RS,each:NS,eachAfter:PS,eachBefore:US,find:HS,sum:FS,sort:VS,path:jS,ancestors:GS,descendants:zS,leaves:WS,links:YS,copy:qS,[Symbol.iterator]:XS};function tT(t,e,n,r,i){for(var a=t.children,o,s=-1,l=a.length,c=t.value&&(r-e)/t.value;++s<l;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}Object.create(Er.prototype);function eT(t,e,n,r,i){for(var a=t.children,o,s=-1,l=a.length,c=t.value&&(i-n)/t.value;++s<l;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}var nT=(1+Math.sqrt(5))/2;function rT(t,e,n,r,i,a){for(var o=[],s=e.children,l,c,u=0,h=0,d=s.length,f,p,w=e.value,m,_,S,E,y,g,b;u<d;){f=i-n,p=a-r;do m=s[h++].value;while(!m&&h<d);for(_=S=m,g=Math.max(p/f,f/p)/(w*t),b=m*m*g,y=Math.max(S/b,b/_);h<d;++h){if(m+=c=s[h].value,c<_&&(_=c),c>S&&(S=c),b=m*m*g,E=Math.max(S/b,b/_),E>y){m-=c;break}y=E}o.push(l={value:m,dice:f<p,children:s.slice(u,h)}),l.dice?tT(l,n,r,i,w?r+=p*m/w:a):eT(l,n,r,w?n+=f*m/w:i,a),w-=m,u=h}return o}(function t(e){function n(r,i,a,o,s){rT(e,r,i,a,o,s)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(nT);function jo(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new DS(e)}function iT(t){return t.innerRadius}function aT(t){return t.outerRadius}function oT(t){return t.startAngle}function sT(t){return t.endAngle}function lT(t){return t&&t.padAngle}function cT(t,e,n,r,i,a,o,s){var l=n-t,c=r-e,u=o-i,h=s-a,d=h*l-u*c;if(!(d*d<Vt))return d=(u*(e-a)-h*(t-i))/d,[t+d*l,e+d*c]}function Vr(t,e,n,r,i,a,o){var s=t-n,l=e-r,c=(o?a:-a)/Ln(s*s+l*l),u=c*l,h=-c*s,d=t+u,f=e+h,p=n+u,w=r+h,m=(d+p)/2,_=(f+w)/2,S=p-d,E=w-f,y=S*S+E*E,g=i-a,b=d*w-p*f,A=(E<0?-1:1)*Ln(gE(0,g*g*y-b*b)),L=(b*E-S*A)/y,x=(-b*S-E*A)/y,V=(b*E+S*A)/y,$=(-b*S+E*A)/y,G=L-m,C=x-_,R=V-m,rt=$-_;return G*G+C*C>R*R+rt*rt&&(L=V,x=$),{cx:L,cy:x,x01:-u,y01:-h,x11:L*(i/g-1),y11:x*(i/g-1)}}function Ja(){var t=iT,e=aT,n=ot(0),r=null,i=oT,a=sT,o=lT,s=null,l=jo(c);function c(){var u,h,d=+t.apply(this,arguments),f=+e.apply(this,arguments),p=i.apply(this,arguments)-bi,w=a.apply(this,arguments)-bi,m=Cl(w-p),_=w>p;if(s||(s=u=l()),f<d&&(h=f,f=d,d=h),!(f>Vt))s.moveTo(0,0);else if(m>Zr-Vt)s.moveTo(f*Je(p),f*Se(p)),s.arc(0,0,f,p,w,!_),d>Vt&&(s.moveTo(d*Je(w),d*Se(w)),s.arc(0,0,d,w,p,_));else{var S=p,E=w,y=p,g=w,b=m,A=m,L=o.apply(this,arguments)/2,x=L>Vt&&(r?+r.apply(this,arguments):Ln(d*d+f*f)),V=sa(Cl(f-d)/2,+n.apply(this,arguments)),$=V,G=V,C,R;if(x>Vt){var rt=Ll(x/d*Se(L)),X=Ll(x/f*Se(L));(b-=rt*2)>Vt?(rt*=_?1:-1,y+=rt,g-=rt):(b=0,y=g=(p+w)/2),(A-=X*2)>Vt?(X*=_?1:-1,S+=X,E-=X):(A=0,S=E=(p+w)/2)}var et=f*Je(S),F=f*Se(S),tt=d*Je(g),st=d*Se(g);if(V>Vt){var Y=f*Je(E),k=f*Se(E),B=d*Je(y),ct=d*Se(y),z;if(m<br)if(z=cT(et,F,B,ct,Y,k,tt,st)){var dt=et-z[0],lt=F-z[1],ft=Y-z[0],D=k-z[1],U=1/Se(mE((dt*ft+lt*D)/(Ln(dt*dt+lt*lt)*Ln(ft*ft+D*D)))/2),I=Ln(z[0]*z[0]+z[1]*z[1]);$=sa(V,(d-I)/(U-1)),G=sa(V,(f-I)/(U+1))}else $=G=0}A>Vt?G>Vt?(C=Vr(B,ct,et,F,f,G,_),R=Vr(Y,k,tt,st,f,G,_),s.moveTo(C.cx+C.x01,C.cy+C.y01),G<V?s.arc(C.cx,C.cy,G,Pt(C.y01,C.x01),Pt(R.y01,R.x01),!_):(s.arc(C.cx,C.cy,G,Pt(C.y01,C.x01),Pt(C.y11,C.x11),!_),s.arc(0,0,f,Pt(C.cy+C.y11,C.cx+C.x11),Pt(R.cy+R.y11,R.cx+R.x11),!_),s.arc(R.cx,R.cy,G,Pt(R.y11,R.x11),Pt(R.y01,R.x01),!_))):(s.moveTo(et,F),s.arc(0,0,f,S,E,!_)):s.moveTo(et,F),!(d>Vt)||!(b>Vt)?s.lineTo(tt,st):$>Vt?(C=Vr(tt,st,Y,k,d,-$,_),R=Vr(et,F,B,ct,d,-$,_),s.lineTo(C.cx+C.x01,C.cy+C.y01),$<V?s.arc(C.cx,C.cy,$,Pt(C.y01,C.x01),Pt(R.y01,R.x01),!_):(s.arc(C.cx,C.cy,$,Pt(C.y01,C.x01),Pt(C.y11,C.x11),!_),s.arc(0,0,d,Pt(C.cy+C.y11,C.cx+C.x11),Pt(R.cy+R.y11,R.cx+R.x11),_),s.arc(R.cx,R.cy,$,Pt(R.y11,R.x11),Pt(R.y01,R.x01),!_))):s.arc(0,0,d,g,y,_)}if(s.closePath(),u)return s=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-br/2;return[Je(h)*u,Se(h)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:ot(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:ot(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:ot(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:ot(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:ot(+u),c):i},c.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:ot(+u),c):a},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:ot(+u),c):o},c.context=function(u){return arguments.length?(s=u??null,c):s},c}function Xh(t){return t[0]}function qh(t){return t[1]}function Kh(t,e){var n=ot(!0),r=null,i=Ih,a=null,o=jo(s);t=typeof t=="function"?t:t===void 0?Xh:ot(t),e=typeof e=="function"?e:e===void 0?qh:ot(e);function s(l){var c,u=(l=Ui(l)).length,h,d=!1,f;for(r==null&&(a=i(f=o())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(h,c,l),+e(h,c,l));if(f)return a=null,f+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:ot(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:ot(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ot(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function Zh(t,e,n){var r=null,i=ot(!0),a=null,o=Ih,s=null,l=jo(c);t=typeof t=="function"?t:t===void 0?Xh:ot(+t),e=typeof e=="function"?e:ot(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?qh:ot(+n);function c(h){var d,f,p,w=(h=Ui(h)).length,m,_=!1,S,E=new Array(w),y=new Array(w);for(a==null&&(s=o(S=l())),d=0;d<=w;++d){if(!(d<w&&i(m=h[d],d,h))===_)if(_=!_)f=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=d-1;p>=f;--p)s.point(E[p],y[p]);s.lineEnd(),s.areaEnd()}_&&(E[d]=+t(m,d,h),y[d]=+e(m,d,h),s.point(r?+r(m,d,h):E[d],n?+n(m,d,h):y[d]))}if(S)return s=null,S+""||null}function u(){return Kh().defined(i).curve(o).context(a)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:ot(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:ot(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:ot(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:ot(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:ot(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ot(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:ot(!!h),c):i},c.curve=function(h){return arguments.length?(o=h,a!=null&&(s=o(a)),c):o},c.context=function(h){return arguments.length?(h==null?a=s=null:s=o(a=h),c):a},c}function uT(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function hT(t){return t}function dT(){var t=hT,e=uT,n=null,r=ot(0),i=ot(Zr),a=ot(0);function o(s){var l,c=(s=Ui(s)).length,u,h,d=0,f=new Array(c),p=new Array(c),w=+r.apply(this,arguments),m=Math.min(Zr,Math.max(-Zr,i.apply(this,arguments)-w)),_,S=Math.min(Math.abs(m)/c,a.apply(this,arguments)),E=S*(m<0?-1:1),y;for(l=0;l<c;++l)(y=p[f[l]=l]=+t(s[l],l,s))>0&&(d+=y);for(e!=null?f.sort(function(g,b){return e(p[g],p[b])}):n!=null&&f.sort(function(g,b){return n(s[g],s[b])}),l=0,h=d?(m-c*E)/d:0;l<c;++l,w=_)u=f[l],y=p[u],_=w+(y>0?y*h:0)+E,p[u]={data:s[u],index:l,value:y,startAngle:w,endAngle:_,padAngle:S};return p}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:ot(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:ot(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:ot(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:ot(+s),o):a},o}class kt{constructor(e,n,r){if(this.type="",this.renderType=Tt.HTML,this.id="",this.parent=void 0,this.configs={},this.model=e,this.services=n,r&&(this.configs=r,this.configs.id)){const i=O(this.model.getOptions(),"style","prefix");this.id=`${i}--${this.configs.id}`}this.parent||this.setParent(P(this.services.domUtils.getMainContainer()))}init(){}render(e=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(e){this.model=e}setServices(e){this.services=e}setParent(e){var n;const r=this.parent;if(this.parent=e,!(r&&r.node()===e.node())&&this.type){const i=O(this.model.getOptions(),"style","prefix");(n=this.parent)==null||n.classed(`${ne}--${i}--${this.type}`,!0),r&&r.classed(`${ne}--${i}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(e={ariaLabel:null,isPresentational:!1,withinChartClip:!1}){if(this.type){const n=O(this.model.getOptions(),"style","prefix"),r=this.id?`#${this.id}`:"",i=J.appendOrSelect(this.parent,`${this.renderType===Tt.SVG?"svg":"div"}${r}.${ne}--${n}--${this.type}`);if(e.ariaLabel&&i.attr("aria-label",e.ariaLabel),e.isPresentational&&i.attr("role","presentation"),e.withinChartClip){const a=this.model.get("chartClipId");if(a){const o=P(`#${a}`).select("rect");o.size()!==0&&parseFloat(o.attr("height"))>0&&i.attr("clip-path",`url(#${a})`)}}return i.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?it({},this.model.getOptions(),this.configs.options):this.model.getOptions()}}/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:Jh,setPrototypeOf:ql,isFrozen:fT,getPrototypeOf:pT,getOwnPropertyDescriptor:gT}=Object;let{freeze:Xt,seal:he,create:Qh}=Object,{apply:Qa,construct:to}=typeof Reflect<"u"&&Reflect;Xt||(Xt=function(t){return t});he||(he=function(t){return t});Qa||(Qa=function(t,e,n){return t.apply(e,n)});to||(to=function(t,e){return new t(...e)});const jr=qt(Array.prototype.forEach),mT=qt(Array.prototype.lastIndexOf),Kl=qt(Array.prototype.pop),nr=qt(Array.prototype.push),vT=qt(Array.prototype.splice),Qr=qt(String.prototype.toLowerCase),pa=qt(String.prototype.toString),Zl=qt(String.prototype.match),rr=qt(String.prototype.replace),yT=qt(String.prototype.indexOf),_T=qt(String.prototype.trim),de=qt(Object.prototype.hasOwnProperty),zt=qt(RegExp.prototype.test),ir=bT(TypeError);function qt(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Qa(t,e,r)}}function bT(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return to(t,n)}}function at(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qr;ql&&ql(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const a=n(i);a!==i&&(fT(e)||(e[r]=a),i=a)}t[i]=!0}return t}function wT(t){for(let e=0;e<t.length;e++)de(t,e)||(t[e]=null);return t}function en(t){const e=Qh(null);for(const[n,r]of Jh(t))de(t,n)&&(Array.isArray(r)?e[n]=wT(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=en(r):e[n]=r);return e}function ar(t,e){for(;t!==null;){const r=gT(t,e);if(r){if(r.get)return qt(r.get);if(typeof r.value=="function")return qt(r.value)}t=pT(t)}function n(){return null}return n}const Jl=Xt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ga=Xt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ma=Xt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ET=Xt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),va=Xt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ST=Xt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ql=Xt(["#text"]),tc=Xt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ya=Xt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ec=Xt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Br=Xt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),TT=he(/\{\{[\w\W]*|[\w\W]*\}\}/gm),OT=he(/<%[\w\W]*|[\w\W]*%>/gm),xT=he(/\$\{[\w\W]*/gm),MT=he(/^data-[\-\w.\u00B7-\uFFFF]+$/),$T=he(/^aria-[\-\w]+$/),td=he(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),AT=he(/^(?:\w+script|data):/i),CT=he(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ed=he(/^html$/i),LT=he(/^[a-z][.\w]*(-[.\w]+)+$/i);var nc=Object.freeze({__proto__:null,ARIA_ATTR:$T,ATTR_WHITESPACE:CT,CUSTOM_ELEMENT:LT,DATA_ATTR:MT,DOCTYPE_NAME:ed,ERB_EXPR:OT,IS_ALLOWED_URI:td,IS_SCRIPT_OR_DATA:AT,MUSTACHE_EXPR:TT,TMPLIT_EXPR:xT});const or={element:1,text:3,progressingInstruction:7,comment:8,document:9},DT=function(){return typeof window>"u"?null:window},kT=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},rc=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function nd(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:DT();const e=v=>nd(v);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==or.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:s,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:f}=t,p=l.prototype,w=ar(p,"cloneNode"),m=ar(p,"remove"),_=ar(p,"nextSibling"),S=ar(p,"childNodes"),E=ar(p,"parentNode");if(typeof o=="function"){const v=n.createElement("template");v.content&&v.content.ownerDocument&&(n=v.content.ownerDocument)}let y,g="";const{implementation:b,createNodeIterator:A,createDocumentFragment:L,getElementsByTagName:x}=n,{importNode:V}=r;let $=rc();e.isSupported=typeof Jh=="function"&&typeof E=="function"&&b&&b.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:G,ERB_EXPR:C,TMPLIT_EXPR:R,DATA_ATTR:rt,ARIA_ATTR:X,IS_SCRIPT_OR_DATA:et,ATTR_WHITESPACE:F,CUSTOM_ELEMENT:tt}=nc;let{IS_ALLOWED_URI:st}=nc,Y=null;const k=at({},[...Jl,...ga,...ma,...va,...Ql]);let B=null;const ct=at({},[...tc,...ya,...ec,...Br]);let z=Object.seal(Qh(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),dt=null,lt=null,ft=!0,D=!0,U=!1,I=!0,M=!1,nt=!0,q=!1,Q=!1,Z=!1,H=!1,K=!1,_t=!1,Mt=!0,be=!1;const Ce="user-content-";let At=!0,Ot=!1,Kt={},we=null;const mn=at({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ze=null;const We=at({},["audio","video","img","source","image","track"]);let Qt=null;const Le=at({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vn="http://www.w3.org/1998/Math/MathML",yn="http://www.w3.org/2000/svg",Bt="http://www.w3.org/1999/xhtml";let De=Bt,Gn=!1,zn=null;const fd=at({},[vn,yn,Bt],pa);let Dr=at({},["mi","mo","mn","ms","mtext"]),kr=at({},["annotation-xml"]);const pd=at({},["title","style","font","a","script"]);let Wn=null;const gd=["application/xhtml+xml","text/html"],md="text/html";let Ct=null,_n=null;const vd=n.createElement("form"),Ko=function(v){return v instanceof RegExp||v instanceof Function},Fi=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(_n&&_n===v)){if((!v||typeof v!="object")&&(v={}),v=en(v),Wn=gd.indexOf(v.PARSER_MEDIA_TYPE)===-1?md:v.PARSER_MEDIA_TYPE,Ct=Wn==="application/xhtml+xml"?pa:Qr,Y=de(v,"ALLOWED_TAGS")?at({},v.ALLOWED_TAGS,Ct):k,B=de(v,"ALLOWED_ATTR")?at({},v.ALLOWED_ATTR,Ct):ct,zn=de(v,"ALLOWED_NAMESPACES")?at({},v.ALLOWED_NAMESPACES,pa):fd,Qt=de(v,"ADD_URI_SAFE_ATTR")?at(en(Le),v.ADD_URI_SAFE_ATTR,Ct):Le,ze=de(v,"ADD_DATA_URI_TAGS")?at(en(We),v.ADD_DATA_URI_TAGS,Ct):We,we=de(v,"FORBID_CONTENTS")?at({},v.FORBID_CONTENTS,Ct):mn,dt=de(v,"FORBID_TAGS")?at({},v.FORBID_TAGS,Ct):{},lt=de(v,"FORBID_ATTR")?at({},v.FORBID_ATTR,Ct):{},Kt=de(v,"USE_PROFILES")?v.USE_PROFILES:!1,ft=v.ALLOW_ARIA_ATTR!==!1,D=v.ALLOW_DATA_ATTR!==!1,U=v.ALLOW_UNKNOWN_PROTOCOLS||!1,I=v.ALLOW_SELF_CLOSE_IN_ATTR!==!1,M=v.SAFE_FOR_TEMPLATES||!1,nt=v.SAFE_FOR_XML!==!1,q=v.WHOLE_DOCUMENT||!1,H=v.RETURN_DOM||!1,K=v.RETURN_DOM_FRAGMENT||!1,_t=v.RETURN_TRUSTED_TYPE||!1,Z=v.FORCE_BODY||!1,Mt=v.SANITIZE_DOM!==!1,be=v.SANITIZE_NAMED_PROPS||!1,At=v.KEEP_CONTENT!==!1,Ot=v.IN_PLACE||!1,st=v.ALLOWED_URI_REGEXP||td,De=v.NAMESPACE||Bt,Dr=v.MATHML_TEXT_INTEGRATION_POINTS||Dr,kr=v.HTML_INTEGRATION_POINTS||kr,z=v.CUSTOM_ELEMENT_HANDLING||{},v.CUSTOM_ELEMENT_HANDLING&&Ko(v.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=v.CUSTOM_ELEMENT_HANDLING.tagNameCheck),v.CUSTOM_ELEMENT_HANDLING&&Ko(v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),v.CUSTOM_ELEMENT_HANDLING&&typeof v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(z.allowCustomizedBuiltInElements=v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),M&&(D=!1),K&&(H=!0),Kt&&(Y=at({},Ql),B=[],Kt.html===!0&&(at(Y,Jl),at(B,tc)),Kt.svg===!0&&(at(Y,ga),at(B,ya),at(B,Br)),Kt.svgFilters===!0&&(at(Y,ma),at(B,ya),at(B,Br)),Kt.mathMl===!0&&(at(Y,va),at(B,ec),at(B,Br))),v.ADD_TAGS&&(Y===k&&(Y=en(Y)),at(Y,v.ADD_TAGS,Ct)),v.ADD_ATTR&&(B===ct&&(B=en(B)),at(B,v.ADD_ATTR,Ct)),v.ADD_URI_SAFE_ATTR&&at(Qt,v.ADD_URI_SAFE_ATTR,Ct),v.FORBID_CONTENTS&&(we===mn&&(we=en(we)),at(we,v.FORBID_CONTENTS,Ct)),At&&(Y["#text"]=!0),q&&at(Y,["html","head","body"]),Y.table&&(at(Y,["tbody"]),delete dt.tbody),v.TRUSTED_TYPES_POLICY){if(typeof v.TRUSTED_TYPES_POLICY.createHTML!="function")throw ir('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof v.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ir('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=v.TRUSTED_TYPES_POLICY,g=y.createHTML("")}else y===void 0&&(y=kT(f,i)),y!==null&&typeof g=="string"&&(g=y.createHTML(""));Xt&&Xt(v),_n=v}},Zo=at({},[...ga,...ma,...ET]),Jo=at({},[...va,...ST]),yd=function(v){let j=E(v);(!j||!j.tagName)&&(j={namespaceURI:De,tagName:"template"});const N=Qr(v.tagName),pt=Qr(j.tagName);return zn[v.namespaceURI]?v.namespaceURI===yn?j.namespaceURI===Bt?N==="svg":j.namespaceURI===vn?N==="svg"&&(pt==="annotation-xml"||Dr[pt]):!!Zo[N]:v.namespaceURI===vn?j.namespaceURI===Bt?N==="math":j.namespaceURI===yn?N==="math"&&kr[pt]:!!Jo[N]:v.namespaceURI===Bt?j.namespaceURI===yn&&!kr[pt]||j.namespaceURI===vn&&!Dr[pt]?!1:!Jo[N]&&(pd[N]||!Zo[N]):!!(Wn==="application/xhtml+xml"&&zn[v.namespaceURI]):!1},Ze=function(v){nr(e.removed,{element:v});try{E(v).removeChild(v)}catch{m(v)}},Ir=function(v,j){try{nr(e.removed,{attribute:j.getAttributeNode(v),from:j})}catch{nr(e.removed,{attribute:null,from:j})}if(j.removeAttribute(v),v==="is")if(H||K)try{Ze(j)}catch{}else try{j.setAttribute(v,"")}catch{}},Qo=function(v){let j=null,N=null;if(Z)v="<remove></remove>"+v;else{const xt=Zl(v,/^[\r\n\t ]+/);N=xt&&xt[0]}Wn==="application/xhtml+xml"&&De===Bt&&(v='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+v+"</body></html>");const pt=y?y.createHTML(v):v;if(De===Bt)try{j=new d().parseFromString(pt,Wn)}catch{}if(!j||!j.documentElement){j=b.createDocument(De,"template",null);try{j.documentElement.innerHTML=Gn?g:pt}catch{}}const It=j.body||j.documentElement;return v&&N&&It.insertBefore(n.createTextNode(N),It.childNodes[0]||null),De===Bt?x.call(j,q?"html":"body")[0]:q?j.documentElement:It},ts=function(v){return A.call(v.ownerDocument||v,v,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Vi=function(v){return v instanceof h&&(typeof v.nodeName!="string"||typeof v.textContent!="string"||typeof v.removeChild!="function"||!(v.attributes instanceof u)||typeof v.removeAttribute!="function"||typeof v.setAttribute!="function"||typeof v.namespaceURI!="string"||typeof v.insertBefore!="function"||typeof v.hasChildNodes!="function")},es=function(v){return typeof s=="function"&&v instanceof s};function ke(v,j,N){jr(v,pt=>{pt.call(e,j,N,_n)})}const ns=function(v){let j=null;if(ke($.beforeSanitizeElements,v,null),Vi(v))return Ze(v),!0;const N=Ct(v.nodeName);if(ke($.uponSanitizeElement,v,{tagName:N,allowedTags:Y}),v.hasChildNodes()&&!es(v.firstElementChild)&&zt(/<[/\w]/g,v.innerHTML)&&zt(/<[/\w]/g,v.textContent)||v.nodeType===or.progressingInstruction||nt&&v.nodeType===or.comment&&zt(/<[/\w]/g,v.data))return Ze(v),!0;if(!Y[N]||dt[N]){if(!dt[N]&&is(N)&&(z.tagNameCheck instanceof RegExp&&zt(z.tagNameCheck,N)||z.tagNameCheck instanceof Function&&z.tagNameCheck(N)))return!1;if(At&&!we[N]){const pt=E(v)||v.parentNode,It=S(v)||v.childNodes;if(It&&pt){const xt=It.length;for(let Ie=xt-1;Ie>=0;--Ie){const ae=w(It[Ie],!0);ae.__removalCount=(v.__removalCount||0)+1,pt.insertBefore(ae,_(v))}}}return Ze(v),!0}return v instanceof l&&!yd(v)||(N==="noscript"||N==="noembed"||N==="noframes")&&zt(/<\/no(script|embed|frames)/i,v.innerHTML)?(Ze(v),!0):(M&&v.nodeType===or.text&&(j=v.textContent,jr([G,C,R],pt=>{j=rr(j,pt," ")}),v.textContent!==j&&(nr(e.removed,{element:v.cloneNode()}),v.textContent=j)),ke($.afterSanitizeElements,v,null),!1)},rs=function(v,j,N){if(Mt&&(j==="id"||j==="name")&&(N in n||N in vd))return!1;if(!(D&&!lt[j]&&zt(rt,j))&&!(ft&&zt(X,j))){if(!B[j]||lt[j]){if(!(is(v)&&(z.tagNameCheck instanceof RegExp&&zt(z.tagNameCheck,v)||z.tagNameCheck instanceof Function&&z.tagNameCheck(v))&&(z.attributeNameCheck instanceof RegExp&&zt(z.attributeNameCheck,j)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(j))||j==="is"&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&zt(z.tagNameCheck,N)||z.tagNameCheck instanceof Function&&z.tagNameCheck(N))))return!1}else if(!Qt[j]&&!zt(st,rr(N,F,""))&&!((j==="src"||j==="xlink:href"||j==="href")&&v!=="script"&&yT(N,"data:")===0&&ze[v])&&!(U&&!zt(et,rr(N,F,"")))&&N)return!1}return!0},is=function(v){return v!=="annotation-xml"&&Zl(v,tt)},as=function(v){ke($.beforeSanitizeAttributes,v,null);const{attributes:j}=v;if(!j||Vi(v))return;const N={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B,forceKeepAttr:void 0};let pt=j.length;for(;pt--;){const It=j[pt],{name:xt,namespaceURI:Ie,value:ae}=It,Ee=Ct(xt);let Gt=xt==="value"?ae:_T(ae);if(N.attrName=Ee,N.attrValue=Gt,N.keepAttr=!0,N.forceKeepAttr=void 0,ke($.uponSanitizeAttribute,v,N),Gt=N.attrValue,be&&(Ee==="id"||Ee==="name")&&(Ir(xt,v),Gt=Ce+Gt),nt&&zt(/((--!?|])>)|<\/(style|title)/i,Gt)){Ir(xt,v);continue}if(N.forceKeepAttr||(Ir(xt,v),!N.keepAttr))continue;if(!I&&zt(/\/>/i,Gt)){Ir(xt,v);continue}M&&jr([G,C,R],bd=>{Gt=rr(Gt,bd," ")});const os=Ct(v.nodeName);if(rs(os,Ee,Gt)){if(y&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!Ie)switch(f.getAttributeType(os,Ee)){case"TrustedHTML":{Gt=y.createHTML(Gt);break}case"TrustedScriptURL":{Gt=y.createScriptURL(Gt);break}}try{Ie?v.setAttributeNS(Ie,xt,Gt):v.setAttribute(xt,Gt),Vi(v)?Ze(v):Kl(e.removed)}catch{}}}ke($.afterSanitizeAttributes,v,null)},_d=function v(j){let N=null;const pt=ts(j);for(ke($.beforeSanitizeShadowDOM,j,null);N=pt.nextNode();)ke($.uponSanitizeShadowNode,N,null),ns(N),as(N),N.content instanceof a&&v(N.content);ke($.afterSanitizeShadowDOM,j,null)};return e.sanitize=function(v){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=null,pt=null,It=null,xt=null;if(Gn=!v,Gn&&(v="<!-->"),typeof v!="string"&&!es(v))if(typeof v.toString=="function"){if(v=v.toString(),typeof v!="string")throw ir("dirty is not a string, aborting")}else throw ir("toString is not a function");if(!e.isSupported)return v;if(Q||Fi(j),e.removed=[],typeof v=="string"&&(Ot=!1),Ot){if(v.nodeName){const Ee=Ct(v.nodeName);if(!Y[Ee]||dt[Ee])throw ir("root node is forbidden and cannot be sanitized in-place")}}else if(v instanceof s)N=Qo("<!---->"),pt=N.ownerDocument.importNode(v,!0),pt.nodeType===or.element&&pt.nodeName==="BODY"||pt.nodeName==="HTML"?N=pt:N.appendChild(pt);else{if(!H&&!M&&!q&&v.indexOf("<")===-1)return y&&_t?y.createHTML(v):v;if(N=Qo(v),!N)return H?null:_t?g:""}N&&Z&&Ze(N.firstChild);const Ie=ts(Ot?v:N);for(;It=Ie.nextNode();)ns(It),as(It),It.content instanceof a&&_d(It.content);if(Ot)return v;if(H){if(K)for(xt=L.call(N.ownerDocument);N.firstChild;)xt.appendChild(N.firstChild);else xt=N;return(B.shadowroot||B.shadowrootmode)&&(xt=V.call(r,xt,!0)),xt}let ae=q?N.outerHTML:N.innerHTML;return q&&Y["!doctype"]&&N.ownerDocument&&N.ownerDocument.doctype&&N.ownerDocument.doctype.name&&zt(ed,N.ownerDocument.doctype.name)&&(ae="<!DOCTYPE "+N.ownerDocument.doctype.name+`>
`+ae),M&&jr([G,C,R],Ee=>{ae=rr(ae,Ee," ")}),y&&_t?y.createHTML(ae):ae},e.setConfig=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Fi(v),Q=!0},e.clearConfig=function(){_n=null,Q=!1},e.isValidAttribute=function(v,j,N){_n||Fi({});const pt=Ct(v),It=Ct(j);return rs(pt,It,N)},e.addHook=function(v,j){typeof j=="function"&&nr($[v],j)},e.removeHook=function(v,j){if(j!==void 0){const N=mT($[v],j);return N===-1?void 0:vT($[v],N,1)[0]}return Kl($[v])},e.removeHooks=function(v){$[v]=[]},e.removeAllHooks=function(){$=rc()},e}var Bo=nd();const Gr=t=>Bo.sanitize(t,{USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),IT=t=>Bo.sanitize(t,{NAMESPACE:"http://www.w3.org/2000/svg",USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),Ke=t=>Bo.sanitize(t,{ALLOWED_TAGS:[]}),rd=class id extends kt{constructor(){super(...arguments),this.type="toolbar",this.renderType=Tt.HTML}init(){const e=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener(T.Toolbar.SHOW_OVERFLOW_MENU,()=>{this.renderOverflowMenu(),document.body.addEventListener("click",e)}),this.services.events.addEventListener(T.Toolbar.HIDE_OVERFLOW_MENU,()=>{document.body.removeEventListener("click",e)})}render(e=!0){const n=this.getComponentContainer({ariaLabel:"toolbar"}).attr("role","group");if(O(this.getOptions(),"data","loading"))n.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=n.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));const{buttonList:r,overflowMenuItemList:i}=this.getControlConfigs();i&&r.push(this.getOverflowButtonConfig());const a=n.selectAll("div.toolbar-control").data(r,l=>l.id);a.exit().remove();const o=a.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu"),s=this;o.merge(a).classed("disabled",l=>l.shouldBeDisabled()).attr("role","button").attr("aria-disabled",l=>l.shouldBeDisabled()).attr("aria-label",l=>l.title).html(l=>`
			<button
				class="cds--overflow-menu__trigger cds--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${Ke(l.id)}`)}" aria-label="${Ke(l.title)}">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					${IT(l.iconSVG.content)}
				</svg>
			</button>`).each(function(l,c){P(this).select("svg").style("pointer-events","none").style("will-change","transform").style("width",l.iconSVG.width!==void 0?l.iconSVG.width:"20px").style("height",l.iconSVG.height!==void 0?l.iconSVG.height:"20px"),P(this).select("button").on("mouseover focus",function(u){const h=P(this);h.classed("hovered",!0),s.services.events.dispatchEvent(T.Toolbar.SHOW_TOOLTIP,{event:u,hoveredElement:h,content:l.title,noWrap:!0,placements:["top","bottom"]})}).on("mouseout blur",function(){s.services.events.dispatchEvent(T.Toolbar.HIDE_TOOLTIP)}).on("click",u=>{l.shouldBeDisabled()||s.triggerFunctionAndEvent(l,u,this)}).on("keydown",u=>{u.key&&u.key==="Enter"||u.key===" "?(u.preventDefault(),s.triggerFunctionAndEvent(l,u,this)):u.key&&u.key==="ArrowLeft"?s.focusOnPreviousEnabledToolbarItem(c):u.key&&u.key==="ArrowRight"&&s.focusOnNextEnabledToolbarItem(c)})}),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){const{overflowMenuItemList:e}=this.getControlConfigs(),n=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(e,i=>O(i,"id"));n.exit().remove();const r=n.enter().append("li").attr("id",i=>this.services.domUtils.generateElementIDString(`control-${i.id}`)).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);r.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),r.merge(n).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).attr("aria-disabled",i=>i.shouldBeDisabled()).selectAll("button").text(i=>i.title)}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(e){this.overflowMenu&&(this.overflowMenu.classed("is-open",e),this.overflowButton&&(this.overflowButton.attr("aria-expanded",e),P(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",e).classed("cds--overflow-menu--open",e)),e?this.services.events.dispatchEvent(T.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(T.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=P(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnNextEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=P(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnPreviousEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=P(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}focusOnNextEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=P(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}toggleOverflowMenu(e){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);const n=this;this.getOverflowMenuItems().forEach((r,i)=>{const a=P(`#${this.services.domUtils.generateElementIDString(`control-${r.id}`)}`);a!==null&&(a.on("click",()=>{n.triggerFunctionAndEvent(r,e,a.node()),n.updateOverflowMenu(!1)}),a.on("keydown",o=>{o&&o.key==="Enter"?n.triggerFunctionAndEvent(r,e,a.node()):o&&o.key==="ArrowUp"?n.focusOnPreviousEnabledMenuItem(i):o&&o.key==="ArrowDown"?n.focusOnNextEnabledMenuItem(i):o&&o.key==="Escape"&&n.updateOverflowMenu(!1),o.preventDefault()}))}),n.focusOnNextEnabledMenuItem(-1)}e&&e.stopImmediatePropagation()}triggerFunctionAndEvent(e,n,r){typeof e.shouldBeDisabled=="function"&&e.shouldBeDisabled()||(typeof e.clickFunction=="function"&&e.clickFunction(n),this.services.events.dispatchEvent(T.Toolbar.BUTTON_CLICK,{control:e,event:n,element:r}))}getControlConfigs(){const e=O(this.getOptions(),"toolbar","numberOfIcons")-1,n=O(this.getOptions(),"toolbar","controls"),r=[],i=[],a=[];return n.forEach(o=>{let s=null;if(o.type===gt.CUSTOM)O(o,"id")===null&&(o.id=`toolbar-button-${id.buttonID++}`),O(o,"shouldBeDisabled")===null&&(o.shouldBeDisabled=()=>!1),s=o;else{const l=this.services.domUtils.isFullScreenMode();o.type===gt.MAKE_FULLSCREEN&&l?o.type=gt.EXIT_FULLSCREEN:o.type===gt.EXIT_FULLSCREEN&&!l&&(o.type=gt.MAKE_FULLSCREEN),s=this.getControlConfigByType(o.type)}s&&(s.text=o.text?o.text:o.type,s.id.indexOf("toolbar-export")!==-1?r.push(s):i.length<e?O(s,"iconSVG","content")===null?a.push(s):i.push(s):a.push(s))}),a.push(...r),a.length?{buttonList:i,overflowMenuItemList:a}:{buttonList:i}}getToolbarButtonItems(){const{buttonList:e,overflowMenuItemList:n}=this.getControlConfigs();return n&&e.push(this.getOverflowButtonConfig()),e||[]}getOverflowMenuItems(){const{overflowMenuItemList:e}=this.getControlConfigs();return e||[]}getOverflowButtonConfig(){const{moreOptions:e}=O(this.model.getOptions(),"locale","translations","toolbar");return{id:"toolbar-overflow-menu",title:e,shouldBeDisabled:()=>!1,iconSVG:{content:`<circle cx="16" cy="8" r="2"></circle>
				<circle cx="16" cy="16" r="2"></circle>
				<circle cx="16" cy="24" r="2"></circle>`},clickFunction:n=>this.toggleOverflowMenu(n)}}getControlConfigByType(e){const n=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),r=this.model.getDisplayData(),i=this.model.getOptions(),{exportAsCSV:a,exportAsJPG:o,exportAsPNG:s,zoomIn:l,zoomOut:c,resetZoom:u,makeFullScreen:h,exitFullScreen:d,showAsTable:f}=O(i,"locale","translations","toolbar");let p;switch(e){case gt.ZOOM_IN:n&&(p={id:"toolbar-zoomIn",title:l,shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomIn()});break;case gt.ZOOM_OUT:n&&(p={id:"toolbar-zoomOut",title:c,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomOut()});break;case gt.RESET_ZOOM:n&&(p={id:"toolbar-resetZoom",title:u,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case gt.MAKE_FULLSCREEN:p={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:h,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case gt.EXIT_FULLSCREEN:p={id:"toolbar-exitfullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:d,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case gt.SHOW_AS_DATATABLE:p={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(e)},title:f,shouldBeDisabled:()=>r.length===0,clickFunction:()=>this.services.events.dispatchEvent(T.Modal.SHOW)};break;case gt.EXPORT_CSV:p={id:"toolbar-export-CSV",title:a,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.model.exportToCSV()};break;case gt.EXPORT_PNG:p={id:"toolbar-export-PNG",title:s,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case gt.EXPORT_JPG:p={id:"toolbar-export-JPG",title:o,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+e)}return p}getControlIconByType(e){switch(e){case gt.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case gt.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case gt.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case gt.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case gt.EXIT_FULLSCREEN:return'<polygon points="4 18 4 20 10.586 20 2 28.582 3.414 30 12 21.414 12 28 14 28 14 18 4 18"/><polygon points="30 3.416 28.592 2 20 10.586 20 4 18 4 18 14 28 14 28 12 21.414 12 30 3.416"/>';case gt.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case gt.EXPORT_CSV:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case gt.EXPORT_JPG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case gt.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+e)}}};rd.buttonID=0;let RT=rd;const ad=class od extends kt{constructor(e,n,r,i){super(e,n,i),this.type="layout",this.configs=i,this.children=r,this._instanceID=od.instanceID++,this.init()}init(){this.children.forEach(e=>{e.components.forEach(n=>{n.init()})})}getPreferedAndFixedSizeSum(){const e=this.parent;let n=0;return e.selectAll(`div.layout-child-${this._instanceID}`).filter(r=>{const i=O(r,"growth");return i===Ut.PREFERRED||i===Ut.FIXED}).each(function(r){n+=r.size}),n}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter(e=>O(e,"growth")===Ut.STRETCH).size()}render(e=!0){const n=this.model.getOptions(),r=this.parent,{width:i,height:a}=J.getHTMLElementSize(r.node()),o=this.configs.direction===ee.ROW||this.configs.direction===ee.ROW_REVERSE,s=O(this.model.getOptions(),"style","prefix"),l=r.classed(`${ne}--${s}--layout-row`,this.configs.direction===ee.ROW).classed(`${ne}--${s}--layout-row-reverse`,this.configs.direction===ee.ROW_REVERSE).classed(`${ne}--${s}--layout-column`,this.configs.direction===ee.COLUMN).classed(`${ne}--${s}--layout-column-reverse`,this.configs.direction===ee.COLUMN_REVERSE).classed(`${ne}--${s}--layout-alignitems-center`,this.configs.alignItems===io.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,u=>u.id);l.enter().append("div").merge(r.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",u=>`layout-child layout-child-${this._instanceID} ${u.id}`).each(function(u){u.components.forEach(h=>{var d;const f=P(this),p=O(u,"renderType")===Tt.SVG;h.setParent(p?J.appendOrSelect(f,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):f),p&&!f.select("svg.layout-svg-wrapper").attr("aria-label")&&f.select("svg.layout-svg-wrapper").attr("aria-label",((d=n==null?void 0:n.accessibility)==null?void 0:d.svgAriaLabel)||(n==null?void 0:n.title));const w=O(u,"growth");(w===Ut.PREFERRED||w===Ut.FIXED)&&h.render(e)})}),r.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each(function(u){const h=O(u,"growth"),d=O(u,"renderType")===Tt.SVG?J.getSVGElementSize(P(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):J.getHTMLElementSize(this);if(h===Ut.PREFERRED){const f=o?d.width:d.height,p=o?i:a;u.size=f/p*100}}),l.exit().remove(),this.children.filter(u=>O(u,"growth")===Ut.STRETCH).forEach(u=>{u.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()});const c=r.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,u=>u.id);o?c.style("width",u=>`${u.size/100*i}px`).style("height","100%"):c.style("height",u=>`${u.size/100*a}px`).style("width","100%"),c.each(function(u){u.components.forEach(h=>{O(u,"growth")===Ut.STRETCH&&h.render(e)})})}setModel(e){super.setModel(e),this.children.forEach(n=>{n.components.forEach(r=>r.setModel(e))})}setServices(e){super.setServices(e),this.children.forEach(n=>{n.components.forEach(r=>r.setServices(e))})}destroy(){this.children.forEach(e=>{e.components.forEach(n=>n.destroy())})}};ad.instanceID=Math.floor(Math.random()*99999999999);let _a=ad;class ic extends kt{constructor(){super(...arguments),this.type="spacer"}render(e=!1){this.getComponentContainer({isPresentational:!0}).style("width",`${this.configs.size||hl.default.size}px`).style("height",`${this.configs.size||hl.default.size}px`).attr("opacity",0)}}class NT extends kt{constructor(e,n,r){super(e,n,r),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{const i=this.services.domUtils.getChartID();this.modal.attr("data-modal",!0).attr("class","cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby",`${i}__modal-title`).attr("aria-describedby",`${i}__modal-description`).attr("tabindex",-1).style("opacity",1).style("visibility","visible"),this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",()=>this.model.exportToCSV()),this.modal.on("click",this.handleHideModal),this.modal.select(".cds--modal-container").on("click",a=>{a.stopPropagation()}),this.modal.select(".cds--modal-close").on("click",this.handleHideModal),typeof window<"u"&&window.addEventListener("keydown",this.handleEscapeKey)},this.handleEscapeKey=i=>{i.key==="Escape"&&this.handleHideModal()},this.handleHideModal=()=>{this.modal.attr("role",null).attr("aria-modal",null).attr("aria-labelledby",null).attr("aria-describedby",null).attr("tabindex",null).style("opacity",0).style("visibility","hidden"),this.modal.on("click",null),this.modal.select(".cds--modal-container").on("click",null),this.modal.select(".cds--modal-close").on("click",null),typeof window<"u"&&window.removeEventListener("keydown",this.handleEscapeKey)},this.init()}addEventListeners(){this.services.events.addEventListener(T.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener(T.Modal.SHOW,this.handleShowModal)}getModalHTML(){const e=this.services.domUtils.getChartID(),n=this.model.getOptions(),{title:r,downloadAsCSV:i}=O(n,"locale","translations","tabularRep"),a=O(n,"style","prefix"),o=this.model.getTabularDataArray();return`
		<div class="cds--modal-container">
			<div class="cds--modal-header">

				<p class="cds--modal-header__label cds--type-delta" id="modal-title">${r}</p>

				<p class="cds--modal-header__heading cds--type-beta" id="${e}__modal-description">${Ke(n.title)}</p>

				<button class="cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>

			<div class="cds--modal-content">
				<table class="cds--data-table cds--data-table--no-border">
					<thead>
						<tr>
							${du(o,0).map(s=>`<th scope="col">
								<div class="cds--table-header-label">${Ke(s)}</div>
							</th>`).join("")}
						</tr>
					</thead>

					<tbody>${o.slice(1).map(s=>`
							<tr>
								${s.map(l=>`<td>${Ke(l)}</td>`).join("")}
							</tr>`).join("")}
					</tbody>
				</table>
			</div>

			<div class="cds--modal-footer">
			  <div class="${ne}--${a}-modal-footer-spacer"></div>
			  <button class="cds--btn cds--btn--primary" type="button" data-modal-primary-focus>${i}</button>
			</div>
		</div>`}render(e=!1){const n=this.model.getOptions();if(!this.isEventListenerAdded){const r=P(this.services.domUtils.getHolder()),i=O(n,"style","prefix");this.modal=J.appendOrSelect(r,`div.${ne}--${i}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class UT extends kt{constructor(){super(...arguments),this.type="title",this.renderType=Tt.HTML}render(e=!1){const n=this.getComponentContainer(),r=O(this.getOptions(),"title"),i=n.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(a=>Ke(a)),i.node()&&i.node().offsetWidth<i.node().scrollWidth){const a=this;i.on("mouseover",function(o){a.services.events.dispatchEvent(T.Tooltip.SHOW,{event:o,hoveredElement:i,content:i.text()})}).on("mousemove",function(o){a.services.events.dispatchEvent(T.Tooltip.MOVE,{event:o})}).on("mouseout",function(){a.services.events.dispatchEvent(T.Tooltip.HIDE)})}i.exit().remove()}truncateTitle(e,n){if(n<=0)return;const r=e.text();if(e.node().getComputedTextLength()>n){e.append("tspan").text("...");const i=J.appendOrSelect(e,"tspan").node().getComputedTextLength(),a=e.text(),o=this.getSubstringIndex(e.node(),0,a.length-1,n-i);e.html(a.substring(0,o-1)).append("tspan").text("...");const s=this;e.on("mouseover",function(l){s.services.events.dispatchEvent(T.Tooltip.SHOW,{event:l,hoveredElement:e,content:r})}).on("mousemove",function(l){s.services.events.dispatchEvent(T.Tooltip.MOVE,{event:l})}).on("mouseout",function(){s.services.events.dispatchEvent(T.Tooltip.HIDE)})}}getMaxTitleWidth(){return J.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(e,n,r,i){const a=Math.floor((r+n)/2);return e.getSubStringLength(0,a)>i?this.getSubstringIndex(e,n,a,i):e.getSubStringLength(0,a)<i?e.getSubStringLength(0,a+1)>i?a:this.getSubstringIndex(e,a,r,i):a}}class PT extends kt{constructor(){super(...arguments),this.type="legend",this.renderType=Tt.HTML}render(e=!1){const n=this.getOptions(),r=O(n,"legend"),i=O(r,"alignment"),a=O(n,"legend","orientation");let o=this.model.getDataGroups();const{DISABLED:s}=Rt.items.status,l=o.some(S=>S.status===s),c=O(r,"order"),u=this.getComponentContainer().classed("center-aligned",i===re.CENTER).classed("right-aligned",i===re.RIGHT).classed(a,!0).classed("has-deactivated-items",l).attr("role",St.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(o=this.sortDataGroups(o,c));const h=u.selectAll("div.legend-item").data(o,S=>S.name),d=h.enter().append("div").attr("class","legend-item");d.merge(u.selectAll("div.legend-item")).classed("active",function(S){return S.status===Rt.items.status.ACTIVE});const f=O(this.getOptions(),"legend","clickable");u.classed("clickable",f&&o.length>1);const p=Rt.checkbox.radius,w=d.append("div").classed("checkbox",!0),m=w.merge(h.select("div.checkbox")).attr("role",St.CHECKBOX).attr("tabindex",f?0:-1).attr("aria-labelledby",(S,E)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${E}-title`)).attr("aria-checked",({status:S})=>S===Rt.items.status.ACTIVE).attr("width",p*2).attr("height",p*2).attr("class",S=>this.model.getColorClassName({classNameTypes:[jt.BACKGROUND],dataGroupName:S.name,originalClassName:"checkbox"})).style("background",S=>S.status===Rt.items.status.ACTIVE?this.model.getFillColor(S.name)||this.model.getStrokeColor(S.name):null).classed("active",function(S){return S.status===Rt.items.status.ACTIVE});w.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),d.append("p").merge(h.select("p"));const _=O(n,"legend","additionalItems");if(_&&o.length){const S=this,E=u.selectAll("div.additional-item").data(_);E.exit().remove();const y=E.enter().append("div").merge(E).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",(A,L)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${m.size()+L}-title`));y.selectAll("*").remove();let g,b=1;y.append("svg").classed("icon",!0).each(function(A){const L=P(this);!g||g!=A.type?(g=A.type,b=1):b++,S.addAdditionalItem(L,A,b)}),y.append("p").merge(y.select("p")),this.truncateLegendText()}h.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),f&&d.size()>1&&this.addEventListeners()}sortDataGroups(e,n){if(e.sort((r,i)=>n.indexOf(r.name)-n.indexOf(i.name)),n.length<e.length){const r=e.length-n.length;return e.slice(r).concat(e.slice(0,r))}return e}addAdditionalItem(e,n,r){const{width:i,height:a}=Rt.area;if(n.type===Lt.RADIUS?e.style("width",`${a}px`).style("height",`${a}px`):e.style("width",`${i}px`).style("height",`${a}px`),n.type===Lt.RADIUS){const{iconData:o,fill:s,stroke:l}=Rt.radius;e.attr("fill","none").selectAll("circle").data(o).enter().append("circle").classed("radius",!0).attr("role",St.IMG).attr("aria-label","radius").attr("cx",c=>c.cx).attr("cy",c=>c.cy).attr("r",c=>c.r).style("fill",n.fill?n.fill:s).style("stroke",n.stroke?n.stroke:l)}else if(n.type===Lt.LINE){const o=Rt.line;e.select("line.line").empty()&&e.append("line").classed(`line-${r}`,!0).attr("role",St.IMG).attr("aria-label","line").attr("x1",0).attr("y1",o.yPosition).attr("x2",i).attr("y2",o.yPosition).style("stroke",n.stroke?n.stroke:o.stroke).style("stroke-width",o.strokeWidth)}else if(n.type===Lt.AREA)e.select("rect.area").empty()&&e.append("rect").classed(`area-${r}`,!0).attr("role",St.IMG).attr("aria-label","area").attr("width",i).attr("height",a).style("fill",r>3&&!n.fill?Rt.area.fill:n.fill).style("stroke",n.stroke);else if(n.type===Lt.SIZE){const{iconData:o,fill:s,stroke:l}=Rt.size;e.attr("fill","none").attr("role",St.IMG).attr("aria-label","size").selectAll("rect").data(o).enter().append("rect").classed("size",!0).attr("width",c=>c.width).attr("height",c=>c.height).attr("y",()=>0).style("fill",n.fill?n.fill:s).style("stroke",n.stroke?n.stroke:l).style("stroke-width",1)}else if(n.type===Lt.QUARTILE){const{iconData:o}=Rt.quartile;e.selectAll("rect").attr("role",St.IMG).attr("aria-label","quartile").data(o).enter().append("rect").attr("class",(s,l)=>`quartile-${l===0?"wrapper":"line"}`).attr("x",s=>s.x).attr("y",s=>s.y).attr("width",s=>s.width).attr("height",s=>s.height)}else if(n.type===Lt.ZOOM){const{iconData:o,color:s}=O(Rt,"zoom"),l=e.attr("role",St.IMG).attr("aria-label","zoom").selectAll("g.icon").data(o).enter();l.append("g").attr("x",c=>c.x).attr("y",c=>c.y).attr("width",c=>c.width).attr("height",c=>c.height).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",()=>n.color?n.color:s),l.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",()=>n.color?n.color:s)}}truncateLegendText(){const e=this.getComponentContainer(),n=O(this.getOptions(),"legend","truncation"),r=O(n,"type"),i=O(n,"threshold"),a=O(n,"numCharacter"),o=e.selectAll("div.legend-item p");o.attr("id",function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")}),r!==Oe.NONE?o.html(function(s){const l=Ke(s.name);return l.length>i&&l.length!==a?Ga(l,r,a):l}):o.html(s=>Ke(s.name))}addEventListeners(){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=O(r,"legend"),a=O(i,"truncation");n.selectAll("div.legend-item").on("mouseover",function(o){e.services.events.dispatchEvent(T.Legend.ITEM_HOVER,{hoveredElement:P(this)});const s=P(this);s.select("div.checkbox").classed("hovered",!0);const l=s.datum();l.name.length>a.threshold&&a.numCharacter<l.name.length&&a.type!==Oe.NONE&&e.services.events.dispatchEvent(T.Tooltip.SHOW,{event:o,hoveredElement:s,content:l.name})}).on("mousemove",function(o){P(this).datum().name.length>a.threshold&&a.type!==Oe.NONE&&e.services.events.dispatchEvent(T.Tooltip.MOVE,{event:o})}).on("click",function(){e.services.events.dispatchEvent(T.Legend.ITEM_CLICK,{clickedElement:P(this)});const o=P(this).datum();e.model.toggleDataLabel(o.name)}).on("mouseout",function(){const o=P(this);o.select("div.checkbox").classed("hovered",!1),o.datum().name.length>a.threshold&&a.type!==Oe.NONE&&e.services.events.dispatchEvent(T.Tooltip.HIDE),e.services.events.dispatchEvent(T.Legend.ITEM_MOUSEOUT,{hoveredElement:o})}),n.selectAll("div.legend-item div.checkbox").on("keyup",function(o){o.key&&o.key==="Tab"&&e.services.events.dispatchEvent(T.Legend.ITEM_HOVER,{hoveredElement:P(this)})}),n.selectAll("div.legend-item div.checkbox").on("keydown",function(o,s){o.key&&o.key===" "?(o.preventDefault(),e.model.toggleDataLabel(s.name)):o.key&&o.key==="Tab"&&e.services.events.dispatchEvent(T.Legend.ITEM_MOUSEOUT,{hoveredElement:P(this)})}),n.selectAll("g.additional-item").on("mouseover",function(o){const s=P(this),l=s.datum();l.name.length>a.threshold&&e.services.events.dispatchEvent(T.Tooltip.SHOW,{event:o,hoveredElement:s,content:l.name})})}}class HT extends kt{constructor(e,n,r){super(e,n,r),this.type="chart-clip",this.renderType=Tt.SVG,this.chartClipId="chart-clip-id-"+Math.floor(Math.random()*99999999999),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(e=!0){this.createClipPath()}createClipPath(){const e=this.parent,{cartesianScales:n}=this.services;if(!n)throw new Error("Service cartesianScales was undefined");const r=n.getMainXScale(),i=n.getMainYScale(),[a,o]=r.range(),[s,l]=i.range();if(!e)throw new Error("svg is undefined");this.chartClipPath=J.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const c=J.appendOrSelect(this.chartClipPath,`rect.${this.type}`);o-a>0&&c.attr("x",a).attr("y",l).attr("width",o-a).attr("height",s-l),this.chartClipPath.merge(c).lower()}}class FT extends HT{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(Math.random()*99999999999)}createClipPath(){const e=this.parent,{width:n,height:r}=J.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=J.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const i=J.appendOrSelect(this.chartClipPath,`rect.${this.type}`);i.attr("x",0).attr("y",0).attr("width",n).attr("height",r),this.chartClipPath.merge(i).lower()}}var xn,Nt;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(Nt||(Nt={}));var ac=(xn={},xn[Nt.LEFT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left-e.offsetWidth)}},xn[Nt.RIGHT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left+n.width)}},xn[Nt.TOP]=function(t,e,n){return{top:Math.round(t.top-e.offsetHeight),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},xn[Nt.BOTTOM]=function(t,e,n){return{top:Math.round(t.top+n.height),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},xn),oc=typeof window<"u"?window:{innerHeight:0,innerWidth:0},sd=function(){function t(e){e===void 0&&(e={}),this.positions=ac,this.positions=Object.assign({},ac,e)}return t.prototype.getRelativeOffset=function(e){for(var n={left:e.offsetLeft,top:e.offsetTop};e.offsetParent&&getComputedStyle(e.offsetParent).position==="static";)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},t.prototype.getAbsoluteOffset=function(e){for(var n=e,r={top:0,left:0};n.offsetParent;){var i=getComputedStyle(n.offsetParent);i.position==="static"&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),n=n.offsetParent}var a=e.getBoundingClientRect(),o=document.body.getBoundingClientRect();return{top:a.top-o.top+r.top,left:a.left-o.left+r.left}},t.prototype.findRelative=function(e,n,r){var i=this.getRelativeOffset(e),a=e.getBoundingClientRect();return this.calculatePosition(i,a,n,r)},t.prototype.findAbsolute=function(e,n,r){var i=this.getAbsoluteOffset(e),a=e.getBoundingClientRect();return this.calculatePosition(i,a,n,r)},t.prototype.findPosition=function(e,n,r,i){i===void 0&&(i=this.getAbsoluteOffset.bind(this));var a=i(e),o=e.getBoundingClientRect();return this.calculatePosition(a,o,n,r)},t.prototype.findPositionAt=function(e,n,r){return this.calculatePosition(e,{top:0,left:0,height:0,width:0},n,r)},t.prototype.getPlacementBox=function(e,n){var r=e.offsetHeight+n.top,i=e.offsetWidth+n.left;return{top:n.top,bottom:r,left:n.left,right:i}},t.prototype.addOffset=function(e,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),Object.assign({},e,{top:e.top+n,left:e.left+r})},t.prototype.setElement=function(e,n){e.style.top=n.top+"px",e.style.left=n.left+"px"},t.prototype.findBestPlacement=function(e,n,r,i,a){var o=this;i===void 0&&(i=this.defaultContainerFunction.bind(this)),a===void 0&&(a=this.findPosition.bind(this));var s=r.map(function(l){var c=a(e,n,l),u=o.getPlacementBox(n,c),h=0,d=0,f=i();u.top<f.top?h=f.top-u.top:u.bottom>f.height&&(h=u.bottom-f.height),u.left<f.left?d=f.left-u.left:u.right>f.width&&(d=u.right-f.width),h&&!d?d=1:d&&!h&&(h=1);var p=n.offsetHeight*n.offsetWidth,w=h*d,m=p-w,_=m/p;return{placement:l,weight:_}});return s.sort(function(l,c){return c.weight-l.weight}),s[0].placement},t.prototype.findBestPlacementAt=function(e,n,r,i){var a=this;i===void 0&&(i=this.defaultContainerFunction.bind(this));var o=function(s,l,c){return a.findPositionAt(e,l,c)};return this.findBestPlacement(null,n,r,i,o)},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:oc.innerHeight,width:oc.innerWidth}},t.prototype.calculatePosition=function(e,n,r,i){return this.positions[i]?this.positions[i](e,r,n):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new sd;class VT extends kt{constructor(e,n,r){super(e,n,r),this.type="tooltip",this.renderType=Tt.HTML,this.isEventListenerAdded=!1,this.lastTriggeredEventType="",this.positionService=new sd,this.handleShowTooltip=i=>{const a=i.detail.data||i.detail.items,o=P(i.detail.event.target).datum();let s;const l=this.formatItems(this.getItems(i));i.detail.content?s=`<div class="title-tooltip"><p>${Gr(i.detail.content)}</p></div>`:s=Gr(this.getTooltipHTML(l));const c=J.appendOrSelect(this.tooltip,"div.content-box");if(O(this.getOptions(),"tooltip","customHTML"))if(i.detail.content){const u=`<div class="title-tooltip"><p>${Gr(i.detail.content)}</p></div>`;c.html(u)}else c.html(`<div class="title-tooltip"><p>${Gr(this.model.getOptions().tooltip.customHTML(a,s,o))}</p></div>`);else c.html(s);c.selectAll(".datapoint-tooltip").each(function(u,h){const d=l[h];l[h]&&l[h].color&&P(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",d.color)}),this.positionTooltip(i),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1),this.lastTriggeredEventType=i.type},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener(T.Tooltip.MOVE,e=>{this.lastTriggeredEventType!==T.Toolbar.SHOW_TOOLTIP&&this.tooltip.classed("hidden")===!1&&this.positionTooltip(e)}),this.services.events.addEventListener(T.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(T.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(T.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.addEventListener(T.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.addEventListener(T.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener(T.Tooltip.MOVE,null),this.services.events.removeEventListener(T.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(T.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(T.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.removeEventListener(T.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.removeEventListener(T.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}getItems(e){return e.detail.items?e.detail.items:[]}formatItems(e){const n=this.getOptions(),r=O(n,"tooltip","truncation","type"),i=O(n,"tooltip","truncation","threshold"),a=O(n,"tooltip","truncation","numCharacter");return r!==Oe.NONE?e.map(o=>{const s=o.labelIcon?12:0;return o.value=o.value?this.valueFormatter(o.value,o.label):o.value,o.label&&o.label.length+s>i&&(o.label=Ga(o.label,r,a)),o.value&&o.value.length>i&&(o.value=Ga(o.value,r,a)),o}):e.map(o=>(o.value=o.value?this.valueFormatter(o.value,o.label):o.value,o))}getTooltipHTML(e){return'<ul class="multi-tooltip">'+e.map(n=>`<li>
					<div class="datapoint-tooltip${n.bold?" bold":""}">
						${n.class||n.color?`<div class="tooltip-color ${n.class}"></div>`:""}
						<div class="label">
						<p>${n.label||""}</p>
						${n.labelIcon?`<span class="label-icon"/>${n.labelIcon}</span>`:""}
						</div>
						${n.value===void 0||n.value===null?"":`<p class="value"/>${n.value}</p>`}
					</div>
				</li>`).join("")+"</ul>"}isDate(e){return e instanceof Date}valueFormatter(e,n){const r=this.getOptions(),i=O(r,"tooltip","valueFormatter"),{code:a,number:o,date:s}=O(r,"locale");if(i)return i(e,n);if(this.isDate(e))return s(e,a,{month:"short",day:"numeric",year:"numeric"});try{if(typeof e=="string"&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e)){const l=new Date(e);return s(l,a,{month:"short",day:"numeric",year:"numeric"})}}catch{}return o(e,a)}render(e=!1){const n=this.getOptions(),r=O(n,"tooltip","enabled");if(r){const i=P(this.services.domUtils.getHolder()),a=O(n,"style","prefix");this.tooltip=J.appendOrSelect(i,`div.${ne}--${a}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}addOffsetByPlacement(e,n,r){const i=Object.assign({},e);return n==Nt.LEFT?i.left-=r:n==Nt.RIGHT?i.left+=r:n==Nt.TOP?i.top-=r:n==Nt.BOTTOM&&(i.top+=r),i}positionTooltip(e){const n=this.services.domUtils.getHolder(),r=n.offsetWidth,i=n.offsetHeight,a=this.tooltip.node(),o=this.getOptions(),s=O(o,"zoomBar","top","enabled"),l=!!O(e,"detail","noWrap"),c=Array.isArray(O(e,"detail","placements")),u=c?O(e,"detail","placements"):[Nt.RIGHT,Nt.LEFT,Nt.TOP,Nt.BOTTOM];let h,{horizontalOffset:d}=dl;const{defaultOffset:f}=dl;if(this.tooltip.select("div.title-tooltip").classed("title-tooltip-nowrap",l),c){const m=O(e,"detail","event","target"),_=this.services.domUtils.getElementOffset(m,!0);h=this.positionService.findBestPlacementAt(_,a,u,()=>({top:0,left:0,width:r,height:i}));let S=this.positionService.findPosition(m,a,h,()=>this.services.domUtils.getElementOffset(m));S=this.addOffsetByPlacement(S,h,f),this.positionService.setElement(a,S);return}let p=O(e,"detail","mousePosition");if(!p)p=Un(O(e,"detail","event"),n);else{const m=O(o,"zoomBar","top","type"),_=pl.height[m];s&&(p[1]+=_+pl.spacerHeight)}p[0]/r>.9?h=Nt.LEFT:p[0]/r<.1?h=Nt.RIGHT:h=this.positionService.findBestPlacementAt({left:p[0],top:p[1]},a,u,()=>({top:void 0,left:void 0,width:r,height:i})),h===Nt.LEFT&&(d*=-1);const w=this.positionService.findPositionAt({left:p[0]+d,top:p[1]},a,h);this.positionService.setElement(a,w)}}const jT=class ti extends kt{constructor(){super(...arguments),this.type="grid-brush",this.renderType=Tt.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(e=!0){const n=this.parent,r=this.getComponentContainer({isPresentational:!0});if(!n)throw new Error("SVG was not defined");const i=J.appendOrSelect(n,"svg.chart-grid-backdrop"),a=J.appendOrSelect(i,`g.${this.type}`),o=J.appendOrSelect(a,this.selectionSelector),{width:s,height:l}=J.getSVGElementSize(i,{useAttrs:!0}),{cartesianScales:c}=this.services,u=c.getMainXScaleType(),h=c.getMainXScale(),[d]=h.range();r.attr("transform",`translate(${d},0)`);const f=J.appendOrSelect(r,this.frontSelectionSelector);if(h&&u===fe.TIME){let p=this.model.get("zoomDomain");p===void 0&&(p=this.services.zoom.getDefaultZoomBarDomain(),p&&this.model.set({zoomDomain:p},{animate:!1}));const w=g=>{const b=g[1]-g[0];let A="0,"+b.toString();const L=Math.floor(l/ti.DASH_LENGTH),x=L*ti.DASH_LENGTH;for(let V=0;V<L;V++)A+=","+ti.DASH_LENGTH;A+=","+(l-x),L%2===1&&(A+=",0"),A+=","+b.toString(),A+=","+l.toString(),f.attr("stroke-dasharray",A)},m=g=>{const b=g.selection;b===null||b[0]===b[1]||(f.attr("x",parseFloat(o.attr("x"))+parseFloat(i.attr("x"))).attr("y",o.attr("y")).attr("width",o.attr("width")).attr("height",o.attr("height")).style("cursor","pointer").style("display",null),w(b))},_=(g,b)=>{const A=pE().range([0,s]).domain(p);let L=[A.invert(g),A.invert(b)];L[0].valueOf()===L[1].valueOf()&&(L=this.services.zoom.getDefaultZoomBarDomain()),(p[0].valueOf()!==L[0].valueOf()||p[1].valueOf()!==L[1].valueOf())&&this.services.zoom.handleDomainChange(L)};let S;const E=g=>{const b=g.selection;b!==null&&(_(b[0],b[1]),a.call(S.move,null),f.style("display","none"))};l!=0&&s!=0&&(S=$S().extent([[0,0],[s-1,l]]).on("start brush end",m).on("end.brushed",E),a.call(S));const y=this.services.zoom.getZoomRatio();i.on("click",function(g){if(g.shiftKey){const b=this.services.domUtils.getHolder(),A=Un(a.node(),b)[0];let L=A-s*y/2;L<0&&(L=0);let x=A+s*y/2;x>s&&(x=s),_(L,x)}})}}};jT.DASH_LENGTH=4;var eo=Math.PI,no=2*eo,nn=1e-6,BT=no-nn;function sc(){this._x0=this._y0=this._x1=this._y1=null,this._=""}sc.prototype={constructor:sc,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,l=r-e,c=a-t,u=o-e,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>nn)if(!(Math.abs(u*s-l*c)>nn)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var d=n-a,f=r-o,p=s*s+l*l,w=d*d+f*f,m=Math.sqrt(p),_=Math.sqrt(h),S=i*Math.tan((eo-Math.acos((p+h-w)/(2*m*_)))/2),E=S/_,y=S/m;Math.abs(E-1)>nn&&(this._+="L"+(t+E*c)+","+(e+E*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>c*f)+","+(this._x1=t+y*s)+","+(this._y1=e+y*l)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,c=e+s,u=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>nn||Math.abs(this._y1-c)>nn)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%no+no),h>BT?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>nn&&(this._+="A"+n+","+n+",0,"+ +(h>=eo)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};class GT extends kt{constructor(){super(...arguments),this.type="area",this.renderType=Tt.SVG,this.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.area").transition("legend-hover-area").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-area"})).attr("opacity",r=>r.name!==n.datum().name?Ue.opacity.unselected:Ue.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",Ue.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"area graphs",withinChartClip:!0}),r=this.getOptions();let i=[0,0];const{cartesianScales:a}=this.services,o=a.getOrientation(),s=Zh().curve(this.services.curves.getD3Curve()).defined(g=>{const b=a.getRangeIdentifier();return g[b]!=null}),l=this.model.getGroupedData(this.configs.groups),c=O(r,"bounds"),u=c&&l&&l.length===1;!u&&c&&console.warn(`Bounds can only be shown when having 1 single datagroup, you've supplied ${l.length}`);let h=0;const d=(g,b)=>{O(r,"axes",g,"includeZero")===!1&&b[0]>0&&b[1]>0&&(h=b[0])},f=g=>u?a.getBoundedScaledValues(g)[0]:a.getRangeValue(h),p=g=>u?a.getBoundedScaledValues(g)[1]:a.getRangeValue(g);o===le.VERTICAL?(i=a.getMainYScale().domain(),d(a.getMainYAxisPosition(),i),s.x(g=>a.getDomainValue(g)).y0(g=>f(g)).y1(g=>p(g))):(i=a.getMainXScale().domain(),d(a.getMainXAxisPosition(),i),s.x0(g=>f(g)).x1(g=>p(g)).y(g=>a.getDomainValue(g)));const w=O(r,"color","gradient","enabled"),m=l&&l.length===1&&w;l.length>1&&w&&console.error("Gradients can only be enabled when having 1 single dataset");const _=n.selectAll("path.area").data(l,g=>g.name),S=P(this.services.domUtils.getMainContainer());if(_.exit().attr("opacity",0).remove(),!l.length)return;if(m){const g=S.select(`path.${this.model.getColorClassName({classNameTypes:[jt.STROKE],dataGroupName:l[0].name})}`).node();let b;if(g)b=getComputedStyle(g,null).getPropertyValue("stroke");else{const A=O(this.model.getOptions(),"color","scale");if(A!==null){const L=Object.keys(A);b=A[L[0]]}}wr.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(`${l[0].name.replace(" ","")}_${this.gradient_id}`),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:wr.getStops(i,b)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});const E=this,y=_.enter().append("path");m?y.merge(_).style("fill",g=>`url(#${this.services.domUtils.generateElementIDString(`${g.name.replace(" ","")}_${this.gradient_id}`)})`).attr("class","area").attr("class",g=>this.model.getColorClassName({classNameTypes:[jt.FILL],dataGroupName:g.name,originalClassName:"area"})).attr("d",g=>{const{data:b}=g;return s(b)}):(y.attr("opacity",0).merge(_).attr("class","area").attr("class",g=>this.model.getColorClassName({classNameTypes:[jt.FILL,jt.STROKE],dataGroupName:g.name,originalClassName:"area"})).style("fill",g=>E.model.getFillColor(g.name,null,g.data)).transition().call(g=>this.services.transitions.setupTransition({transition:g,name:"area-update-enter",animate:e})).attr("opacity",u?1:Ue.opacity.selected).attr("d",g=>{const{data:b}=g;return s(b)}),u&&y.attr("fill-opacity",Ue.opacity.selected).style("stroke",g=>E.model.getStrokeColor(g.name,null,g.data)).style("stroke-dasharray","2, 2").attr("stroke-width",.7+"px"))}destroy(){const e=this.services.events;e.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class ba extends kt{constructor(){super(...arguments),this.type="line",this.renderType=Tt.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.line").transition("legend-hover-line").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-line"})).attr("opacity",r=>r.name!==n.datum().name?Zi.opacity.unselected:Zi.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.line").transition("legend-mouseout-line").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-line"})).attr("opacity",Zi.opacity.selected)}}init(){const{events:e}=this.services;e.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"lines",withinChartClip:!0}),{cartesianScales:r,curves:i}=this.services,a=f=>r.getDomainValue(f),o=f=>r.getRangeValue(f),[s,l]=Kr(a,o,r.getOrientation()),c=this.getOptions(),u=Kh().x(s).y(l).curve(i.getD3Curve()).defined(f=>{const p=r.getRangeIdentifier(f);return f[p]!=null});let h=[];if(this.configs.stacked){const f=Object.keys(c.axes).some(w=>c.axes[w].percentage),{groupMapsTo:p}=c.data;h=this.model.getStackedData({groups:this.configs.groups,percentage:f}).map(w=>{const m=this.services.cartesianScales.getDomainIdentifier(w),_=this.services.cartesianScales.getRangeIdentifier(w);return{name:O(w,0,p),data:w.map(S=>({[m]:S.data.sharedStackKey,[p]:S[p],[_]:S[1]})),hidden:!mS(w,S=>S[0]!==S[1])}})}else h=this.model.getGroupedData(this.configs.groups);const d=n.selectAll("path.line").data(h,f=>f.name);d.exit().attr("opacity",0).remove(),d.enter().append("path").classed("line",!0).attr("opacity",0).merge(d).data(h,f=>f.name).attr("class",f=>this.model.getColorClassName({classNameTypes:[jt.STROKE],dataGroupName:f.name,originalClassName:"line"})).style("stroke",f=>this.model.getStrokeColor(f.name,null,f.data)).attr("role",St.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",f=>{const{data:p}=f;return p.map(w=>{const m=this.services.cartesianScales.getRangeIdentifier(w);return w[m]}).join(",")}).transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"line-update-enter",animate:e})).attr("opacity",f=>f.hidden?0:1).attr("d",f=>{const{data:p}=f;return u(p)})}destroy(){const e=this.services.events;e.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}const lc=5;function zT(t,e){return t>e-lc&&t<e+lc}class WT extends kt{constructor(){super(...arguments),this.type="ruler",this.renderType=Tt.SVG,this.isXGridEnabled=O(this.getOptions(),"grid","x","enabled"),this.isYGridEnabled=O(this.getOptions(),"grid","y","enabled"),this.isEventListenerAdded=!1}render(e=!1){const n=O(this.getOptions(),"ruler","enabled");this.drawBackdrop(),n&&!this.isEventListenerAdded?this.addBackdropEventListeners():!n&&this.isEventListenerAdded&&this.removeBackdropEventListeners()}removeBackdropEventListeners(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)}formatTooltipData(e){return e}showRuler(e,[n,r]){const i=this.parent,a=this.services.cartesianScales.getOrientation(),o=this.model.getDisplayData(),s=this.services.cartesianScales.getRangeScale(),[l,c]=s.range(),u=a===le.HORIZONTAL?r:n,h=J.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),d=J.appendOrSelect(h,"line.ruler-line"),f=i.selectAll("[role=graphics-symbol]"),p=o.map(m=>({domainValue:this.services.cartesianScales.getDomainValue(m),originalData:m})).filter(m=>zT(m.domainValue,u));if(this.pointsWithinLine&&p.length===this.pointsWithinLine.length&&p.map(m=>m.domainValue).join()===this.pointsWithinLine.map(m=>m.domainValue).join())return this.pointsWithinLine=p,this.services.events.dispatchEvent(T.Tooltip.MOVE,{mousePosition:[n,r]});this.pointsWithinLine=p;const w=this.pointsWithinLine.reduce((m,_)=>{if(m.length===0)return m.push(_),m;const S=m[0].domainValue,E=Math.abs(u-_.domainValue),y=Math.abs(u-S);return E>y||(E<y?m=[_]:m.push(_)),m},[]);if(w.length>0){const m=w.map(y=>y.originalData).filter(y=>{const g=this.services.cartesianScales.getRangeIdentifier(y);return y[g]!=null}),_=w.map(y=>y.domainValue),S=f.filter(y=>{const g=this.services.cartesianScales.getDomainValue(y);return _.includes(g)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!pS(this.elementsToHighlight,S)&&this.hideRuler(),S.dispatch("mouseover"),this.elementsToHighlight=S,this.services.events.dispatchEvent(T.Tooltip.SHOW,{event:e,mousePosition:[n,r],hoveredElement:d,data:this.formatTooltipData(m)}),h.attr("opacity",1);const E=w[0];a==="horizontal"?d.attr("x1",c).attr("x2",l).attr("y1",E.domainValue).attr("y2",E.domainValue):d.attr("y1",c).attr("y2",l).attr("x1",E.domainValue).attr("x2",E.domainValue)}else this.hideRuler()}hideRuler(){const e=this.parent,n=J.appendOrSelect(e,"g.ruler");e.selectAll("[role=graphics-symbol]").dispatch("mouseout"),this.services.events.dispatchEvent(T.Tooltip.HIDE),n.attr("opacity",0)}addBackdropEventListeners(){this.isEventListenerAdded=!0;const e=this,n=this.services.domUtils.getHolder(),r=this.model.getDisplayData();let i=function(a){const o=Un(a,e.parent.node());e.showRuler(a,o)};if(r.length>100){const a=r.length%50*12.5;i=fb(function(o){const{mousePosition:s}=this;e.showRuler(o,s)},a,n)}this.backdrop.on("mousemove mouseover",i).on("mouseout",this.hideRuler.bind(this))}drawBackdrop(){const e=this.parent;this.backdrop=J.appendOrSelect(e,"svg.chart-grid-backdrop")}}class ei extends kt{constructor(){super(...arguments),this.type="scatter",this.renderType=Tt.SVG,this.handleChartHolderOnHover=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-hover-scatter"})}).attr("opacity",1)},this.handleChartHolderOnMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-mouseout-scatter"})}).attr("opacity",0)},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(i=>{var a;return(a=this.services.transitions)==null?void 0:a.setupTransition({transition:i,name:"legend-hover-scatter"})}).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"legend-mouseout-scatter"})}).attr("opacity",1)}}init(){const{events:e}=this.services;if(!e)throw new Error("Services events are undefined.");e.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);const{fadeInOnChartHolderMouseover:n}=this.configs;n&&(e.addEventListener(T.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.addEventListener(T.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))}filterBasedOnZoomDomain(e){const{cartesianScales:n}=this.services;if(!n)throw new Error("Services cartesianScales are undefined.");const r=n.getDomainIdentifier(e),i=this.model.get("zoomDomain");return i!==void 0?e.filter(a=>a[r].getTime()>=i[0].getTime()&&a[r].getTime()<=i[1].getTime()):e}getScatterData(){const e=this.getOptions(),{stacked:n}=this.configs;let r;if(n){const i=Object.keys(e.axes).some(a=>e.axes[a].percentage);r=this.model.getStackedData({groups:this.configs.groups,percentage:i})}else{const{cartesianScales:i}=this.services;if(!i)throw new Error("Services cartesianScales are undefined.");r=this.model.getDisplayData(this.configs.groups).filter(a=>{const o=i.getRangeIdentifier(a);return a[o]!==void 0&&a[o]!==null})}return this.filterBasedOnZoomDomain(r)}render(e){if(!(O(this.getOptions(),"points","enabled")||O(this.getOptions(),"bubble","enabled")))return;const n=this.getComponentContainer({ariaLabel:"scatter points",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:a}=this.services;if(!a)throw new Error("Services cartesianScales are undefined.");const o=a.getDomainIdentifier(),s=n.selectAll("circle.dot").data(this.getScatterData(),c=>`${c[i]}-${c[o]}`);s.exit().attr("opacity",0).remove();const l=s.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(s);this.styleCircles(l,e),this.addEventListeners()}isDatapointThresholdAnomaly(e){const{handleThresholds:n}=this.configs;if(!n)return!1;const{cartesianScales:r}=this.services;if(!r)throw new Error("Cartesian scales service is undefined");const i=r.getOrientation(),[a,o]=Kr(r.getHighestDomainThreshold(),r.getHighestRangeThreshold(),i),[s,l]=Kr(h=>r.getDomainValue(h),h=>r.getRangeValue(h),i),c=s(e),u=l(e);return o&&a?u<=o.scaleValue&&c>=a.scaleValue:o?u<=o.scaleValue:a?c>=a.scaleValue:!1}styleCircles(e,n){const r=this.getOptions(),{filled:i,fillOpacity:a}=r.points,{cartesianScales:o}=this.services;if(!o)throw new Error("Cartesian scales service is undefined");const{groupMapsTo:s}=r.data,l=f=>o.getDomainValue(f),c=f=>o.getRangeValue(f),[u,h]=Kr(l,c,o.getOrientation()),{fadeInOnChartHolderMouseover:d}=this.configs;e.raise().classed("dot",!0).attr("class",f=>{const p=o.getDomainIdentifier(f),w=this.model.getIsFilled(f[s],f[p],f,i)?[jt.FILL,jt.STROKE]:[jt.STROKE];return this.model.getColorClassName({classNameTypes:w,dataGroupName:f[s],originalClassName:"dot"})||""}).classed("threshold-anomaly",f=>this.isDatapointThresholdAnomaly(f)).classed("filled",f=>{const p=o.getDomainIdentifier(f);return this.model.getIsFilled(f[s],f[p],f,i)}).classed("unfilled",f=>{const p=o.getDomainIdentifier(f);return!this.model.getIsFilled(f[s],f[p],f,i)}).transition().call(f=>{var p;return(p=this.services.transitions)==null?void 0:p.setupTransition({transition:f,name:"scatter-update-enter",animate:n})}).attr("cx",u).attr("cy",h).attr("r",r.points.radius).style("fill",f=>{const p=o.getDomainIdentifier(f);if(this.model.getIsFilled(f[s],f[p],f,i))return this.model.getFillColor(f[s],f[p],f)}).style("stroke",f=>{const p=o.getDomainIdentifier(f);return this.model.getStrokeColor(f[s],f[p],f)}).attr("fill-opacity",i?a:1).attr("opacity",d?0:1).attr("role",St.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",f=>{const p=o.getRangeIdentifier(f);return f[p]}),this.addEventListeners()}getTooltipAdditionalItems(e){return null}addEventListeners(){const e=this,{groupMapsTo:n}=e.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle").on("mouseover",function(r,i){var a,o;const s=P(this);s.classed("hovered",!0).attr("class",l=>e.model.getColorClassName({classNameTypes:[jt.FILL],dataGroupName:l[n],originalClassName:s.attr("class")})).style("fill",l=>{var c;const u=(c=e.services.cartesianScales)==null?void 0:c.getDomainIdentifier(l);return e.model.getFillColor(l[n],l[u],l)}).classed("unfilled",!1),(a=e.services.events)==null||a.dispatchEvent(T.Tooltip.SHOW,{event:r,hoveredElement:s,data:[i],additionalItems:e.getTooltipAdditionalItems(i)}),(o=e.services.events)==null||o.dispatchEvent(T.Scatter.SCATTER_MOUSEOVER,{event:r,element:s,datum:i})}).on("mousemove",function(r,i){var a,o;const s=P(this);(a=e.services.events)==null||a.dispatchEvent(T.Scatter.SCATTER_MOUSEMOVE,{event:r,element:s,datum:i}),(o=e.services.events)==null||o.dispatchEvent(T.Tooltip.MOVE,{event:r})}).on("click",function(r,i){var a;(a=e.services.events)==null||a.dispatchEvent(T.Scatter.SCATTER_CLICK,{event:r,element:P(this),datum:i})}).on("mouseout",function(r,i){var a,o,s;const l=P(this);if(l.classed("hovered",!1),!e.configs.filled){const{filled:c}=e.getOptions().points,u=(a=e.services.cartesianScales)==null?void 0:a.getDomainIdentifier(i),h=e.model.getIsFilled(i[n],i[u],i,c);l.classed("unfilled",!h).style("fill",d=>h||c?e.model.getFillColor(d[n],d[u],d):null)}(o=e.services.events)==null||o.dispatchEvent(T.Scatter.SCATTER_MOUSEOUT,{event:r,element:l,datum:i}),(s=e.services.events)==null||s.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:l})})}destroy(){var e;(e=this.parent)==null||e.selectAll("circle").on("mousemove",null).on("mouseout",null);const{events:n}=this.services;if(!n)throw new Error("Services events undefined");n.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),n.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),n.removeEventListener(T.Chart.MOUSEOVER,this.handleChartHolderOnHover),n.removeEventListener(T.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)}}class YT extends kt{constructor(){super(...arguments),this.type="skeleton"}render(e=!0){const n=O(this.getOptions(),"data","loading");n?this.renderSkeleton(n):this.removeSkeleton()}renderSkeleton(e){if(this.configs.skeleton===Mn.GRID)this.renderGridSkeleton(e);else if(this.configs.skeleton===Mn.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(e);else if(this.configs.skeleton===Mn.PIE)this.renderPieSkeleton(e);else if(this.configs.skeleton===Mn.DONUT)this.renderDonutSkeleton(e);else throw new Error(`"${this.configs.skeleton}" is not a valid Skeleton type.`)}renderGridSkeleton(e){this.setScales(),this.drawBackdrop(e),this.drawXGrid(e),this.drawYGrid(e),e&&this.setShimmerEffect("shimmer-lines")}renderVertOrHorizSkeleton(e){const n=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(e),n===le.VERTICAL&&this.drawYGrid(e),n===le.HORIZONTAL&&this.drawXGrid(e),this.setShimmerEffect("shimmer-lines")}renderPieSkeleton(e){const n=this.computeOuterRadius();this.drawRing(n,0,e),e&&this.setShimmerEffect("shimmer-areas")}renderDonutSkeleton(e){const n=this.computeOuterRadius(),r=this.computeInnerRadius();this.drawRing(n,r,e),e&&this.setShimmerEffect("shimmer-areas")}setScales(){const e=this.services.cartesianScales.getMainXScale().range(),n=this.services.cartesianScales.getMainYScale().range();this.xScale=Ba().domain([0,1]).range(e),this.yScale=Ba().domain([0,1]).range(n)}drawBackdrop(e){const n=this.parent,{width:r,height:i}=J.getSVGElementSize(n,{useAttrs:!0});this.backdrop=J.appendOrSelect(n,"svg.chart-skeleton.DAII").attr("width",r).attr("height",i);const a=J.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");a.attr("width","100%").attr("height","100%");const[o]=this.xScale.range(),[,s]=this.yScale.range();this.backdrop.merge(a).attr("x",o).attr("y",s),a.classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawXGrid(e){const n=+this.backdrop.attr("width"),r=O(this.getOptions(),"grid","x","numberOfTicks"),i=this.xScale.ticks(r).map(s=>s*n),a=J.appendOrSelect(this.backdrop,"g.x.skeleton"),o=a.selectAll("line").data(i);o.enter().append("line").merge(o).attr("x1",s=>s).attr("x2",s=>s).attr("y1",0).attr("y2","100%"),a.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawYGrid(e){const n=+this.backdrop.attr("height"),r=this.backdrop.attr("width"),i=O(this.getOptions(),"grid","y","numberOfTicks"),a=this.xScale.ticks(i).map(l=>l*n),o=J.appendOrSelect(this.backdrop,"g.y.skeleton"),s=o.selectAll("line").data(a);s.enter().append("line").merge(s).attr("x1",0).attr("x2",r).attr("y1",l=>l).attr("y2",l=>l),o.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawRing(e,n,r=!0){const i=this.parent,{width:a,height:o}=J.getSVGElementSize(i,{useAttrs:!0}),s=J.appendOrSelect(i,"svg.chart-skeleton").attr("width",a).attr("height",o),l=n===0?"pie":"donut",c=O(this.getOptions(),l,"alignment");J.appendOrSelect(s,"rect.chart-skeleton-area-container").attr("width",a).attr("height",o).attr("fill","none");const u=Ja().innerRadius(n).outerRadius(e).startAngle(0).endAngle(Math.PI*2),h=e+Math.abs(yt.radiusOffset),d=e+(Math.min(a,o)-e*2)/2,f=J.appendOrSelect(s,"path").attr("class","skeleton-area-shape").attr("transform",`translate(${h}, ${d})`).attr("d",u).classed("shimmer-effect-areas",r).classed("empty-state-areas",!r).style("fill",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-areas")})`:null);let p=e+yt.xOffset;c===re.CENTER?p=a/2:c===re.RIGHT&&(p=a-e-yt.xOffset);const w=e+yt.yOffset;f.attr("transform",`translate(${p}, ${w})`)}computeOuterRadius(){const{width:e,height:n}=J.getSVGElementSize(this.parent,{useAttrs:!0});return Math.min(e,n)/2+yt.radiusOffset}computeInnerRadius(){return this.computeOuterRadius()*(3/4)}setShimmerEffect(e){const n="stop-bg-shimmer",r="stop-shimmer",i=this.parent.select(".chart-skeleton"),{width:a}=J.getSVGElementSize(this.parent,{useAttrs:!0}),o=0,s=a,l=J.appendOrSelect(i,"defs").lower(),c=J.appendOrSelect(l,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(e)).attr("class",e).attr("x1",o-3*.2*a).attr("x2",s).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),u=`
			<stop class="${n}" offset="${o}"></stop>
			<stop class="${r}" offset="${o+.2}"></stop>
			<stop class="${n}" offset="${o+2*.2}"></stop>
		`;c.html(u),h();function h(){c.attr("gradientTransform",`translate(${o-3*.2*a}, 0)`).transition().duration(2e3).delay(1e3).ease(_S).attr("gradientTransform",`translate(${s+3*.2*a}, 0)`).on("end",h)}}removeSkeleton(){this.parent.select(".chart-skeleton").remove()}}class XT extends kt{constructor(){super(...arguments),this.type="zero-line",this.renderType=Tt.SVG}render(e){const n=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),r=this.services.cartesianScales.getScaleByPosition(n),[i,a]=r.domain(),o=i>0&&a<0||i<0&&a>0,s=this.getComponentContainer({isPresentational:!0});if(!o){s.selectAll("line.domain").remove();return}const[l,c]=this.services.cartesianScales.getDomainScale().range();let u=+r(0)+.5;u||(u=r.range()[0]);const h=Eh({x0:l,x1:c,y0:u,y1:u},this.services.cartesianScales.getOrientation());J.appendOrSelect(s,"line.domain").transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"zero-line-update",animate:e})).attr("y1",h.y0).attr("y2",h.y1).attr("x1",h.x0).attr("x2",h.x1)}}class cc extends WT{formatTooltipData(e){return e.reverse()}}class Go extends kt{getBarWidth(){const e=this.getOptions();if(e.bars.width)return e.bars.width;const n=this.model.getDisplayData().length,r=this.services.cartesianScales.getMainXScale(),i=J.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!r.step){const a=O(e,"bars","spacingFactor");return Math.min(e.bars.maxWidth,i*a/n)}return Math.min(e.bars.maxWidth,r.step()/2)}isOutsideZoomedDomain(e,n){if(this.model.getDisplayData().length<=1)return!1;const r=this.model.get("zoomDomain");if(r!==void 0){const i=this.services.cartesianScales.getDomainScale();return e<i(r[0])||n>i(r[1])}return!1}}function qT(t,e){const n=Cr(this._current,t);return r=>(this._current=n(r),e(this._current))}class KT extends kt{constructor(){super(...arguments),this.type="pie",this.renderType=Tt.SVG,this.isRendering=!1,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.slice").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i.data[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.slice").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getInnerRadius(){return yt.innerRadius}render(e=!0){const n=this,r=this.getComponentContainer({ariaLabel:"pie graph"}),i=this.getOptions(),{groupMapsTo:a}=i.data,{valueMapsTo:o}=i.pie;this.isRendering=!0;const s=this.model.getDisplayData().filter(x=>x[o]>0),l=this.computeRadius();this.arc=Ja().innerRadius(this.getInnerRadius()).outerRadius(l),this.hoverArc=Ja().innerRadius(this.getInnerRadius()).outerRadius(l+yt.hoverArc.outerRadiusOffset);const c=dT().value(x=>x[o]).sort(O(i,"pie","sortFunction")).padAngle(yt.padAngle)(s),u=J.appendOrSelect(r,"g.slices").attr("role",St.GROUP).attr("data-name","slices").selectAll("path.slice").data(c,x=>x.data[a]);u.exit().attr("opacity",0).remove(),u.enter().append("path").classed("slice",!0).attr("opacity",0).merge(u).attr("class",x=>this.model.getColorClassName({classNameTypes:[jt.FILL],dataGroupName:x.data[a],originalClassName:"slice"})).style("fill",x=>n.model.getFillColor(x.data[a],null,x.data)).attr("d",this.arc).transition().call(x=>this.services.transitions.setupTransition({transition:x,name:"pie_slice_enter_update",animate:e})).attr("opacity",1).attr("role",St.GRAPHICS_SYMBOL).attr("aria-roledescription","slice").attr("aria-label",x=>`${x[o]}, ${Ji(x.data[o],s,o)+"%"}`).attrTween("d",function(x){return qT.bind(this)(x,n.arc)}).on("end",()=>{n.isRendering=!1});const{code:h,number:d}=O(i,"locale"),f=i.pie.labels.enabled,p=f?c.filter(x=>x.data[o]>0):[],w=J.appendOrSelect(r,"g.labels").attr("role",St.GROUP).attr("data-name","labels").selectAll("text.pie-label").data(p,x=>x.data[a]);w.exit().attr("opacity",0).remove();const m=w.enter().append("text").classed("pie-label",!0),_=[];m.merge(w).style("text-anchor","middle").text(x=>i.pie.labels.formatter?i.pie.labels.formatter({...x,percentageValue:Ji(x.data[o],s,o,!0)}):d(Ji(x.data[o],s,o),h)+"%").datum(function(x){const V=l+7,$=(x.endAngle-x.startAngle)/2+x.startAngle,G=$/Math.PI*180,C=this.getComputedTextLength();return x.textOffsetX=C/2,x.textOffsetY=G>90&&G<270?10:0,x.xPosition=(x.textOffsetX+V)*Math.sin($),x.yPosition=(x.textOffsetY+V)*-Math.cos($),x}).attr("transform",function(x,V){const $=p.length,G=(x.endAngle-x.startAngle)*(180/Math.PI);if(V>=$-2&&G<yt.callout.minSliceDegree){let C,R;return x.index===$-1?(C=x.xPosition+yt.callout.offsetX+yt.callout.textMargin+x.textOffsetX,R=x.yPosition-yt.callout.offsetY,x.direction=zr.RIGHT,_.push(x)):(C=x.xPosition-yt.callout.offsetX-x.textOffsetX-yt.callout.textMargin,R=x.yPosition-yt.callout.offsetY,x.direction=zr.LEFT,_.push(x)),`translate(${C}, ${R})`}return`translate(${x.xPosition}, ${x.yPosition})`}),this.renderCallouts(_);const S=O(i,"donut")?"donut":"pie",E=O(i,S,"alignment"),{width:y}=J.getSVGElementSize(this.getParent(),{useAttrs:!0}),g=f?yt.xOffset:0,b=f?yt.yOffset:0;let A=l+g;E===re.CENTER?A=y/2:E===re.RIGHT&&(A=y-l-yt.xOffset);let L=l+b;_.length>0&&(L+=yt.yOffsetCallout),r.attr("x",A+7).attr("y",L),this.addEventListeners()}renderCallouts(e){const n=J.appendOrSelect(this.getComponentContainer(),"g.callouts").attr("role",St.GROUP).attr("data-name","callouts"),r=n.selectAll("g.callout").data(e);r.exit().remove();const i=r.enter().append("g").classed("callout",!0).attr("role",St.GROUP).attr("aria-roledescription","label callout");i.merge(r).datum(function(a){const{xPosition:o,yPosition:s,direction:l}=a;return l===zr.RIGHT?(a.startPos={x:o,y:s+a.textOffsetY},a.endPos={x:o+yt.callout.offsetX,y:s-yt.callout.offsetY+a.textOffsetY},a.intersectPointX=a.endPos.x-yt.callout.horizontalLineLength):(a.startPos={x:o,y:s+a.textOffsetY},a.endPos={x:o-yt.callout.offsetX,y:s-yt.callout.offsetY+a.textOffsetY},a.intersectPointX=a.endPos.x+yt.callout.horizontalLineLength),a}),i.append("line").classed("vertical-line",!0).merge(n.selectAll("line.vertical-line")).datum(function(){return P(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",a=>a.startPos.x).attr("y1",a=>a.startPos.y).attr("x2",a=>a.intersectPointX).attr("y2",a=>a.endPos.y),i.append("line").classed("horizontal-line",!0).merge(n.selectAll("line.horizontal-line")).datum(function(){return P(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",a=>a.intersectPointX).attr("y1",a=>a.endPos.y).attr("x2",a=>a.endPos.x).attr("y2",a=>a.endPos.y)}addEventListeners(){const e=this;this.parent.selectAll("path.slice").on("mouseover",function(n,r){const i=P(this);e.isRendering||i.classed("hovered",!0).transition("pie_slice_mouseover").call(s=>e.services.transitions.setupTransition({transition:s,name:"pie_slice_mouseover"})).attr("d",e.hoverArc),e.services.events.dispatchEvent(T.Pie.SLICE_MOUSEOVER,{event:n,element:P(this),datum:r});const{groupMapsTo:a}=e.getOptions().data,{valueMapsTo:o}=e.getOptions().pie;e.services.events.dispatchEvent(T.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{label:r.data[a],value:r.data[o]}]})}).on("mousemove",function(n,r){const i=P(this);e.services.events.dispatchEvent(T.Pie.SLICE_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(T.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(T.Pie.SLICE_CLICK,{event:n,element:P(this),datum:r})}).on("mouseout",function(n,r){const i=P(this);fS(()=>{e.isRendering||i.classed("hovered",!1).transition("pie_slice_mouseout").call(a=>e.services.transitions.setupTransition({transition:a,name:"pie_slice_mouseout"})).attr("d",e.arc)},100),e.services.events.dispatchEvent(T.Pie.SLICE_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:i})})}computeRadius(){const{width:e,height:n}=J.getSVGElementSize(this.parent,{useAttrs:!0}),r=this.getOptions(),i=Math.min(e,n)/2;return r.pie.labels.enabled?i+yt.radiusOffset:i}}class ZT extends Go{constructor(){super(...arguments),this.type="grouped-bar",this.renderType=Tt.SVG,this.padding=5,this.defaultStepFactor=70,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.model.getDisplayData(this.configs.groups),r=this.getOptions(),{groupMapsTo:i}=r.data;this.setGroupScale();const a=this.getComponentContainer({ariaLabel:"grouped bar graphs",withinChartClip:!0}),o=ka(n.map(u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return u[h]&&typeof u[h].toString=="function"?u[h].toString():u[h]})),s=a.selectAll("g.bars").data(o,u=>u);s.exit().attr("opacity",0).remove();const l=s.enter().append("g").classed("bars",!0).attr("role",St.GROUP).attr("data-name","bars").merge(s);l.transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-group-update-enter",animate:e})).attr("transform",u=>{const h=this.services.cartesianScales.getDomainValue(u)-this.getGroupWidth()/2;return this.services.cartesianScales.getOrientation()===le.VERTICAL?`translate(${h}, 0)`:`translate(0, ${h})`});const c=l.selectAll("path.bar").data(u=>this.getDataCorrespondingToLabel(u),u=>u[i]);c.exit().attr("opacity",0).remove(),c.enter().append("path").attr("opacity",0).merge(c).classed("bar",!0).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-update-enter",animate:e})).attr("class",u=>this.model.getColorClassName({classNameTypes:[jt.FILL],dataGroupName:u[i],originalClassName:"bar"})).style("fill",u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return this.model.getFillColor(u[i],u[h],u)}).attr("d",u=>{const h=this.groupScale(u[i]),d=this.getBarWidth(),f=h,p=h+d,w=this.services.cartesianScales.getRangeAxisPosition({datum:u}),m=this.services.cartesianScales.getDomainLowerBound(w),_=this.services.cartesianScales.getValueThroughAxisPosition(w,m),S=this.services.cartesianScales.getRangeValue(u),E=this.services.cartesianScales.getDomainValue(u)-d/2,y=E+d;if(!this.isOutsideZoomedDomain(E,y))return Io({x0:f,x1:p,y0:_,y1:S},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",St.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>u.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=P(this);i.classed("hovered",!0),e.services.events.dispatchEvent(T.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(T.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){const i=P(this);e.services.events.dispatchEvent(T.Bar.BAR_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(T.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(T.Bar.BAR_CLICK,{event:n,element:P(this),datum:r})}).on("mouseout",function(n,r){const i=P(this);i.classed("hovered",!1),e.services.events.dispatchEvent(T.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getDataCorrespondingToLabel(e){return this.model.getDisplayData(this.configs.groups).filter(n=>{const r=this.services.cartesianScales.getDomainIdentifier(n);return n[r].toString()===e})}getGroupWidth(){const e=this.model.getGroupedData(this.configs.groups),n=this.getTotalGroupPadding();return this.getBarWidth()*e.length+n}getDomainScaleStep(){const e=this.services.cartesianScales.getDomainScale(),n=this.model.getGroupedData(this.configs.groups);let r=this.defaultStepFactor;if(typeof e.step=="function")r=e.step();else if(n.length>0){const i=n.find(a=>{var o;return((o=a.data)==null?void 0:o.length)>1});if(i){const a=this.services.cartesianScales.getDomainIdentifier(i.data[0]);r=Math.abs(e(i.data[1][a])-e(i.data[0][a]))}}return r}getTotalGroupPadding(){const e=this.model.getGroupedData(this.configs.groups);return e.length===1?0:Math.min(5,5*(this.getDomainScaleStep()/this.defaultStepFactor))*(e.length-1)}getBarWidth(){const e=this.getOptions(),n=O(e,"bars","width"),r=O(e,"bars","maxWidth");if(n!==null&&(r===null||n<=r))return n;const i=this.model.getGroupedData(this.configs.groups).length,a=this.getTotalGroupPadding();return Math.min(r,(this.getDomainScaleStep()-a)/i)}setGroupScale(){const e=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=Oh().domain(e).rangeRound([0,this.getGroupWidth()])}}class JT extends Go{constructor(){super(...arguments),this.type="simple-bar",this.renderType=Tt.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({ariaLabel:"bar graphs",withinChartClip:!0}),a=this.model.getDisplayData(this.configs.groups),o=this.services.cartesianScales.getOrientation(),s=i.selectAll("path.bar").data(a,l=>l[r]);s.exit().attr("opacity",0).remove(),s.enter().append("path").attr("opacity",0).merge(s).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(l=>this.services.transitions.setupTransition({transition:l,name:"bar-update-enter",animate:e})).attr("class",l=>this.model.getColorClassName({classNameTypes:[jt.FILL],dataGroupName:l[r],originalClassName:"bar"})).style("fill",l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return this.model.getFillColor(l[r],l[c],l)}).attr("d",l=>{const c=this.services.cartesianScales.getRangeIdentifier(),u=this.getBarWidth(),h=l[c],d=this.services.cartesianScales.getDomainValue(l)-u/2,f=d+u;let p,w;if(Array.isArray(h)&&h.length===2)p=this.services.cartesianScales.getRangeValue(h[0]),w=this.services.cartesianScales.getRangeValue(h[1]);else{const _=this.services.cartesianScales.getRangeScale().domain()[0];p=this.services.cartesianScales.getRangeValue(Math.max(0,_)),w=this.services.cartesianScales.getRangeValue(l)}const m=Math.abs(w-p);if(m!==0&&m<2&&(h>0&&o===le.VERTICAL||h<0&&o===le.HORIZONTAL?w=p-2:w=p+2),!this.isOutsideZoomedDomain(d,f))return Io({x0:d,x1:f,y0:p,y1:w},o)}).attr("opacity",1).attr("role",St.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",l=>l.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=P(this);i.classed("hovered",!0),e.services.events.dispatchEvent(T.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(T.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){e.services.events.dispatchEvent(T.Bar.BAR_MOUSEMOVE,{event:n,element:P(this),datum:r}),e.services.events.dispatchEvent(T.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(T.Bar.BAR_CLICK,{event:n,element:P(this),datum:r})}).on("mouseout",function(n,r){const i=P(this);i.classed("hovered",!1),e.services.events.dispatchEvent(T.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class QT extends kt{constructor(){super(...arguments),this.type="area-stacked",this.renderType=Tt.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.area").transition("legend-hover-area").call(a=>this.services.transitions.setupTransition({transition:a,name:"legend-hover-area"})).attr("opacity",a=>O(a,0,i)!==n.datum().name?Ue.opacity.unselected:Ue.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",Ue.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"stacked area graphs",withinChartClip:!0}),r=this,i=this.getOptions(),{groupMapsTo:a}=i.data,o=Object.keys(i.axes).some(f=>i.axes[f].percentage),s=this.model.getStackedData({percentage:o,groups:this.configs.groups}),l=O(s,0,0),c=this.services.cartesianScales.getDomainAxisPosition({datum:l}),u=this.services.cartesianScales.getRangeAxisPosition({datum:l}),h=this.services.cartesianScales.getScaleByPosition(u),d=n.selectAll("path.area").data(s,f=>O(f,0,a));this.areaGenerator=Zh().x(f=>this.services.cartesianScales.getValueThroughAxisPosition(c,f.data.sharedStackKey)).y0(f=>h(f[0])).y1(f=>h(f[1])).curve(this.services.curves.getD3Curve()),d.exit().attr("opacity",0).remove(),d.enter().append("path").attr("opacity",0).merge(d).data(s,f=>O(f,0,a)).attr("class","area").attr("class",f=>this.model.getColorClassName({classNameTypes:[jt.FILL],dataGroupName:O(f,0,a),originalClassName:"area"})).style("fill",f=>r.model.getFillColor(O(f,0,a),null,f)).attr("role",St.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",f=>O(f,0,a)).transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"area-update-enter",animate:e})).attr("opacity",Ue.opacity.selected).attr("d",this.areaGenerator)}}class tO extends Go{constructor(){super(...arguments),this.type="stacked-bar",this.renderType=Tt.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.model.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({ariaLabel:"stacked bar graphs",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,a=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),o=this.model.getActiveDataGroupNames(),s=n.selectAll("g.bars").data(a,c=>O(c,0,i));s.exit().attr("opacity",0).remove(),s.enter().append("g").classed("bars",!0).attr("role",St.GROUP).attr("data-name","bars");const l=n.selectAll("g.bars").selectAll("path.bar").data(c=>c,c=>c.data.sharedStackKey);l.exit().remove(),l.enter().append("path").merge(l).classed("bar",!0).transition().call(c=>this.services.transitions.setupTransition({transition:c,name:"bar-update-enter",animate:e})).attr("class",c=>this.model.getColorClassName({classNameTypes:[jt.FILL],dataGroupName:c[i],originalClassName:"bar"})).style("fill",c=>this.model.getFillColor(c[i],c.data.sharedStackKey,c.data)).attr("d",c=>{const u=c.data.sharedStackKey,h=this.getBarWidth(),d=this.services.cartesianScales.getDomainValue(u)-h/2,f=d+h,p=this.services.cartesianScales.getRangeValue(c[0]);let w=this.services.cartesianScales.getRangeValue(c[1]);if(!this.isOutsideZoomedDomain(d,f)){if(Math.abs(w-p)>0&&Math.abs(w-p)>r.bars.dividerSize){const m=c[0]<0&&c[1]<=0;m&&o.length>1?this.services.cartesianScales.getOrientation()===le.VERTICAL?w+=c[1]===0?2:1:w-=1:m||(this.services.cartesianScales.getOrientation()===le.VERTICAL?w+=1:w-=1)}return Io({x0:d,x1:f,y0:p,y1:w},this.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",St.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",c=>c[1]-c[0]),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this;this.parent.selectAll("path.bar").on("mouseover",function(i,a){const o=P(this);o.classed("hovered",!0),r.services.events.dispatchEvent(T.Bar.BAR_MOUSEOVER,{event:i,element:o,datum:a});let s=r.model.getDisplayData(r.configs.groups).find(l=>{const c=r.services.cartesianScales.getDomainIdentifier(l),u=r.services.cartesianScales.getRangeIdentifier(l);return l[u]===a.data[a[n]]&&l[c].toString()===a.data.sharedStackKey&&l[n]===a[n]});if(s===void 0){const l=r.services.cartesianScales.getDomainIdentifier(),c=r.services.cartesianScales.getRangeIdentifier();s={[l]:a.data.sharedStackKey,[c]:a.data[a[n]],[n]:a[n]}}r.services.events.dispatchEvent(T.Tooltip.SHOW,{event:i,hoveredElement:o,data:[s]})}).on("mousemove",function(i,a){const o=P(this);r.services.events.dispatchEvent(T.Bar.BAR_MOUSEMOVE,{event:i,element:o,datum:a}),r.services.events.dispatchEvent(T.Tooltip.MOVE,{event:i})}).on("click",function(i,a){r.services.events.dispatchEvent(T.Bar.BAR_CLICK,{event:i,element:P(this),datum:a})}).on("mouseout",function(i,a){const o=P(this);o.classed("hovered",!1),r.services.events.dispatchEvent(T.Bar.BAR_MOUSEOUT,{event:i,element:o,datum:a}),r.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:o})})}getBarWidth(){const e=this.getOptions();if(O(e,"bars","width"))return e.bars.width;const n=this.services.cartesianScales.getMainXScale(),r=J.getSVGElementSize(this.parent,{useAttrs:!0}).width,i=this.model.getStackKeys().length,a=O(e,"bars","spacingFactor");return n.step?Math.min(e.bars.maxWidth,n.step()/2):Math.min(e.bars.maxWidth,r*a/i)}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class eO extends ei{constructor(){super(...arguments),this.type="scatter-stacked",this.renderType=Tt.SVG}render(e){if(!O(this.getOptions(),"points","enabled"))return;const n=this.getComponentContainer({ariaLabel:"scatter points",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,a=Object.keys(r.axes).some(u=>r.axes[u].percentage),o=this.model.getStackedData({groups:this.configs.groups,percentage:a}),s=n.selectAll("g.dots").data(o,u=>O(u,0,i));s.exit().attr("opacity",0).remove();const l=s.enter().append("g").classed("dots",!0).attr("role",St.GROUP).merge(s).selectAll("circle.dot").data(u=>u);l.exit().attr("opacity",0).remove();const c=l.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(l).datum(u=>{const h=u[i],d=this.services.cartesianScales.getDomainIdentifier(u),f=this.services.cartesianScales.getRangeIdentifier(u);return{[i]:h,[d]:u.data.sharedStackKey,[f]:u[1]}});this.styleCircles(c,e),this.addEventListeners()}getTooltipData(e,n){const r=this.getOptions(),{groupMapsTo:i}=r.data,a=Object.keys(r.axes).some(l=>r.axes[l].percentage),o=this.model.getStackedData({groups:this.configs.groups,percentage:a}),s=[];return o.forEach((l,c)=>{l.forEach((u,h)=>{const d=u[i],f=u.data.sharedStackKey;let p=u.data[d];const w=u[1],m=this.services.cartesianScales.getDomainIdentifier(u),_=this.services.cartesianScales.getRangeIdentifier(u);p!=null&&e===this.services.cartesianScales.getDomainValue(f)&&n===this.services.cartesianScales.getRangeValue(w)&&(a&&(p=this.model.getStackedData({groups:this.configs.groups})[c][h].data[d]),p!==null&&s.push({[i]:d,[m]:f,[_]:p}))})}),this.model.getDisplayData(this.configs.groups).filter(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l),u=this.services.cartesianScales.getRangeIdentifier(l);return s.find(h=>h[i]==l[i]&&h[c]==l[c]&&h[u]==l[u])!==void 0})}}function nO(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var rO={value:function(){}};function ld(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ni(n)}function ni(t){this._=t}function iO(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ni.prototype=ld.prototype={constructor:ni,on:function(t,e){var n=this._,r=iO(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=aO(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=uc(n[i],t.name,e);else if(e==null)for(i in n)n[i]=uc(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ni(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function aO(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function uc(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=rO,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const oO=Object.freeze(Object.defineProperty({__proto__:null,dispatch:ld},Symbol.toStringTag,{value:"Module"})),sO=nO(oO);var wa,hc;function lO(){if(hc)return wa;hc=1;const t=sO.dispatch,e=Math.PI/180,n={archimedean:w,rectangular:m},r=64,i=2048;wa=function(){var y=[256,256],g=a,b=o,A=l,L=s,x=s,V=c,$=u,G=w,C=[],R=1/0,rt=t("word","end"),X=null,et=Math.random,F={},tt=S;F.canvas=function(k){return arguments.length?(tt=E(k),F):tt},F.start=function(){var k=st(tt()),B=_((y[0]>>5)*y[1]),ct=null,z=C.length,dt=-1,lt=[],ft=C.map(function(U,I){return U.text=g.call(this,U,I),U.font=b.call(this,U,I),U.style=L.call(this,U,I),U.weight=x.call(this,U,I),U.rotate=V.call(this,U,I),U.size=~~A.call(this,U,I),U.padding=$.call(this,U,I),U}).sort(function(U,I){return I.size-U.size});return X&&clearInterval(X),X=setInterval(D,0),D(),F;function D(){for(var U=Date.now();Date.now()-U<R&&++dt<z&&X;){var I=ft[dt];I.x=y[0]*(et()+.5)>>1,I.y=y[1]*(et()+.5)>>1,h(k,I,ft,dt),I.hasText&&Y(B,I,ct)&&(lt.push(I),rt.call("word",F,I),ct?f(ct,I):ct=[{x:I.x+I.x0,y:I.y+I.y0},{x:I.x+I.x1,y:I.y+I.y1}],I.x-=y[0]>>1,I.y-=y[1]>>1)}dt>=z&&(F.stop(),rt.call("end",F,lt,ct))}},F.stop=function(){X&&(clearInterval(X),X=null);for(const k of C)delete k.sprite;return F};function st(k){const B=k.getContext("2d",{willReadFrequently:!0});k.width=k.height=1;const ct=Math.sqrt(B.getImageData(0,0,1,1).data.length>>2);return k.width=(r<<5)/ct,k.height=i/ct,B.fillStyle=B.strokeStyle="red",{context:B,ratio:ct}}function Y(k,B,ct){y[0],y[1];for(var z=B.x,dt=B.y,lt=Math.sqrt(y[0]*y[0]+y[1]*y[1]),ft=G(y),D=et()<.5?1:-1,U=-D,I,M,nt;(I=ft(U+=D))&&(M=~~I[0],nt=~~I[1],!(Math.min(Math.abs(M),Math.abs(nt))>=lt));)if(B.x=z+M,B.y=dt+nt,!(B.x+B.x0<0||B.y+B.y0<0||B.x+B.x1>y[0]||B.y+B.y1>y[1])&&(!ct||p(B,ct))&&!d(B,k,y[0])){for(var q=B.sprite,Q=B.width>>5,Z=y[0]>>5,H=B.x-(Q<<4),K=H&127,_t=32-K,Mt=B.y1-B.y0,be=(B.y+B.y0)*Z+(H>>5),Ce,At=0;At<Mt;At++){Ce=0;for(var Ot=0;Ot<=Q;Ot++)k[be+Ot]|=Ce<<_t|(Ot<Q?(Ce=q[At*Q+Ot])>>>K:0);be+=Z}return!0}return!1}return F.timeInterval=function(k){return arguments.length?(R=k??1/0,F):R},F.words=function(k){return arguments.length?(C=k,F):C},F.size=function(k){return arguments.length?(y=[+k[0],+k[1]],F):y},F.font=function(k){return arguments.length?(b=E(k),F):b},F.fontStyle=function(k){return arguments.length?(L=E(k),F):L},F.fontWeight=function(k){return arguments.length?(x=E(k),F):x},F.rotate=function(k){return arguments.length?(V=E(k),F):V},F.text=function(k){return arguments.length?(g=E(k),F):g},F.spiral=function(k){return arguments.length?(G=n[k]||k,F):G},F.fontSize=function(k){return arguments.length?(A=E(k),F):A},F.padding=function(k){return arguments.length?($=E(k),F):$},F.random=function(k){return arguments.length?(et=k,F):et},F.on=function(){var k=rt.on.apply(rt,arguments);return k===rt?F:k},F};function a(y){return y.text}function o(){return"serif"}function s(){return"normal"}function l(y){return Math.sqrt(y.value)}function c(){return(~~(random()*6)-3)*30}function u(){return 1}function h(y,g,b,A){if(!g.sprite){var L=y.context,x=y.ratio;L.clearRect(0,0,(r<<5)/x,i/x);var V=0,$=0,G=0,C=b.length;for(--A;++A<C;){g=b[A],L.save(),L.font=g.style+" "+g.weight+" "+~~((g.size+1)/x)+"px "+g.font;const I=L.measureText(g.text),M=-Math.floor(I.width/2);let nt=(I.width+1)*x,q=g.size<<1;if(g.rotate){var R=Math.sin(g.rotate*e),rt=Math.cos(g.rotate*e),X=nt*rt,et=nt*R,F=q*rt,tt=q*R;nt=Math.max(Math.abs(X+tt),Math.abs(X-tt))+31>>5<<5,q=~~Math.max(Math.abs(et+F),Math.abs(et-F))}else nt=nt+31>>5<<5;if(q>G&&(G=q),V+nt>=r<<5&&(V=0,$+=G,G=0),$+q>=i)break;L.translate((V+(nt>>1))/x,($+(q>>1))/x),g.rotate&&L.rotate(g.rotate*e),L.fillText(g.text,M,0),g.padding&&(L.lineWidth=2*g.padding,L.strokeText(g.text,M,0)),L.restore(),g.width=nt,g.height=q,g.xoff=V,g.yoff=$,g.x1=nt>>1,g.y1=q>>1,g.x0=-g.x1,g.y0=-g.y1,g.hasText=!0,V+=nt}for(var st=L.getImageData(0,0,(r<<5)/x,i/x).data,Y=[];--A>=0;)if(g=b[A],!!g.hasText){for(var k=g.width,B=k>>5,ct=g.y1-g.y0,z=0;z<ct*B;z++)Y[z]=0;if(V=g.xoff,V==null)return;$=g.yoff;for(var dt=0,lt=-1,ft=0;ft<ct;ft++){for(var z=0;z<k;z++){var D=B*ft+(z>>5),U=st[($+ft)*(r<<5)+(V+z)<<2]?1<<31-z%32:0;Y[D]|=U,dt|=U}dt?lt=ft:(g.y0++,ct--,ft--,$++)}g.y1=g.y0+lt,g.sprite=Y.slice(0,(g.y1-g.y0)*B)}}}function d(y,g,b){b>>=5;for(var A=y.sprite,L=y.width>>5,x=y.x-(L<<4),V=x&127,$=32-V,G=y.y1-y.y0,C=(y.y+y.y0)*b+(x>>5),R,rt=0;rt<G;rt++){R=0;for(var X=0;X<=L;X++)if((R<<$|(X<L?(R=A[rt*L+X])>>>V:0))&g[C+X])return!0;C+=b}return!1}function f(y,g){var b=y[0],A=y[1];g.x+g.x0<b.x&&(b.x=g.x+g.x0),g.y+g.y0<b.y&&(b.y=g.y+g.y0),g.x+g.x1>A.x&&(A.x=g.x+g.x1),g.y+g.y1>A.y&&(A.y=g.y+g.y1)}function p(y,g){return y.x+y.x1>g[0].x&&y.x+y.x0<g[1].x&&y.y+y.y1>g[0].y&&y.y+y.y0<g[1].y}function w(y){var g=y[0]/y[1];return function(b){return[g*(b*=.1)*Math.cos(b),b*Math.sin(b)]}}function m(y){var g=4,b=g*y[0]/y[1],A=0,L=0;return function(x){var V=x<0?-1:1;switch(Math.sqrt(1+4*V*x)-V&3){case 0:A+=b;break;case 1:L+=g;break;case 2:A-=b;break;default:L-=g;break}return[A,L]}}function _(y){for(var g=[],b=-1;++b<y;)g[b]=0;return g}function S(){return document.createElement("canvas")}function E(y){return typeof y=="function"?y:function(){return y}}return wa}lO();function cO(t){var e=t==null?0:t.length;return e?fu(t):[]}function uO(t){return iu(ou(t,void 0,cO),t+"")}function hO(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}function dO(t,e){return e.length<2?t:mo(t,hO(e,0,-1))}function fO(t,e){return e=Ai(e,t),t=dO(t,e),t==null||delete t[Mr(Ru(e))]}function pO(t){return gu(t)?void 0:t}var gO=1,mO=2,vO=4;uO(function(t,e){var n={};if(t==null)return n;var r=!1;e=eu(e,function(a){return a=Ai(a,t),r||(r=a.length>1),a}),jn(t,wu(t),n),r&&(n=hr(n,gO|mO|vO,pO));for(var i=e.length;i--;)fO(n,e[i]);return n});function dc(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function zo(t){this._context=t}zo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dc(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function cd(t,e){this._basis=new zo(t),this._beta=e}cd.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,o=e[n]-i,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+l*a),this._beta*e[s]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(r){return e===1?new zo(r):new cd(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function Ti(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Wo(t,e){this._context=t,this._k=(1-e)/6}Wo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ti(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ti(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Wo(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Yo(t,e){this._context=t,this._k=(1-e)/6}Yo.prototype={areaStart:wi,areaEnd:wi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ti(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Yo(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Xo(t,e){this._context=t,this._k=(1-e)/6}Xo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ti(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Xo(r,e)}return n.tension=function(r){return t(+r)},n})(0);function qo(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Vt){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Vt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function ud(t,e){this._context=t,this._alpha=e}ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:qo(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new ud(r,e):new Wo(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function hd(t,e){this._context=t,this._alpha=e}hd.prototype={areaStart:wi,areaEnd:wi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:qo(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new hd(r,e):new Yo(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function dd(t,e){this._context=t,this._alpha=e}dd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qo(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new dd(r,e):new Xo(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function fc(t){return t<0?-1:1}function pc(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(fc(a)+fc(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function gc(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ea(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function ro(t){this._context=t}ro.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ea(this,this._t0,gc(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ea(this,gc(this,n=pc(this,t,e)),n);break;default:Ea(this,this._t0,n=pc(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(ro.prototype).point=function(t,e){ro.prototype.point.call(this,e,t)};class yO extends Bn{zoomIn(e,n,r){let i,a,o;const s=r||ul;e&&(i=e.x,a=e.y,o=2);const{width:l,height:c}=J.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});n.transition().duration(s.duration).ease(s.ease).attr("transform",`translate(${l/2}, ${c/2}) scale(${o}) translate(${-i},${-a})`),this.services.events.dispatchEvent(T.CanvasZoom.CANVAS_ZOOM_IN,{element:P(e)})}zoomOut(e,n){const r=n||ul;e.transition().duration(r.duration).ease(r.ease).attr("transform",""),this.services.events.dispatchEvent(T.CanvasZoom.CANVAS_ZOOM_OUT)}}class _O extends Bn{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(e,n){this.documentFragment.addEventListener(e,n)}removeEventListener(e,n){this.documentFragment.removeEventListener(e,n)}dispatchEvent(e,n){let r;n?r=new CustomEvent(e,{detail:n}):(r=document.createEvent("Event"),r.initEvent(e,!1,!0)),this.documentFragment.dispatchEvent(r)}}class bO extends Bn{constructor(e,n){super(e,n)}downloadCSV(e,n){const r=document.createElement("a"),i="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:i}),n);else if(URL&&"download"in r){const a=URL.createObjectURL(new Blob([e],{type:i}));r.href=a,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)}else location.href=`data:application/octet-stream,${encodeURIComponent(e)}`}downloadImage(e,n){const r=document.createElement("a");r.download=n,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}class wO extends Bn{constructor(){super(...arguments),this.pendingTransitions={}}init(){var e;(e=this.services.events)==null||e.addEventListener(T.Model.UPDATE,()=>{this.pendingTransitions={}})}setupTransition({transition:e,name:n,animate:r}){return this.pendingTransitions[e._id]=e,e.on("end interrupt cancel",()=>{delete this.pendingTransitions[e._id]}),this.model.getOptions().animations===!1||r===!1?e.duration(0):e.duration(O(fl,n,"duration")||fl.default.duration)}getPendingTransitions(){return this.pendingTransitions}}class EO{constructor(e,n){this.components=[],this.services={canvasZoom:yO,domUtils:J,events:_O,files:bO,gradientUtils:wr,transitions:wO},this.model=new Th(this.services)}init(e,n){this.model.set({holder:e},{skipUpdate:!0}),Object.keys(this.services).forEach(r=>{const i=this.services[r];this.services[r]=new i(this.model,this.services)}),this.services.events.addEventListener(T.Model.UPDATE,r=>{const i=!!O(r,"detail","animate");this.update(i)}),this.model.setData(n.data),this.services.events.addEventListener(T.Chart.RESIZE,()=>{this.update(!1)}),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(e=!0){if(!this.components)return;Object.keys(this.services).forEach(i=>{this.services[i].update()}),this.components.forEach(i=>i.render(e));const n=this.services.transitions.getPendingTransitions(),r=Object.keys(n).map(i=>n[i].end().catch(a=>a));Promise.all(r).then(()=>this.services.events.dispatchEvent(T.Chart.RENDER_FINISHED))}destroy(){this.components.forEach(e=>e.destroy()),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(e,n){const r=this.model.getOptions(),i=O(r,"toolbar","enabled"),a={id:"legend",components:[new PT(this.model,this.services)],growth:Ut.PREFERRED},o=O(r,"canvasZoom","enabled");o&&o===!0&&e.push(new FT(this.model,this.services));const s=!!this.model.getOptions().title,l={id:"title",components:[new UT(this.model,this.services)],growth:Ut.STRETCH},c={id:"toolbar",components:[new RT(this.model,this.services)],growth:Ut.PREFERRED},u={id:"header",components:[new _a(this.model,this.services,[l,...i?[c]:[]],{direction:ee.ROW,alignItems:io.CENTER})],growth:Ut.PREFERRED},h={id:"graph-frame",components:e,growth:Ut.STRETCH,renderType:O(n,"graphFrameRenderType")||Tt.SVG},d=O(n,"excludeLegend")!==!0&&r.legend.enabled!==!1;let f=ee.COLUMN;if(d){const _=O(r,"legend","position");_==="left"?(f=ee.ROW,r.legend.orientation||(r.legend.orientation=Oa.VERTICAL)):_==="right"?(f=ee.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=Oa.VERTICAL)):_==="bottom"&&(f=ee.COLUMN_REVERSE)}const p={id:"spacer",components:[new ic(this.model,this.services)],growth:Ut.PREFERRED},w={id:"full-frame",components:[new _a(this.model,this.services,[...d?[a]:[],...d?[p]:[],h],{direction:f})],growth:Ut.STRETCH},m=[];if(s||i){m.push(u);const _={id:"spacer",components:[new ic(this.model,this.services,i?{size:15}:void 0)],growth:Ut.PREFERRED};m.push(_)}return m.push(w),[new VT(this.model,this.services),new NT(this.model,this.services),new _a(this.model,this.services,m,{direction:ee.COLUMN})]}}Xe.LINE+"",Xe.SCATTER+"",Xe.AREA+"",Xe.STACKED_AREA+"",Xe.SIMPLE_BAR+"",Xe.GROUPED_BAR+"",Xe.STACKED_BAR+"";class SO extends EO{constructor(e,n,r=!1){super(e,n),this.model=new Rb(this.services),!r&&(this.model.setOptions(pb(db.pieChart,n.options)),this.init(e,n))}getComponents(){const e=[new KT(this.model,this.services),new YT(this.model,this.services,{skeleton:Mn.PIE})];return this.getChartComponents(e)}}var TO=$e("<div></div>");function OO(t,e){const n=ri(e,["children","$$slots","$$events","$$legacy"]),r=ri(n,["data","options","Chart","chart","ref","id"]);vc(e,!1);const i="cds--chart-holder";let a=Te(e,"data",24,()=>[]),o=Te(e,"options",24,()=>({})),s=Te(e,"Chart",8),l=Te(e,"chart",12),c=Te(e,"ref",12),u=Te(e,"id",24,()=>`chart-${Math.random().toString(36)}`);const h=xd();yc(()=>{try{l(new(s())(c(),{data:a(),options:o()})),h("load")}catch(f){console.error("Failed to initialize chart:",f)}}),Md(()=>{if(l())try{l().model.setData(a()),l().model.setOptions(o()),h("update",{data:a(),options:o()})}catch(f){console.error("Failed to update chart:",f)}}),$d(()=>{l()&&(h("destroy"),l().components.forEach(f=>f.destroy()),l().model.set({destroyed:!0},{skipUpdate:!0}),l(void 0))}),Dd();var d=TO();Cd(d,()=>({id:u(),class:i,...r})),wd(d,f=>c(f),()=>c()),oe(t,d),_c()}function xO(t,e){const n=ri(e,["children","$$slots","$$events","$$legacy"]),r=ri(n,["options","data","chart","ref"]);let i=Te(e,"options",8),a=Te(e,"data",8),o=Te(e,"chart",12,void 0),s=Te(e,"ref",12,void 0);OO(t,Ed(()=>r,{get Chart(){return SO},get options(){return i()},get data(){return a()},get ref(){return s()},set ref(l){s(l)},get chart(){return o()},set chart(l){o(l)},$$events:{load(l){Bi.call(this,e,l)},update(l){Bi.call(this,e,l)},destroy(l){Bi.call(this,e,l)}},$$legacy:!0}))}const Qe={title:"Not set",resizable:!0,height:"400px",pie:{alignment:"center"},donut:{center:{label:"Total Hours"}},legend:{position:"right"},color:{scale:{}}},MO=(t,e)=>!t&&!e?"All Time":t&&!e?`From ${new Date(t).toLocaleDateString()}`:!t&&e?`Until ${new Date(e).toLocaleDateString()}`:`${new Date(t).toLocaleDateString()} - ${new Date(e).toLocaleDateString()}`,$O=t=>{if(t.length===0)return{totalHours:0,totalSessions:0,averageSessionLength:0,dateRange:{earliest:null,latest:null}};const n=t.reduce((s,l)=>s+l.elapsed,0)/(1e3*60*60),r=n/t.length,i=t.map(s=>s.start).sort((s,l)=>s-l),a=new Date(i[0]),o=new Date(i[i.length-1]);return{totalHours:Math.round(n*100)/100,totalSessions:t.length,averageSessionLength:Math.round(r*100)/100,dateRange:{earliest:a,latest:o}}},Sa=t=>{const e=new Map;return t.forEach(n=>{const r=n.elapsed/36e5;let i=0;e.get(n.activity)?i+=r:i=r,e.set(n.activity,i)}),Array.from(e.entries()).map(([n,r])=>({group:n,value:Math.round(r*100)/100}))},mc=t=>{const e=new Map;return t.forEach(n=>{const r=n.elapsed/36e5;let i=0;e.get(n.project_name)?i+=r:i=r,e.set(n.project_name,i)}),Array.from(e.entries()).map(([n,r])=>({group:n,value:Math.round(r*100)/100}))},Ta=(t,e)=>{const n=new Map;return t.forEach(r=>{const i=e?r.activity:r.project_name;n.set(i,r.project_color)}),Object.fromEntries(n)},AO=(t,e,n,r)=>{mt(e,""),mt(n,""),r()};var CO=(t,e)=>e("today"),LO=(t,e)=>e("yesterday"),DO=(t,e)=>e("thisWeek"),kO=(t,e)=>e("lastWeek"),IO=(t,e)=>e("thisMonth"),RO=(t,e)=>e("lastMonth"),NO=$e("<br/>to<br/> ",1),UO=$e('<div class="stat-card svelte-oymc29"><h3 class="svelte-oymc29">Date Range</h3> <p class="stat-value-small svelte-oymc29"> <!></p></div>'),PO=$e('<div class="summary-stats svelte-oymc29"><div class="stat-card svelte-oymc29"><h3 class="svelte-oymc29">Total Hours</h3> <p class="stat-value svelte-oymc29"> </p></div> <div class="stat-card svelte-oymc29"><h3 class="svelte-oymc29">Sessions</h3> <p class="stat-value svelte-oymc29"> </p></div> <div class="stat-card svelte-oymc29"><h3 class="svelte-oymc29">Avg Session</h3> <p class="stat-value svelte-oymc29"> </p></div> <!></div>'),HO=$e('<div class="chart-container svelte-oymc29"><!></div>'),FO=$e(`<p class="svelte-oymc29">Try adjusting your date range or clearing the
                            filters.</p>`),VO=$e('<p class="svelte-oymc29">Start logging your activities to see the summary!</p>'),jO=$e('<div class="no-data svelte-oymc29"><p class="svelte-oymc29"> </p> <!></div>'),BO=$e('<div class="loading svelte-oymc29"><p class="svelte-oymc29">Loading summary data...</p></div>'),GO=$e('<div class="summary-page svelte-oymc29"><h1 class="svelte-oymc29">Time Tracking Summary</h1> <div class="distribution-selector svelte-oymc29"><label for="distribution-type" class="svelte-oymc29">View by:</label> <select id="distribution-type" class="svelte-oymc29"><option>Activity</option><option>Project</option><option>By Date</option><option>By Hour</option></select> <div class="filters-container svelte-oymc29"><div class="distribution-selector svelte-oymc29"><label for="distribution-type" class="svelte-oymc29">View by:</label> <select id="distribution-type" class="svelte-oymc29"><option>Activity</option><option>Project</option></select></div> <div class="date-filter svelte-oymc29"><div class="date-input-group svelte-oymc29"><label for="start-date" class="svelte-oymc29">From:</label> <input id="start-date" type="date" class="svelte-oymc29"/></div> <div class="date-input-group svelte-oymc29"><label for="end-date" class="svelte-oymc29">To:</label> <input id="end-date" type="date" class="svelte-oymc29"/></div> <button class="clear-dates svelte-oymc29">Clear Dates</button></div> <div class="preset-buttons svelte-oymc29"><h3 class="svelte-oymc29">Quick Select:</h3> <div class="preset-grid svelte-oymc29"><button class="preset-btn svelte-oymc29">Today</button> <button class="preset-btn svelte-oymc29">Yesterday</button> <button class="preset-btn svelte-oymc29">This Week</button> <button class="preset-btn svelte-oymc29">Last Week</button> <button class="preset-btn svelte-oymc29">This Month</button> <button class="preset-btn svelte-oymc29">Last Month</button></div></div></div></div> <!> <!></div>');function ix(t,e){vc(e,!0);let n=Ye(null),r=Ye(Rr([])),i=Ye(Rr([])),a=Ye(Rr([])),o=Ye("activity"),s=Ye(""),l=Ye(""),c=Ye(Rr({totalHours:0,totalSessions:0,averageSessionLength:0,dateRange:{earliest:null,latest:null}})),u=`Time distribution by ${W(o)}`;Qe.title=u;let h={};const d=()=>{if(!W(s)&&!W(l)){mt(i,W(r),!0);return}const Q=W(s)?new Date(W(s)).getTime():0,Z=W(l)?new Date(W(l)+"T23:59:59").getTime():Number.MAX_SAFE_INTEGER;mt(i,W(r).filter(H=>H.start>=Q&&H.end<=Z),!0)},f=()=>{mt(c,$O(W(i)),!0);const Q=MO(W(s),W(l));W(o)==="activity"?(mt(a,Sa(W(i)),!0),h=Ta(W(i),!0)):W(o)==="project"&&(mt(a,mc(W(i)),!0),h=Ta(W(i),!1)),Qe.title=`Time distribution by ${W(o)} (${Q})`,Qe.color.scale=h},p=Q=>{const Z=Q.target;mt(o,Z.value,!0),W(o)==="activity"?(mt(a,Sa(W(r)),!0),Qe.title="Time Distribution by Activity"):W(o)==="project"&&(mt(a,mc(W(r)),!0),Qe.title="Time Distribution by Project"),console.log("Selected option:",W(o)),f()},w=()=>{d(),f()},m=Q=>{const Z=new Date,H=Z.toISOString().split("T")[0];switch(Q){case"today":mt(s,H,!0),mt(l,H,!0);break;case"yesterday":{const K=new Date(Z);K.setDate(K.getDate()-1);const _t=K.toISOString().split("T")[0];mt(s,_t,!0),mt(l,_t,!0);break}case"thisWeek":{const K=new Date(Z);K.setDate(Z.getDate()-Z.getDay()),mt(s,K.toISOString().split("T")[0],!0),mt(l,H,!0);break}case"lastWeek":{const K=new Date(Z);K.setDate(Z.getDate()-Z.getDay()-1);const _t=new Date(K);_t.setDate(K.getDate()-6),mt(s,_t.toISOString().split("T")[0],!0),mt(l,K.toISOString().split("T")[0],!0);break}case"thisMonth":{const K=new Date(Z.getFullYear(),Z.getMonth(),1);mt(s,K.toISOString().split("T")[0],!0),mt(l,H,!0);break}case"lastMonth":{const K=new Date(Z.getFullYear(),Z.getMonth()-1,1),_t=new Date(Z.getFullYear(),Z.getMonth(),0);mt(s,K.toISOString().split("T")[0],!0),mt(l,_t.toISOString().split("T")[0],!0);break}}w()};yc(async()=>{const Q=await Sd(()=>import("../chunks/BVjkO3Q2.js"),[],import.meta.url);mt(n,Ld(new Q.default),!0),await W(n).initWorker(),mt(r,await kd(W(n)),!0),mt(i,W(r),!0),mt(a,Sa(W(i)),!0),h=Ta(W(i),!0),Qe.color.scale=h});var S=GO(),E=ut(wt(S),2),y=ut(wt(E),2);y.__change=p;var g=wt(y);g.value=g.__value="activity";var b=ut(g);b.value=b.__value="project";var A=ut(b);A.value=A.__value="date";var L=ut(A);L.value=L.__value="hour",Et(y);var x;ls(y);var V=ut(y,2),$=wt(V),G=ut(wt($),2);G.__change=p;var C=wt(G);C.value=C.__value="activity";var R=ut(C);R.value=R.__value="project",Et(G);var rt;ls(G),Et($);var X=ut($,2),et=wt(X),F=ut(wt(et),2);cs(F),F.__change=w,Et(et);var tt=ut(et,2),st=ut(wt(tt),2);cs(st),st.__change=w,Et(tt);var Y=ut(tt,2);Y.__click=[AO,s,l,w],Et(X);var k=ut(X,2),B=ut(wt(k),2),ct=wt(B);ct.__click=[CO,m];var z=ut(ct,2);z.__click=[LO,m];var dt=ut(z,2);dt.__click=[DO,m];var lt=ut(dt,2);lt.__click=[kO,m];var ft=ut(lt,2);ft.__click=[IO,m];var D=ut(ft,2);D.__click=[RO,m],Et(B),Et(k),Et(V),Et(E);var U=ut(E,2);{var I=Q=>{var Z=PO(),H=wt(Z),K=ut(wt(H),2),_t=wt(K);Et(K),Et(H);var Mt=ut(H,2),be=ut(wt(Mt),2),Ce=wt(be,!0);Et(be),Et(Mt);var At=ut(Mt,2),Ot=ut(wt(At),2),Kt=wt(Ot);Et(Ot),Et(At);var we=ut(At,2);{var mn=ze=>{var We=UO(),Qt=ut(wt(We),2),Le=wt(Qt),vn=ut(Le);{var yn=Bt=>{var De=NO(),Gn=ut(ji(De),3);Yn(zn=>wn(Gn,` ${zn??""}`),[()=>W(c).dateRange.latest.toLocaleDateString()]),oe(Bt,De)};bn(vn,Bt=>{W(c).dateRange.earliest.toDateString()!==W(c).dateRange.latest.toDateString()&&Bt(yn)})}Et(Qt),Et(We),Yn(Bt=>wn(Le,`${Bt??""} `),[()=>W(c).dateRange.earliest.toLocaleDateString()]),oe(ze,We)};bn(we,ze=>{W(c).dateRange.earliest&&W(c).dateRange.latest&&ze(mn)})}Et(Z),Yn(()=>{wn(_t,`${W(c).totalHours??""}h`),wn(Ce,W(c).totalSessions),wn(Kt,`${W(c).averageSessionLength??""}h`)}),oe(Q,Z)};bn(U,Q=>{W(i).length>0&&Q(I)})}var M=ut(U,2);{var nt=Q=>{var Z=ss(),H=ji(Z);Ad(H,()=>W(a),K=>{var _t=ss(),Mt=ji(_t);{var be=At=>{var Ot=HO(),Kt=wt(Ot);xO(Kt,{get data(){return W(a)},get options(){return Qe}}),Et(Ot),oe(At,Ot)},Ce=At=>{var Ot=jO(),Kt=wt(Ot),we=wt(Kt);Et(Kt);var mn=ut(Kt,2);{var ze=Qt=>{var Le=FO();oe(Qt,Le)},We=Qt=>{var Le=VO();oe(Qt,Le)};bn(mn,Qt=>{W(s)||W(l)?Qt(ze):Qt(We,!1)})}Et(Ot),Yn(()=>wn(we,`No time tracking data found${W(s)||W(l)?" for the selected date range":""}.`)),oe(At,Ot)};bn(Mt,At=>{W(a).length>0?At(be):At(Ce,!1)})}oe(K,_t)}),oe(Q,Z)},q=Q=>{var Z=BO();oe(Q,Z)};bn(M,Q=>{W(n)?Q(nt):Q(q,!1)})}Et(S),Yn(()=>{x!==(x=W(o))&&(y.value=(y.__value=W(o))??"",us(y,W(o))),rt!==(rt=W(o))&&(G.value=(G.__value=W(o))??"",us(G,W(o)))}),hs(F,()=>W(s),Q=>mt(s,Q)),hs(st,()=>W(l),Q=>mt(l,Q)),oe(t,S),_c()}Td(["change","click"]);export{ix as component};
