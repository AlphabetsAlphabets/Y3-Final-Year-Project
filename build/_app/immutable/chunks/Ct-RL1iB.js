import{m as F,h as L,g as P,ai as S,A as V,G as v,F as d,H as n,D as W,B as p,j as c,I as G}from"./DtPNIzaT.js";import{l as H,d as I,f as x,a as g,c as M}from"./BWJJ8Nft.js";import{s as j}from"./D7PZLOxe.js";import{p as R,i as q}from"./DM5Mwux_.js";import{e as z}from"./C9ip0I7f.js";function ta(a,e,t=e){var i=F();H(a,"input",s=>{var l=s?a.defaultValue:a.value;if(l=b(a)?h(l):l,t(l),i&&l!==(l=e())){var o=a.selectionStart,r=a.selectionEnd;a.value=l??"",r!==null&&(a.selectionStart=o,a.selectionEnd=Math.min(r,a.value.length))}}),(L&&a.defaultValue!==a.value||P(e)==null&&a.value)&&t(b(a)?h(a.value):a.value),S(()=>{var s=e();b(a)&&s===h(a.value)||a.type==="date"&&!s&&!a.value||s!==a.value&&(a.value=s??"")})}function b(a){var e=a.type;return e==="number"||e==="range"}function h(a){return a===""?null:+a}const J="tasks",m=async a=>{var t;const e=await a.list(J);return((t=e==null?void 0:e.result)==null?void 0:t.resultRows)||[]},w="tasks",sa=async(a,e,t="")=>{const i=Date.now();return await a.insert(w,"name, description, created_at",`'${e}', '${t}', ${i}`),await m(a)},K=async(a,e)=>(await a.remove(w,`id = ${e}`),await m(a)),la=async a=>(await a.remove("tasks","completed = 1"),await m(a)),N=async(a,e)=>{const t=Date.now();return await a.update(w,`completed = 1, completed_at = ${t}`,`id = ${e}`),await m(a)};var O=async(a,e,t)=>e(c(t).id),Q=async(a,e,t,i)=>{e.dbWorker?t(await K(e.dbWorker,c(i).id)):console.error("Worker not ready. Please wait.")},U=x('<li class="task-item svelte-1jigg41"><button aria-label="Finish task" class="checkbox svelte-1jigg41"><i class="bi bi-check svelte-1jigg41"></i></button> <span class="task-name svelte-1jigg41"> </span> <small> </small> <button class="delete-btn svelte-1jigg41" aria-label="Delete task"><i class="bi bi-trash"></i></button></li>'),X=x('<div class="tasks-section svelte-1jigg41"><h2 class="section-title svelte-1jigg41">Todo</h2> <ul class="task-list svelte-1jigg41"></ul></div>');function ra(a,e){V(e,!0);let t=R(e,"tasks",15),i=async o=>{e.dbWorker?t(await N(e.dbWorker,o)):console.error("Worker is not ready. Please try again.")};var s=X(),l=v(d(s),2);z(l,21,t,o=>o.id,(o,r)=>{var y=M(),A=p(y);{var D=u=>{var _=U(),T=d(_);T.__click=[O,i,r];var f=v(T,2),E=d(f,!0);n(f);var k=v(f,2),B=d(k,!0);n(k);var C=v(k,2);C.__click=[Q,e,t,r],n(_),G(()=>{j(E,c(r).name),j(B,c(r).description)}),g(u,_)};q(A,u=>{c(r).completed||u(D)})}g(o,y)}),n(l),n(s),g(a,s),W()}I(["click"]);export{ra as T,sa as a,ta as b,K as c,la as d,m as l};
