import{m as F,h as L,g as P,ai as S,A as V,D as W,G as v,F as u,H as o,B as p,j as n,I as G}from"./DN1A8kAO.js";import{l as H,d as I,f as x,a as b,c as M}from"./C09PkMul.js";import{s as j}from"./CsoYPtsO.js";import{p as R,i as q}from"./BCaQlCOz.js";import{e as z}from"./58ycRPki.js";function ta(a,e,t=e){var i=F();H(a,"input",s=>{var l=s?a.defaultValue:a.value;if(l=h(a)?w(l):l,t(l),i&&l!==(l=e())){var c=a.selectionStart,r=a.selectionEnd;a.value=l??"",r!==null&&(a.selectionStart=c,a.selectionEnd=Math.min(r,a.value.length))}}),(L&&a.defaultValue!==a.value||P(e)==null&&a.value)&&t(h(a)?w(a.value):a.value),S(()=>{var s=e();h(a)&&s===w(a.value)||a.type==="date"&&!s&&!a.value||s!==a.value&&(a.value=s??"")})}function h(a){var e=a.type;return e==="number"||e==="range"}function w(a){return a===""?null:+a}const J="tasks",d=async a=>{var t;const e=await a.list(J);return((t=e==null?void 0:e.result)==null?void 0:t.resultRows)||[]},y="tasks",sa=async(a,e,t="")=>{const i=Date.now();return await a.insert(y,"name, description, created_at",`'${e}', '${t}', ${i}`),await d(a)},K=async(a,e)=>(await a.remove(y,`id = ${e}`),await d(a)),la=async a=>(await a.remove("tasks","completed = 1"),await d(a)),N=async(a,e)=>{const t=Date.now();return await a.update(y,`completed = 1, completed_at = ${t}`,`id = ${e}`),await d(a)};var O=async(a,e,t)=>e(n(t).id),Q=async(a,e,t,i)=>{e.dbWorker?t(await K(e.dbWorker,n(i).id)):console.error("Worker not ready. Please wait.")},U=x('<li class="task-item svelte-19jigcu"><button aria-label="Finish task" class="checkbox svelte-19jigcu"><i class="bi bi-check svelte-19jigcu"></i></button> <span class="task-name svelte-19jigcu"> </span> <small> </small> <button class="delete-btn svelte-19jigcu" aria-label="Delete task"><i class="bi bi-trash"></i></button></li>'),X=x('<div class="tasks-section svelte-19jigcu"><h2 class="section-title svelte-19jigcu">Todo</h2> <ul class="task-list svelte-19jigcu"></ul></div>');function ra(a,e){V(e,!0);let t=R(e,"tasks",15),i=async c=>{e.dbWorker?t(await N(e.dbWorker,c)):console.error("Worker is not ready. Please try again.")};var s=X(),l=v(u(s),2);z(l,21,t,c=>c.id,(c,r)=>{var g=M(),A=p(g);{var D=m=>{var _=U(),T=u(_);T.__click=[O,i,r];var f=v(T,2),E=u(f,!0);o(f);var k=v(f,2),B=u(k,!0);o(k);var C=v(k,2);C.__click=[Q,e,t,r],o(_),G(()=>{j(E,n(r).name),j(B,n(r).description)}),b(m,_)};q(A,m=>{n(r).completed||m(D)})}b(c,g)}),o(l),o(s),b(a,s),W()}I(["click"]);export{ra as T,sa as a,ta as b,K as c,la as d,d as l};
