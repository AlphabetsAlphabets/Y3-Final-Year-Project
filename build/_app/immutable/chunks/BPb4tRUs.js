import{m as F,h as L,g as P,ah as S,A as V,C as W,D as v,F as u,G as n,B as G,j as o,H}from"./Babm-7jm.js";import{l as M,d as R,f as x,a as b,c as p,s as j}from"./BLYeUyYq.js";import{p as q,i as z}from"./Blysb1Co.js";import{e as I}from"./rWHTdQe2.js";function ea(a,e,t=e){var c=F();M(a,"input",s=>{var l=s?a.defaultValue:a.value;if(l=h(a)?w(l):l,t(l),c&&l!==(l=e())){var i=a.selectionStart,r=a.selectionEnd;a.value=l??"",r!==null&&(a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length))}}),(L&&a.defaultValue!==a.value||P(e)==null&&a.value)&&t(h(a)?w(a.value):a.value),S(()=>{var s=e();h(a)&&s===w(a.value)||a.type==="date"&&!s&&!a.value||s!==a.value&&(a.value=s??"")})}function h(a){var e=a.type;return e==="number"||e==="range"}function w(a){return a===""?null:+a}const J="tasks",d=async a=>{var t;const e=await a.list(J);return((t=e==null?void 0:e.result)==null?void 0:t.resultRows)||[]},y="tasks",ta=async(a,e,t="")=>{const c=Date.now();return await a.insert(y,"name, description, created_at",`'${e}', '${t}', ${c}`),await d(a)},K=async(a,e)=>(await a.remove(y,`id = ${e}`),await d(a)),sa=async a=>(await a.remove("tasks","completed = 1"),await d(a)),N=async(a,e)=>{const t=Date.now();return await a.update(y,`completed = 1, completed_at = ${t}`,`id = ${e}`),await d(a)};var O=async(a,e,t)=>e(o(t).id),Q=async(a,e,t,c)=>{e.dbWorker?t(await K(e.dbWorker,o(c).id)):console.error("Worker not ready. Please wait.")},U=x('<li class="task-item svelte-19jigcu"><button aria-label="Finish task" class="checkbox svelte-19jigcu"><i class="bi bi-check svelte-19jigcu"></i></button> <span class="task-name svelte-19jigcu"> </span> <small> </small> <button class="delete-btn svelte-19jigcu" aria-label="Delete task"><i class="bi bi-trash"></i></button></li>'),X=x('<div class="tasks-section svelte-19jigcu"><h2 class="section-title svelte-19jigcu">Todo</h2> <ul class="task-list svelte-19jigcu"></ul></div>');function la(a,e){V(e,!0);let t=q(e,"tasks",15),c=async i=>{e.dbWorker?t(await N(e.dbWorker,i)):console.error("Worker is not ready. Please try again.")};var s=X(),l=v(u(s),2);I(l,21,t,i=>i.id,(i,r)=>{var g=p(),A=G(g);{var D=m=>{var _=U(),T=u(_);T.__click=[O,c,r];var f=v(T,2),E=u(f,!0);n(f);var k=v(f,2),B=u(k,!0);n(k);var C=v(k,2);C.__click=[Q,e,t,r],n(_),H(()=>{j(E,o(r).name),j(B,o(r).description)}),b(m,_)};z(A,m=>{o(r).completed||m(D)})}b(i,g)}),n(l),n(s),b(a,s),W()}R(["click"]);export{la as T,ta as a,ea as b,K as c,sa as d,d as l};
