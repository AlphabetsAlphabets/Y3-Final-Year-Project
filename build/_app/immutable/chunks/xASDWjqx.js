import{d as C,f as y,a as b,c as D,s as h}from"./DDpgsnWW.js";import{B as E,F,H as o,G as n,I as c,C as L,j as r,J as P}from"./Nagih0ik.js";import{p as W,i as G}from"./4bz4uomn.js";import{e as H}from"./BdrVcQUR.js";const I="tasks",d=async t=>{var e;const a=await t.list(I);return((e=a==null?void 0:a.result)==null?void 0:e.resultRows)||[]},f="tasks",U=async(t,a,e="")=>{const s=Date.now();return await t.insert(f,"name, description, created_at",`'${a}', '${e}', ${s}`),await d(t)},J=async(t,a)=>(await t.remove(f,`id = ${a}`),await d(t)),V=async t=>(await t.remove("tasks","completed = 1"),await d(t)),R=async(t,a)=>{const e=Date.now();return await t.update(f,`completed = 1, completed_at = ${e}`,`id = ${a}`),await d(t)};var q=async(t,a,e)=>a(r(e).id),z=async(t,a,e,s)=>{a.dbWorker?e(await J(a.dbWorker,r(s).id)):console.error("Worker not ready. Please wait.")},K=y('<li class="task-item svelte-19jigcu"><button aria-label="Finish task" class="checkbox svelte-19jigcu"><i class="bi bi-check svelte-19jigcu"></i></button> <span class="task-name svelte-19jigcu"> </span> <small> </small> <button class="delete-btn svelte-19jigcu" aria-label="Delete task"><i class="bi bi-trash"></i></button></li>'),M=y('<div class="tasks-section svelte-19jigcu"><h2 class="section-title svelte-19jigcu">Todo</h2> <ul class="task-list svelte-19jigcu"></ul></div>');function X(t,a){E(a,!0);let e=W(a,"tasks",15),s=async i=>{a.dbWorker?e(await R(a.dbWorker,i)):console.error("Worker is not ready. Please try again.")};var m=M(),p=o(n(m),2);H(p,21,e,i=>i.id,(i,l)=>{var w=D(),T=L(w);{var j=u=>{var v=K(),g=n(v);g.__click=[q,s,l];var k=o(g,2),x=n(k,!0);c(k);var _=o(k,2),A=n(_,!0);c(_);var B=o(_,2);B.__click=[z,a,e,l],c(v),P(()=>{h(x,r(l).name),h(A,r(l).description)}),b(u,v)};G(T,u=>{r(l).completed||u(j)})}b(i,w)}),c(p),c(m),b(t,m),F()}C(["click"]);export{X as T,U as a,J as b,V as d,d as l};
